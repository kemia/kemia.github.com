/*
 * Kemia JavaScript Library v0.2-65-g4b54414
 * http://http://kemia.github.com/
 * 
 * Copyright (c) 2010 Paul Novak (paul@wingu.com)
 * 
 * Licensed under the Apache License, Version 2.0 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Date: January 7 2011
 * Revision: v0.2-65-g4b54414
 */
(function(){function g(a){throw a;}var k=true,l=null,n=false;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function r(a){return function(){return this[a]}}function s(a){return function(){return a}}var u,ca=ca||{},da=this;function w(a,b,c){a=a.split(".");c=c||da;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)if(!a.length&&b!==undefined)c[d]=b;else c=c[d]?c[d]:c[d]={}}
function ea(a,b){for(var c=a.split("."),d=b||da,e;e=c.shift();)if(d[e]!=l)d=d[e];else return l;return d}function fa(){}function ga(a){a.qa=function(){return a.kl||(a.kl=new a)}}
function ha(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function ia(a){return ha(a)=="array"}function ja(a){var b=ha(a);return b=="array"||b=="object"&&typeof a.length=="number"}function x(a){return typeof a=="string"}function ka(a){return typeof a=="number"}function la(a){return ha(a)=="function"}function ma(a){a=ha(a);return a=="object"||a=="array"||a=="function"}function oa(a){return a[pa]||(a[pa]=++qa)}
var pa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),qa=0;function ra(a){return a.call.apply(a.bind,arguments)}function sa(a,b){var c=b||da;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(c,e)}}else return function(){return a.apply(c,arguments)}}
function ta(){ta=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ra:sa;return ta.apply(l,arguments)}function ua(a){var b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,b);return a.apply(this,c)}}var va=Date.now||function(){return+new Date};function z(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a}
function A(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c;a.prototype.constructor=a};function wa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function xa(a,b){if(b)return a.replace(ya,"&amp;").replace(za,"&lt;").replace(Aa,"&gt;").replace(Ba,"&quot;");else{if(!Ca.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(ya,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(za,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(Aa,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(Ba,"&quot;");return a}}var ya=/&/g,za=/</g,Aa=/>/g,Ba=/\"/g,Ca=/[&<>\"]/;function Da(a,b){return Array(b+1).join(a)}
function Ea(a,b,c){a=c!==undefined?a.toFixed(c):String(a);c=a.indexOf(".");if(c==-1)c=a.length;return Da("0",Math.max(0,b-c))+a}
function Fa(a,b){for(var c=0,d=wa(String(a)).split("."),e=wa(String(b)).split("."),f=Math.max(d.length,e.length),h=0;c==0&&h<f;h++){var i=d[h]||"",j=e[h]||"",m=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var p=m.exec(i)||["","",""],q=o.exec(j)||["","",""];if(p[0].length==0&&q[0].length==0)break;c=Ga(p[1].length==0?0:parseInt(p[1],10),q[1].length==0?0:parseInt(q[1],10))||Ga(p[2].length==0,q[2].length==0)||Ga(p[2],q[2])}while(c==0)}return c}
function Ga(a,b){if(a<b)return-1;else if(a>b)return 1;return 0}var Ha=Math.random()*2147483648|0;function Ia(a){return a};var Ja=Array.prototype,Ka=Ja.indexOf?function(a,b,c){return Ja.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(x(a)){if(!x(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(c=c;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},B=Ja.forEach?function(a,b,c){Ja.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},La=Ja.filter?function(a,b,c){return Ja.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,
e=[],f=0,h=x(a)?a.split(""):a,i=0;i<d;i++)if(i in h){var j=h[i];if(b.call(c,j,i,a))e[f++]=j}return e},C=Ja.map?function(a,b,c){return Ja.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,h=0;h<d;h++)if(h in f)e[h]=b.call(c,f[h],h,a);return e};function Ma(a,b,c,d){if(a.reduce)return d?a.reduce(ta(b,d),c):a.reduce(b,c);var e=c;B(a,function(f,h){e=b.call(d,e,f,h,a)});return e}
var Na=Ja.some?function(a,b,c){return Ja.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return k;return n},Oa=Ja.every?function(a,b,c){return Ja.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return n;return k};
function Pa(a,b,c){a:{for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a)){b=f;break a}b=-1}return b<0?l:x(a)?a.charAt(b):a[b]}function D(a,b){return Ka(a,b)>=0}function Qa(a,b){var c=Ka(a,b),d;if(d=c>=0)Ra(a,c);return d}function Ra(a,b){return Ja.splice.call(a,b,1).length==1}function Sa(){return Ja.concat.apply(Ja,arguments)}function Ta(a){if(ia(a))return Sa(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function Ua(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;if(ia(c)||(d=ja(c))&&c.hasOwnProperty("callee"))a.push.apply(a,c);else if(d)for(var e=a.length,f=c.length,h=0;h<f;h++)a[e+h]=c[h];else a.push(c)}}function Va(a){return Ja.splice.apply(a,Wa(arguments,1))}function Wa(a,b,c){return arguments.length<=2?Ja.slice.call(a,b):Ja.slice.call(a,b,c)}
function Xa(a,b){for(var c=b||a,d={},e=0,f=0;f<a.length;){var h=a[f++],i=ma(h)?oa(h):h;if(!Object.prototype.hasOwnProperty.call(d,i)){d[i]=k;c[e++]=h}}c.length=e}function Ya(a,b){Ja.sort.call(a,b||Za)}function Za(a,b){return a>b?1:a<b?-1:0}function $a(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function ab(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];ia(c)?a.push.apply(a,ab.apply(l,c)):a.push(c)}return a};function bb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function cb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function db(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function eb(a,b){var c;if(c=b in a)delete a[b];return c}function fb(a,b,c){if(b in a)g(Error('The object already contains the key "'+b+'"'));a[b]=c}function gb(a){var b={},c;for(c in a)b[a[c]]=c;return b}var hb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];
function ib(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<hb.length;e++){b=hb[e];if(Object.prototype.hasOwnProperty.call(c,b))a[b]=c[b]}}}function jb(){var a=arguments.length;if(a==1&&ia(arguments[0]))return jb.apply(l,arguments[0]);if(a%2)g(Error("Uneven number of arguments"));for(var b={},c=0;c<a;c+=2)b[arguments[c]]=arguments[c+1];return b}
function kb(){var a=arguments.length;if(a==1&&ia(arguments[0]))return kb.apply(l,arguments[0]);for(var b={},c=0;c<a;c++)b[arguments[c]]=k;return b};function lb(a){if(typeof a.M=="function")return a.M();if(x(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return cb(a)}function mb(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(ja(a)||x(a))B(a,b,c);else{var d;if(typeof a.gh=="function")d=a.gh();else if(typeof a.M!="function")if(ja(a)||x(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f);d=d}else d=db(a);else d=void 0;e=lb(a);f=e.length;for(var h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};function nb(a){this.Va={};this.ga=[];var b=arguments.length;if(b>1){if(b%2)g(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.zb(arguments[c],arguments[c+1])}else a&&this.Id(a)}u=nb.prototype;u.ea=0;u.$h=0;u.Af=r("ea");u.M=function(){ob(this);for(var a=[],b=0;b<this.ga.length;b++)a.push(this.Va[this.ga[b]]);return a};u.gh=function(){ob(this);return this.ga.concat()};u.clear=function(){this.Va={};this.$h=this.ea=this.ga.length=0};
u.remove=function(a){if(pb(this.Va,a)){delete this.Va[a];this.ea--;this.$h++;this.ga.length>2*this.ea&&ob(this);return k}return n};function ob(a){if(a.ea!=a.ga.length){for(var b=0,c=0;b<a.ga.length;){var d=a.ga[b];if(pb(a.Va,d))a.ga[c++]=d;b++}a.ga.length=c}if(a.ea!=a.ga.length){var e={};for(c=b=0;b<a.ga.length;){d=a.ga[b];if(!pb(e,d)){a.ga[c++]=d;e[d]=1}b++}a.ga.length=c}}u.l=function(a,b){if(pb(this.Va,a))return this.Va[a];return b};
u.zb=function(a,b){if(!pb(this.Va,a)){this.ea++;this.ga.push(a);this.$h++}this.Va[a]=b};u.Id=function(a){var b;if(a instanceof nb){b=a.gh();a=a.M()}else{b=db(a);a=cb(a)}for(var c=0;c<b.length;c++)this.zb(b[c],a[c])};u.ka=function(){return new nb(this)};function pb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function qb(a){this.Va=new nb;a&&this.Id(a)}function rb(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+oa(a):b.substr(0,1)+a}u=qb.prototype;u.Af=function(){return this.Va.Af()};u.add=function(a){this.Va.zb(rb(a),a)};u.Id=function(a){a=lb(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};u.Ve=function(a){a=lb(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};u.remove=function(a){return this.Va.remove(rb(a))};u.clear=function(){this.Va.clear()};
u.contains=function(a){a=rb(a);return pb(this.Va.Va,a)};u.Ki=function(a){var b=new qb;a=lb(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};u.M=function(){return this.Va.M()};u.ka=function(){return new qb(this)};function sb(a){return tb(a||arguments.callee.caller,[])}
function tb(a,b){var c=[];if(D(b,a))c.push("[...circular reference...]");else if(a&&b.length<50){c.push(ub(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":f=f;break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=ub(f))?f:"[fn]";break;default:f=typeof f}if(f.length>40)f=f.substr(0,40)+"...";c.push(f)}b.push(a);c.push(")\n");try{c.push(tb(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ub(a){a=String(a);if(!vb[a]){var b=/function ([^\(]+)/.exec(a);vb[a]=b?b[1]:"[Anonymous]"}return vb[a]}var vb={};function wb(a,b,c,d,e){this.reset(a,b,c,d,e)}wb.prototype.Nl=0;wb.prototype.$g=l;wb.prototype.Zg=l;var xb=0;wb.prototype.reset=function(a,b,c,d,e){this.Nl=typeof e=="number"?e:xb++;this.Ej=d||va();this.sd=a;this.aj=b;this.ql=c;delete this.$g;delete this.Zg};wb.prototype.oj=ba("sd");function yb(a){this.vl=a}yb.prototype.Da=l;yb.prototype.sd=l;yb.prototype.pa=l;yb.prototype.ae=l;function zb(a,b){this.name=a;this.value=b}zb.prototype.toString=r("name");var Ab=new zb("SHOUT",1200),Bb=new zb("SEVERE",1E3),Cb=new zb("WARNING",900),Db=new zb("INFO",800),Eb=new zb("CONFIG",700),Fb=new zb("FINE",500),Gb=new zb("FINEST",300);u=yb.prototype;u.oj=ba("sd");function Hb(a){if(a.sd)return a.sd;if(a.Da)return Hb(a.Da);return l}
u.log=function(a,b,c){if(a.value>=Hb(this).value){a=this.Gk(a,b,c);da.console&&da.console.markTimeline&&da.console.markTimeline("log:"+a.aj);for(b=this;b;){c=b;var d=a;if(c.ae)for(var e=0,f=void 0;f=c.ae[e];e++)f(d);b=b.Da}}};
u.Gk=function(a,b,c){var d=new wb(a,String(b),this.vl);if(c){d.$g=c;var e;var f=arguments.callee.caller;try{var h,i=ea("window.location.href");h=typeof c=="string"?{message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"}:!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:c.lineNumber||c.nn||"Not available",fileName:c.fileName||c.filename||c.sourceURL||i,stack:c.stack||"Not available"}:c;e="Message: "+xa(h.message)+'\nUrl: <a href="view-source:'+
h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+xa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+xa(sb(f)+"-> ")}catch(j){e="Exception trying to expose exception! You win, we lose. "+j}d.Zg=e}return d};u.info=function(a,b){this.log(Db,a,b)};u.k=function(a,b){this.log(Eb,a,b)};function Ib(a,b,c){a.log(Fb,b,c)}var Jb={},Kb=l;function Lb(){if(!Kb){Kb=new yb("");Jb[""]=Kb;Kb.oj(Eb)}}
function E(a){Lb();var b;if(!(b=Jb[a])){b=new yb(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=E(a.substr(0,c));if(!c.pa)c.pa={};c.pa[d]=b;b.Da=c;b=Jb[a]=b}return b};function Mb(){this.kj=va()}var Nb=new Mb;Mb.prototype.zb=ba("kj");Mb.prototype.reset=function(){this.zb(va())};Mb.prototype.l=r("kj");function Ob(a){this.Il=a||"";this.Vl=Nb}u=Ob.prototype;u.rj=k;u.Rl=k;u.Ql=k;u.sj=n;u.Sl=n;function Pb(a){if(a<10)return"0"+a;return String(a)}function Qb(a,b){var c=(a.Ej-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;){e++;c*=10}for(;e-- >0;)d=" "+d;return d}function Rb(a){Ob.call(this,a)}A(Rb,Ob);function Sb(){this.ij=ta(this.jk,this);this.eh=new Rb;this.eh.rj=n;this.Mi=this.eh.sj=n;this.pl=""}Sb.prototype.Ol=function(a){if(a!=this.Mi){var b;Lb();b=Kb;if(a){var c=this.ij;if(!b.ae)b.ae=[];b.ae.push(c)}else{(b=b.ae)&&Qa(b,this.ij);this.on=""}this.Mi=a}};
Sb.prototype.jk=function(a){var b;b=this.eh;var c=[];c.push(b.Il," ");if(b.rj){var d=new Date(a.Ej);c.push("[",Pb(d.getFullYear()-2E3)+Pb(d.getMonth()+1)+Pb(d.getDate())+" "+Pb(d.getHours())+":"+Pb(d.getMinutes())+":"+Pb(d.getSeconds())+"."+Pb(Math.floor(d.getMilliseconds()/10)),"] ")}b.Rl&&c.push("[",Qb(a,b.Vl.l()),"s] ");b.Ql&&c.push("[",a.ql,"] ");b.Sl&&c.push("[",a.sd.name,"] ");c.push(a.aj,"\n");b.sj&&a.$g&&c.push(a.Zg,"\n");b=c.join("");if(window.console&&window.console.firebug)switch(a.sd){case Ab:window.console.info(b);
break;case Bb:window.console.error(b);break;case Cb:window.console.warn(b);break;default:window.console.debug(b)}else if(window.console)window.console.log(b);else if(window.opera)window.opera.postError(b);else this.pl+=b};var Tb,Ub,Vb,Wb,Xb,Yb,Zb;function $b(){return da.navigator?da.navigator.userAgent:l}function ac(){return da.navigator}Xb=Wb=Vb=Ub=Tb=n;var bc;if(bc=$b()){var cc=ac();Tb=bc.indexOf("Opera")==0;Ub=!Tb&&bc.indexOf("MSIE")!=-1;Wb=(Vb=!Tb&&bc.indexOf("WebKit")!=-1)&&bc.indexOf("Mobile")!=-1;Xb=!Tb&&!Vb&&cc.product=="Gecko"}var dc=Tb,F=Ub,G=Xb,I=Vb,ec=Wb,fc,gc=ac();fc=gc&&gc.platform||"";Yb=fc.indexOf("Mac")!=-1;Zb=fc.indexOf("Win")!=-1;var hc=!!ac()&&(ac().appVersion||"").indexOf("X11")!=-1,ic;
a:{var jc="",kc;if(dc&&da.opera){var lc=da.opera.version;jc=typeof lc=="function"?lc():lc}else{if(G)kc=/rv\:([^\);]+)(\)|;)/;else if(F)kc=/MSIE\s+([^\);]+)(\)|;)/;else if(I)kc=/WebKit\/(\S+)/;if(kc){var mc=kc.exec($b());jc=mc?mc[1]:""}}if(F){var nc,oc=da.document;nc=oc?oc.documentMode:undefined;if(nc>parseFloat(jc)){ic=String(nc);break a}}ic=jc}var pc={};function J(a){return pc[a]||(pc[a]=Fa(ic,a)>=0)};var qc,rc=!F||J("9"),sc=F&&!J("9");function tc(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function uc(a){var b=tc(a),c;c=Wa(arguments,1);for(var d=0,e=0;e<c.length;e++)if(!D(b,c[e])){b.push(c[e]);d++}c=d==c.length;a.className=b.join(" ");return c}function vc(a){var b=tc(a),c;c=Wa(arguments,1);for(var d=0,e=0;e<b.length;e++)if(D(c,b[e])){Va(b,e--,1);d++}c=d==c.length;a.className=b.join(" ");return c};function L(a,b){this.x=a!==undefined?a:0;this.y=b!==undefined?b:0}L.prototype.ka=function(){return new L(this.x,this.y)};function wc(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function xc(a,b){return new L(a.x-b.x,a.y-b.y)}function M(a,b){return new L(a.x+b.x,a.y+b.y)};function yc(a,b){this.width=a;this.height=b}u=yc.prototype;u.ka=function(){return new yc(this.width,this.height)};u.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};u.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};u.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};u.scale=function(a){this.width*=a;this.height*=a;return this};function zc(a){return a?new Ac(Bc(a)):qc||(qc=new Ac)}function Cc(a,b){var c=b||document;if(Dc(c))return c.querySelectorAll("."+a);else if(c.getElementsByClassName)return c.getElementsByClassName(a);return Ec(document,"*",a,b)}function Dc(a){return a.querySelectorAll&&a.querySelector&&(!I||Fc(document)||J("528"))}
function Ec(a,b,c,d){a=d||a;b=b&&b!="*"?b.toUpperCase():"";if(Dc(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)if(b==h.nodeName)d[e++]=h;d.length=e;return d}else return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++){b=h.className;if(typeof b.split=="function"&&D(b.split(/\s+/),c))d[e++]=h}d.length=e;return d}else return a}
function Gc(a,b){bb(b,function(c,d){if(d=="style")a.style.cssText=c;else if(d=="class")a.className=c;else if(d=="for")a.htmlFor=c;else if(d in Hc)a.setAttribute(Hc[d],c);else a[d]=c})}var Hc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};
function Ic(a){var b=a.document;if(I&&!J("500")&&!ec){if(typeof a.innerHeight=="undefined")a=window;b=a.innerHeight;var c=a.document.documentElement.scrollHeight;if(a==a.top)if(c<b)b-=15;return new yc(a.innerWidth,b)}a=Fc(b);if(dc&&!J("9.50"))a=n;a=a?b.documentElement:b.body;return new yc(a.clientWidth,a.clientHeight)}function Jc(a){return a.parentWindow||a.defaultView}function Kc(){return Lc(document,arguments)}
function Lc(a,b){var c=b[0],d=b[1];if(!rc&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',xa(d.name),'"');if(d.type){c.push(' type="',xa(d.type),'"');var e={};ib(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)if(x(d))c.className=d;else ia(d)?uc.apply(l,[c].concat(d)):Gc(c,d);b.length>2&&Mc(a,c,b,2);return c}
function Mc(a,b,c,d){function e(h){if(h)b.appendChild(x(h)?a.createTextNode(h):h)}for(d=d;d<c.length;d++){var f=c[d];ja(f)&&!(ma(f)&&f.nodeType>0)?B(Nc(f)?Ta(f):f,e):e(f)}}function Fc(a){return a.compatMode=="CSS1Compat"}function Oc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Pc(a){return a&&a.parentNode?a.parentNode.removeChild(a):l}function Qc(a,b){for(;a&&a.nodeType!=1;)a=b?a.nextSibling:a.previousSibling;return a}
function Rc(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Bc(a){return a.nodeType==9?a:a.ownerDocument||a.document}
function Sc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==3){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{Oc(a);a.appendChild(Bc(a).createTextNode(b))}}var Tc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Uc={IMG:" ",BR:"\n"};function Vc(a){var b=a.getAttributeNode("tabindex");if(b&&b.specified){a=a.tabIndex;return ka(a)&&a>=0}return n}
function Wc(a){if(sc&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Xc(a,b,k);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");F||(a=a.replace(/ +/g," "));if(a!=" ")a=a.replace(/^\s*/,"");return a}function Xc(a,b,c){if(!(a.nodeName in Tc))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Uc)b.push(Uc[a.nodeName]);else for(a=a.firstChild;a;){Xc(a,b,c);a=a.nextSibling}}
function Nc(a){if(a&&typeof a.length=="number")if(ma(a))return typeof a.item=="function"||typeof a.item=="string";else if(la(a))return typeof a.item=="function";return n}function Ac(a){this.aa=a||da.document||document}u=Ac.prototype;u.T=zc;function Yc(a){return a.aa}u.f=function(a){return x(a)?this.aa.getElementById(a):a};u.i=function(){return Lc(this.aa,arguments)};u.createElement=function(a){return this.aa.createElement(a)};u.createTextNode=function(a){return this.aa.createTextNode(a)};
u.ri=function(a,b,c){var d=this.aa,e=!!c;c=["<tr>"];for(var f=0;f<b;f++)c.push(e?"<td>&nbsp;</td>":"<td></td>");c.push("</tr>");c=c.join("");b=["<table>"];for(f=0;f<a;f++)b.push(c);b.push("</table>");a=d.createElement("DIV");a.innerHTML=b.join("");return a.removeChild(a.firstChild)};function Zc(a){a=!I&&Fc(a.aa)?a.aa.documentElement:a.aa.body;return new L(a.scrollLeft,a.scrollTop)}u.appendChild=function(a,b){a.appendChild(b)};u.append=function(a){Mc(Bc(a),a,arguments,1)};u.contains=Rc;var $c,ad=!F||J("9"),bd=F&&!J("8");function cd(){}cd.prototype.Vg=n;cd.prototype.$=function(){if(!this.Vg){this.Vg=k;this.m()}};cd.prototype.m=aa();function dd(a,b){this.type=a;this.currentTarget=this.target=b}A(dd,cd);u=dd.prototype;u.m=function(){delete this.type;delete this.target;delete this.currentTarget};u.wd=n;u.We=k;u.stopPropagation=function(){this.wd=k};u.preventDefault=function(){this.We=n};function ed(a){a.preventDefault()};var fd=new Function("a","return a");function gd(a,b){a&&this.Je(a,b)}A(gd,dd);var hd=[1,4,2];u=gd.prototype;u.target=l;u.relatedTarget=l;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=n;u.altKey=n;u.shiftKey=n;u.metaKey=n;u.Gl=n;u.pc=l;
u.Je=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(G)try{fd(d.nodeName)}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=
a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Gl=Yb?a.metaKey:a.ctrlKey;this.state=a.state;this.pc=a;delete this.We;delete this.wd};function id(a,b){return ad?a.pc.button==b:a.type=="click"?b==0:!!(a.pc.button&hd[b])}
u.stopPropagation=function(){gd.h.stopPropagation.call(this);if(this.pc.stopPropagation)this.pc.stopPropagation();else this.pc.cancelBubble=k};u.preventDefault=function(){gd.h.preventDefault.call(this);var a=this.pc;if(a.preventDefault)a.preventDefault();else{a.returnValue=n;if(bd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}}};u.m=function(){gd.h.m.call(this);this.relatedTarget=this.currentTarget=this.target=this.pc=l};function jd(){}var kd=0;u=jd.prototype;u.key=0;u.ge=n;u.mi=n;u.Je=function(a,b,c,d,e,f){if(la(a))this.Pi=k;else if(a&&a.handleEvent&&la(a.handleEvent))this.Pi=n;else g(Error("Invalid listener argument"));this.ee=a;this.hj=b;this.src=c;this.type=d;this.capture=!!e;this.Jf=f;this.mi=n;this.key=++kd;this.ge=n};u.handleEvent=function(a){if(this.Pi)return this.ee.call(this.Jf||this.src,a);return this.ee.handleEvent.call(this.ee,a)};function ld(a,b){this.Yi=b;this.kd=[];if(a>this.Yi)g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.kd.push(this.Dc?this.Dc():{})}A(ld,cd);ld.prototype.Dc=l;ld.prototype.ui=l;function md(a){if(a.kd.length)return a.kd.pop();return a.Dc?a.Dc():{}}function nd(a,b){a.kd.length<a.Yi?a.kd.push(b):od(a,b)}function od(a,b){if(a.ui)a.ui(b);else if(ma(b))if(la(b.$))b.$();else for(var c in b)delete b[c]}
ld.prototype.m=function(){ld.h.m.call(this);for(var a=this.kd;a.length;)od(this,a.pop());delete this.kd};var pd;var qd=(pd="ScriptEngine"in da&&da.ScriptEngine()=="JScript")?da.ScriptEngineMajorVersion()+"."+da.ScriptEngineMinorVersion()+"."+da.ScriptEngineBuildVersion():"0";var rd,sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd;
(function(){function a(){return{ea:0,ic:0}}function b(){return[]}function c(){function q(t){return h.call(q.src,q.key,t)}return q}function d(){return new jd}function e(){return new gd}var f=pd&&!(Fa(qd,"5.7")>=0),h;wd=function(q){h=q};if(f){rd=function(){return md(i)};sd=function(q){nd(i,q)};td=function(){return md(j)};ud=function(q){nd(j,q)};vd=function(){return md(m)};xd=function(){nd(m,c())};yd=function(){return md(o)};zd=function(q){nd(o,q)};Ad=function(){return md(p)};Bd=function(q){nd(p,q)};
var i=new ld(0,600);i.Dc=a;var j=new ld(0,600);j.Dc=b;var m=new ld(0,600);m.Dc=c;var o=new ld(0,600);o.Dc=d;var p=new ld(0,600);p.Dc=e}else{rd=a;sd=fa;td=b;ud=fa;vd=c;xd=fa;yd=d;zd=fa;Ad=e;Bd=fa}})();var Cd={},Dd={},Ed={},Fd={};
function Gd(a,b,c,d,e){if(b)if(ia(b)){for(var f=0;f<b.length;f++)Gd(a,b[f],c,d,e);return l}else{d=!!d;var h=Dd;b in h||(h[b]=rd());h=h[b];if(!(d in h)){h[d]=rd();h.ea++}h=h[d];var i=oa(a),j;h.ic++;if(h[i]){j=h[i];for(f=0;f<j.length;f++){h=j[f];if(h.ee==c&&h.Jf==e){if(h.ge)break;return j[f].key}}}else{j=h[i]=td();h.ea++}f=vd();f.src=a;h=yd();h.Je(c,f,a,b,d,e);c=h.key;f.key=c;j.push(h);Cd[c]=h;Ed[i]||(Ed[i]=td());Ed[i].push(h);if(a.addEventListener){if(a==da||!a.Qg)a.addEventListener(b,f,d)}else a.attachEvent(Hd(b),
f);return c}else g(Error("Invalid event type"))}function Id(a,b,c,d,e){if(ia(b)){for(var f=0;f<b.length;f++)Id(a,b[f],c,d,e);return l}d=!!d;a=Jd(a,b,d);if(!a)return n;for(f=0;f<a.length;f++)if(a[f].ee==c&&a[f].capture==d&&a[f].Jf==e)return Kd(a[f].key);return n}
function Kd(a){if(!Cd[a])return n;var b=Cd[a];if(b.ge)return n;var c=b.src,d=b.type,e=b.hj,f=b.capture;if(c.removeEventListener){if(c==da||!c.Qg)c.removeEventListener(d,e,f)}else c.detachEvent&&c.detachEvent(Hd(d),e);c=oa(c);e=Dd[d][f][c];if(Ed[c]){var h=Ed[c];Qa(h,b);h.length==0&&delete Ed[c]}b.ge=k;e.bj=k;Ld(d,f,c,e);delete Cd[a];return k}
function Ld(a,b,c,d){if(!d.Zf)if(d.bj){for(var e=0,f=0;e<d.length;e++)if(d[e].ge){var h=d[e].hj;h.src=l;xd(h);zd(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.bj=n;if(f==0){ud(d);delete Dd[a][b][c];Dd[a][b].ea--;if(Dd[a][b].ea==0){sd(Dd[a][b]);delete Dd[a][b];Dd[a].ea--}if(Dd[a].ea==0){sd(Dd[a]);delete Dd[a]}}}}
function Md(a,b,c){var d=0,e=b==l,f=c==l;c=!!c;if(a==l)bb(Ed,function(j){for(var m=j.length-1;m>=0;m--){var o=j[m];if((e||b==o.type)&&(f||c==o.capture)){Kd(o.key);d++}}});else{a=oa(a);if(Ed[a]){a=Ed[a];for(var h=a.length-1;h>=0;h--){var i=a[h];if((e||b==i.type)&&(f||c==i.capture)){Kd(i.key);d++}}}}return d}function Jd(a,b,c){var d=Dd;if(b in d){d=d[b];if(c in d){d=d[c];a=oa(a);if(d[a])return d[a]}}return l}function Hd(a){if(a in Fd)return Fd[a];return Fd[a]="on"+a}
function Nd(a,b,c,d,e){var f=1;b=oa(b);if(a[b]){a.ic--;a=a[b];if(a.Zf)a.Zf++;else a.Zf=1;try{for(var h=a.length,i=0;i<h;i++){var j=a[i];if(j&&!j.ge)f&=Od(j,e)!==n}}finally{a.Zf--;Ld(c,d,b,a)}}return Boolean(f)}function Od(a,b){var c=a.handleEvent(b);a.mi&&Kd(a.key);return c}
wd(function(a,b){if(!Cd[a])return k;var c=Cd[a],d=c.type,e=Dd;if(!(d in e))return k;e=e[d];var f,h;if($c===undefined)$c=F&&!da.addEventListener;if($c){f=b||ea("window.event");var i=k in e,j=n in e;if(i){if(f.keyCode<0||f.returnValue!=undefined)return k;a:{var m=n;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(o){m=k}if(m||f.returnValue==undefined)f.returnValue=k}}m=Ad();m.Je(f,this);f=k;try{if(i){for(var p=td(),q=m.currentTarget;q;q=q.parentNode)p.push(q);h=e[k];h.ic=h.ea;for(var t=p.length-1;!m.wd&&
t>=0&&h.ic;t--){m.currentTarget=p[t];f&=Nd(h,p[t],d,k,m)}if(j){h=e[n];h.ic=h.ea;for(t=0;!m.wd&&t<p.length&&h.ic;t++){m.currentTarget=p[t];f&=Nd(h,p[t],d,n,m)}}}else f=Od(c,m)}finally{if(p){p.length=0;ud(p)}m.$();Bd(m)}return f}d=new gd(b,this);try{f=Od(c,d)}finally{d.$()}return f});var Pd=0;function Qd(a){this.Fb=a}A(Qd,cd);var Rd=new ld(0,100);u=Qd.prototype;u.u=function(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)this.u(a,b[f],c,d,e);else{a=Gd(a,b,c||this,d||n,e||this.Fb||this);if(this.ga)this.ga[a]=k;else if(this.$c){this.ga=md(Rd);this.ga[this.$c]=k;this.$c=l;this.ga[a]=k}else this.$c=a}return this};
u.mb=function(a,b,c,d,e){if(this.$c||this.ga)if(ia(b))for(var f=0;f<b.length;f++)this.mb(a,b[f],c,d,e);else{a:{c=c||this;e=e||this.Fb||this;d=!!d;if(a=Jd(a,b,d))for(b=0;b<a.length;b++)if(a[b].ee==c&&a[b].capture==d&&a[b].Jf==e){a=a[b];break a}a=l}if(a){a=a.key;Kd(a);if(this.ga)eb(this.ga,a);else if(this.$c==a)this.$c=l}}return this};u.Ve=function(){if(this.ga){for(var a in this.ga){Kd(a);delete this.ga[a]}nd(Rd,this.ga);this.ga=l}else this.$c&&Kd(this.$c)};u.m=function(){Qd.h.m.call(this);this.Ve()};
u.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Sd(){}A(Sd,cd);u=Sd.prototype;u.Qg=k;u.eg=l;u.Mh=ba("eg");u.addEventListener=function(a,b,c,d){Gd(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Id(this,a,b,c,d)};
u.dispatchEvent=function(a){a=a;if(x(a))a=new dd(a,this);else if(a instanceof dd)a.target=a.target||this;else{var b=a;a=new dd(a.type,this);ib(a,b)}b=1;var c,d=a.type,e=Dd;if(d in e){e=e[d];d=k in e;var f;if(d){c=[];for(f=this;f;f=f.eg)c.push(f);f=e[k];f.ic=f.ea;for(var h=c.length-1;!a.wd&&h>=0&&f.ic;h--){a.currentTarget=c[h];b&=Nd(f,c[h],a.type,k,a)&&a.We!=n}}if(n in e){f=e[n];f.ic=f.ea;if(d)for(h=0;!a.wd&&h<c.length&&f.ic;h++){a.currentTarget=c[h];b&=Nd(f,c[h],a.type,n,a)&&a.We!=n}else for(c=this;!a.wd&&
c&&f.ic;c=c.eg){a.currentTarget=c;b&=Nd(f,c,a.type,n,a)&&a.We!=n}}a=Boolean(b)}else a=k;return a};u.m=function(){Sd.h.m.call(this);Md(this);this.eg=l};function Td(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}function Ud(){for(var a=new Td(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),b=1;b<arguments.length;b++){var c=arguments[b];a.top=Math.min(a.top,c.y);a.right=Math.max(a.right,c.x);a.bottom=Math.max(a.bottom,c.y);a.left=Math.min(a.left,c.x)}return a}Td.prototype.ka=function(){return new Td(this.top,this.right,this.bottom,this.left)};
Td.prototype.contains=function(a){a=!this||!a?n:a instanceof Td?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom;return a};Td.prototype.expand=function(a,b,c,d){if(ma(a)){this.top-=a.top;this.right+=a.right;this.bottom+=a.bottom;this.left-=a.left}else{this.top-=a;this.right+=b;this.bottom+=c;this.left-=d}return this};function Vd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Vd.prototype.ka=function(){return new Vd(this.left,this.top,this.width,this.height)};function Wd(a){return new Vd(a.left,a.top,a.right-a.left,a.bottom-a.top)}Vd.prototype.Ki=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a){this.left=b;this.top=d;this.width=c-b;this.height=a-d;return k}}return n};
Vd.prototype.contains=function(a){return a instanceof Vd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};Vd.prototype.md=function(){return new yc(this.width,this.height)};function Xd(a,b){var c=Bc(a);if(c.defaultView&&c.defaultView.getComputedStyle)if(c=c.defaultView.getComputedStyle(a,l))return c[b]||c.getPropertyValue(b);return""}function Yd(a,b){return Xd(a,b)||(a.currentStyle?a.currentStyle[b]:l)||a.style[b]}function Zd(a){return Yd(a,"position")}function $d(a,b,c){var d,e=G&&(Yb||hc)&&J("1.9");if(b instanceof L){d=b.x;b=b.y}else{d=b;b=c}a.style.left=ae(d,e);a.style.top=ae(b,e)}
function be(a){var b=a.getBoundingClientRect();if(F){a=a.ownerDocument;b.left-=a.documentElement.clientLeft+a.body.clientLeft;b.top-=a.documentElement.clientTop+a.body.clientTop}return b}
function ce(a){if(F)return a.offsetParent;var b=Bc(a),c=Yd(a,"position"),d=c=="fixed"||c=="absolute";for(a=a.parentNode;a&&a!=b;a=a.parentNode){c=Yd(a,"position");d=d&&c=="static"&&a!=b.documentElement&&a!=b.body;if(!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||c=="fixed"||c=="absolute"))return a}return l}
function de(a){var b=new Td(0,Infinity,Infinity,0),c=zc(a),d=c.aa.body,e=!I&&Fc(c.aa)?c.aa.documentElement:c.aa.body,f;for(a=a;a=ce(a);)if((!F||a.clientWidth!=0)&&(!I||a.clientHeight!=0||a!=d)&&(a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)&&Yd(a,"overflow")!="visible"){var h=ee(a),i;i=a;if(G&&!J("1.9")){var j=parseFloat(Xd(i,"borderLeftWidth"));if(fe(i)){var m=i.offsetWidth-i.clientWidth-j-parseFloat(Xd(i,"borderRightWidth"));j+=m}i=new L(j,parseFloat(Xd(i,"borderTopWidth")))}else i=
new L(i.clientLeft,i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x);f=f||a!=e}d=e.scrollLeft;e=e.scrollTop;if(I){b.left+=d;b.top+=e}else{b.left=Math.max(b.left,d);b.top=Math.max(b.top,e)}if(!f||I){b.right+=d;b.bottom+=e}c=Ic(Jc(c.aa)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,e+c.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?
b:l}
function ee(a){var b,c=Bc(a),d=Yd(a,"position"),e=G&&c.getBoxObjectFor&&!a.getBoundingClientRect&&d=="absolute"&&(b=c.getBoxObjectFor(a))&&(b.screenX<0||b.screenY<0),f=new L(0,0),h;b=c?c.nodeType==9?c:Bc(c):document;if(h=F){h=zc(b);h=!Fc(h.aa)}h=h?b.body:b.documentElement;if(a==h)return f;if(a.getBoundingClientRect){b=be(a);a=Zc(zc(c));f.x=b.left+a.x;f.y=b.top+a.y}else if(c.getBoxObjectFor&&!e){b=c.getBoxObjectFor(a);a=c.getBoxObjectFor(h);f.x=b.screenX-a.screenX;f.y=b.screenY-a.screenY}else{e=a;
do{f.x+=e.offsetLeft;f.y+=e.offsetTop;if(e!=a){f.x+=e.clientLeft||0;f.y+=e.clientTop||0}if(I&&Zd(e)=="fixed"){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}e=e.offsetParent}while(e&&e!=a);if(dc||I&&d=="absolute")f.y-=c.body.offsetTop;for(e=a;(e=ce(e))&&e!=c.body&&e!=h;){f.x-=e.scrollLeft;if(!dc||e.tagName!="TR")f.y-=e.scrollTop}}return f}
function ge(a,b,c){if(b instanceof yc){c=b.height;b=b.width}else{if(c==undefined)g(Error("missing height argument"));c=c}a.style.width=ae(b,k);a.style.height=ae(c,k)}function ae(a,b){if(typeof a=="number")a=(b?Math.round(a):a)+"px";return a}
function he(a){var b=dc&&!J("10");if(Yd(a,"display")!="none")return b?new yc(a.offsetWidth||a.clientWidth,a.offsetHeight||a.clientHeight):new yc(a.offsetWidth,a.offsetHeight);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";if(b){b=a.offsetWidth||a.clientWidth;a=a.offsetHeight||a.clientHeight}else{b=a.offsetWidth;a=a.offsetHeight}c.display=d;c.position=f;c.visibility=e;return new yc(b,a)}
function ie(a){var b=ee(a);a=he(a);return new Vd(b.x,b.y,a.width,a.height)}var je={};function ke(a){return je[a]||(je[a]=String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()}))}function le(a,b){var c=a.style;if("opacity"in c)c.opacity=b;else if("MozOpacity"in c)c.MozOpacity=b;else if("filter"in c)c.filter=b===""?"":"alpha(opacity="+b*100+")"}function me(a,b){a.style.display=b?"":"none"}function ne(a,b){if(F)a.cssText=b;else a[I?"innerText":"innerHTML"]=b}
function fe(a){return"rtl"==Yd(a,"direction")}var oe=G?"MozUserSelect":I?"WebkitUserSelect":l;function pe(a,b,c){c=!c?a.getElementsByTagName("*"):l;if(oe){b=b?"none":"";a.style[oe]=b;if(c){a=0;for(var d;d=c[a];a++)d.style[oe]=b}}else if(F||dc){b=b?"on":"";a.setAttribute("unselectable",b);if(c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}};function qe(){}ga(qe);qe.prototype.wl=0;qe.qa();function re(a){this.Cb=a||zc();this.Ye=se}A(re,Sd);re.prototype.il=qe.qa();var se=l;function te(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}g(Error("Invalid component state"))}u=re.prototype;u.Hb=l;u.X=n;u.q=l;u.Ye=l;u.Ah=l;u.Da=l;u.pa=l;u.dc=l;u.$l=n;
function ue(a){return a.Hb||(a.Hb=":"+(a.il.wl++).toString(36))}function ve(a,b){if(a.Da&&a.Da.dc){eb(a.Da.dc,a.Hb);fb(a.Da.dc,b,a)}a.Hb=b}u.f=r("q");u.eb=function(){return this.Xd||(this.Xd=new Qd(this))};function we(a,b){if(a==b)g(Error("Unable to set parent component"));if(b&&a.Da&&a.Hb&&xe(a.Da,a.Hb)&&a.Da!=b)g(Error("Unable to set parent component"));a.Da=b;re.h.Mh.call(a,b)}u.Mh=function(a){if(this.Da&&this.Da!=a)g(Error("Method not supported"));re.h.Mh.call(this,a)};u.T=r("Cb");
u.i=function(){this.q=this.Cb.createElement("div")};u.R=function(a){ye(this,a)};function ye(a,b,c){if(a.X)g(Error("Component already rendered"));a.q||a.i();b?b.insertBefore(a.q,c||l):a.Cb.aa.body.appendChild(a.q);if(!a.Da||a.Da.X)a.ta()}u.ta=function(){this.X=k;ze(this,function(a){!a.X&&a.f()&&a.ta()})};u.xb=function(){ze(this,function(a){a.X&&a.xb()});this.Xd&&this.Xd.Ve();this.X=n};
u.m=function(){re.h.m.call(this);this.X&&this.xb();if(this.Xd){this.Xd.$();delete this.Xd}ze(this,function(a){a.$()});!this.$l&&this.q&&Pc(this.q);this.Da=this.Ah=this.q=this.dc=this.pa=l};u.wa=function(a,b){this.oe(a,Ae(this),b)};
u.oe=function(a,b,c){if(a.X&&(c||!this.X))g(Error("Component already rendered"));if(b<0||b>Ae(this))g(Error("Child component index out of bounds"));if(!this.dc||!this.pa){this.dc={};this.pa=[]}if(a.Da==this){this.dc[ue(a)]=a;Qa(this.pa,a)}else fb(this.dc,ue(a),a);we(a,this);Va(this.pa,b,0,a);if(a.X&&this.X&&a.Da==this){c=this.za();c.insertBefore(a.f(),c.childNodes[b]||l)}else if(c){this.q||this.i();b=Be(this,b+1);ye(a,this.za(),b?b.q:l)}else this.X&&!a.X&&a.q&&a.ta()};u.za=r("q");
function Ce(a){if(a.Ye==l)a.Ye=fe(a.X?a.q:a.Cb.aa.body);return a.Ye}u.dd=function(a){if(this.X)g(Error("Component already rendered"));this.Ye=a};function Ae(a){return a.pa?a.pa.length:0}function xe(a,b){var c;if(a.dc&&b){c=a.dc;c=b in c?c[b]:void 0;c=c||l}else c=l;return c}function Be(a,b){return a.pa?a.pa[b]||l:l}function ze(a,b,c){a.pa&&B(a.pa,b,c)}function De(a,b){return a.pa&&b?Ka(a.pa,b):-1}
u.removeChild=function(a,b){if(a){var c=x(a)?a:ue(a);a=xe(this,c);if(c&&a){eb(this.dc,c);Qa(this.pa,a);if(b){a.xb();a.q&&Pc(a.q)}we(a,l)}}if(!a)g(Error("Child is not in parent component"));return a};function Ee(a,b,c,d,e){if(!F&&!(I&&J("525")))return k;if(Yb&&e)return Fe(a);if(e&&!d)return n;if(!c&&(b==17||b==18))return n;if(F&&d&&b==a)return n;switch(a){case 13:return k;case 27:return!I}return Fe(a)}
function Fe(a){if(a>=48&&a<=57)return k;if(a>=96&&a<=106)return k;if(a>=65&&a<=90)return k;if(I&&a==0)return k;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return k;default:return n}};function Ge(a,b){a&&He(this,a,b)}A(Ge,Sd);u=Ge.prototype;u.q=l;u.Wf=l;u.wh=l;u.Xf=l;u.ad=-1;u.Zc=-1;
var Ie={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Je={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ke={61:187,
59:186},Le=F||I&&J("525");u=Ge.prototype;u.od=function(a){if(I&&(this.ad==17&&!a.ctrlKey||this.ad==18&&!a.altKey))this.Zc=this.ad=-1;if(Le&&!Ee(a.keyCode,this.ad,a.shiftKey,a.ctrlKey,a.altKey))this.handleEvent(a);else this.Zc=G&&a.keyCode in Ke?Ke[a.keyCode]:a.keyCode};u.al=function(){this.Zc=this.ad=-1};
u.handleEvent=function(a){var b=a.pc,c,d;if(F&&a.type=="keypress"){c=this.Zc;d=c!=13&&c!=27?b.keyCode:0}else if(I&&a.type=="keypress"){c=this.Zc;d=b.charCode>=0&&b.charCode<63232&&Fe(c)?b.charCode:0}else if(dc){c=this.Zc;d=Fe(c)?b.keyCode:0}else{c=b.keyCode||this.Zc;d=b.charCode||0;if(Yb&&d==63&&!c)c=191}var e=c,f=b.keyIdentifier;if(c)if(c>=63232&&c in Ie)e=Ie[c];else{if(c==25&&a.shiftKey)e=9}else if(f&&f in Je)e=Je[f];a=e==this.ad;this.ad=e;b=new Me(e,d,a,b);try{this.dispatchEvent(b)}finally{b.$()}};
u.f=r("q");function He(a,b,c){a.Xf&&a.detach();a.q=b;a.Wf=Gd(a.q,"keypress",a,c);a.wh=Gd(a.q,"keydown",a.od,c,a);a.Xf=Gd(a.q,"keyup",a.al,c,a)}u.detach=function(){if(this.Wf){Kd(this.Wf);Kd(this.wh);Kd(this.Xf);this.Xf=this.wh=this.Wf=l}this.q=l;this.Zc=this.ad=-1};u.m=function(){Ge.h.m.call(this);this.detach()};function Me(a,b,c,d){d&&this.Je(d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}A(Me,gd);function Ne(a,b){a.setAttribute("role",b);a.tn=b}function Oe(a,b,c){a.setAttribute("aria-"+b,c)};function Pe(){}var Qe;ga(Pe);u=Pe.prototype;u.hc=aa();u.i=function(a){return a.T().i("div",this.Fc(a).join(" "),a.Qa)};u.za=function(a){return a};u.xe=function(a,b,c){if(a=a.f?a.f():a)if(F&&!J("7")){var d=Re(this,tc(a),b);d.push(b);ua(c?uc:vc,a).apply(l,d)}else c?uc(a,b):vc(a,b)};u.tc=function(a){Ce(a)&&this.dd(a.f(),k);a.ma()&&this.vc(a,a.ab())};u.hg=function(a,b){pe(a,!b,!F&&!dc)};u.dd=function(a,b){this.xe(a,this.t()+"-rtl",b)};u.Yc=function(a){var b;if(a.fb&32&&(b=a.Sa()))return Vc(b);return n};
u.vc=function(a,b){var c;if(a.fb&32&&(c=a.Sa())){if(!b&&a.Ma&32){try{c.blur()}catch(d){}a.Ma&32&&a.Xc(l)}if(Vc(c)!=b){c=c;if(b)c.tabIndex=0;else c.removeAttribute("tabIndex")}}};u.Ea=function(a,b){me(a,b)};u.Lb=function(a,b,c){var d=a.f();if(d){var e=this.zf(b);e&&this.xe(a,e,c);this.gf(d,b,c)}};u.gf=function(a,b,c){Qe||(Qe=jb(1,"disabled",4,"pressed",8,"selected",16,"checked",64,"expanded"));(b=Qe[b])&&Oe(a,b,c)};
u.jc=function(a,b){var c=this.za(a);if(c){Oc(c);if(b)if(x(b))Sc(c,b);else{var d=function(e){if(e){var f=Bc(c);c.appendChild(x(e)?f.createTextNode(e):e)}};if(ia(b))B(b,d);else ja(b)&&!("nodeType"in b)?B(Ta(b),d):d(b)}}};u.Sa=function(a){return a.f()};u.t=s("goog-control");u.Fc=function(a){var b=this.t(),c=[b],d=this.t();d!=b&&c.push(d);b=a.Ma;for(d=[];b;){var e=b&-b;d.push(this.zf(e));b&=~e}c.push.apply(c,d);(a=a.qc)&&c.push.apply(c,a);F&&!J("7")&&c.push.apply(c,Re(this,c));return c};
function Re(a,b,c){var d=[];if(c)b=b.concat([c]);B([],function(e){if(Oa(e,ua(D,b))&&(!c||D(e,c)))d.push(e.join("_"))});return d}u.zf=function(a){if(!this.pi){var b=this.t();this.pi=jb(1,b+"-disabled",2,b+"-hover",4,b+"-active",8,b+"-selected",16,b+"-checked",32,b+"-focused",64,b+"-open")}return this.pi[a]};function Se(a,b){if(!a)g(Error("Invalid class name "+a));if(!la(b))g(Error("Invalid decorator function "+b))}var Te={};function Ue(a,b,c){re.call(this,c);if(!(b=b)){b=this.constructor;for(var d;b;){d=oa(b);if(d=Te[d])break;b=b.h?b.h.constructor:l}b=d?la(d.qa)?d.qa():new d:l}this.L=b;this.jg(a)}A(Ue,re);u=Ue.prototype;u.Qa=l;u.Ma=0;u.fb=39;u.ji=255;u.Uh=0;u.nb=k;u.qc=l;u.lh=k;u.Eg=n;function Ve(a,b){a.X&&b!=a.lh&&We(a,b);a.lh=b}u.Sa=function(){return this.L.Sa(this)};u.Df=function(){return this.Zb||(this.Zb=new Ge)};u.Bg=function(a){if(a){if(this.qc)D(this.qc,a)||this.qc.push(a);else this.qc=[a];this.L.xe(this,a,k)}};
u.xe=function(a,b){if(b)this.Bg(a);else if(a&&this.qc){Qa(this.qc,a);if(this.qc.length==0)this.qc=l;this.L.xe(this,a,n)}};u.i=function(){var a=this.L.i(this);this.q=a;var b=this.L.hc();b&&Ne(a,b);this.Eg||this.L.hg(a,n);this.ab()||this.L.Ea(a,n)};u.za=function(){return this.L.za(this.f())};u.ta=function(){Ue.h.ta.call(this);this.L.tc(this);if(this.fb&-2){this.lh&&We(this,k);if(this.fb&32){var a=this.Sa();if(a){var b=this.Df();He(b,a);this.eb().u(b,"key",this.rc).u(a,"focus",this.Ff).u(a,"blur",this.Xc)}}}};
function We(a,b){var c=a.eb(),d=a.f();if(b){c.u(d,"mouseover",a.$d).u(d,"mousedown",a.ib).u(d,"mouseup",a.pd).u(d,"mouseout",a.Zd);F&&c.u(d,"dblclick",a.Ci)}else{c.mb(d,"mouseover",a.$d).mb(d,"mousedown",a.ib).mb(d,"mouseup",a.pd).mb(d,"mouseout",a.Zd);F&&c.mb(d,"dblclick",a.Ci)}}u.xb=function(){Ue.h.xb.call(this);this.Zb&&this.Zb.detach();this.ab()&&this.ma()&&this.L.vc(this,n)};u.m=function(){Ue.h.m.call(this);if(this.Zb){this.Zb.$();delete this.Zb}delete this.L;this.qc=this.Qa=l};
u.jc=function(a){this.L.jc(this.f(),a);this.jg(a)};u.jg=ba("Qa");function Xe(a,b){var c=a.Qa;if(!c||x(c))return c;return(c=ia(c)?C(c,b).join(""):Wc(c))&&wa(c)}u.ye=function(){return Xe(this,Wc)};u.dd=function(a){Ue.h.dd.call(this,a);var b=this.f();b&&this.L.dd(b,a)};u.hg=function(a){this.Eg=a;var b=this.f();b&&this.L.hg(b,a)};u.ab=r("nb");u.Ea=function(a,b){if(b||this.nb!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.f();c&&this.L.Ea(c,a);this.ma()&&this.L.vc(this,a);this.nb=a;return k}return n};
u.ma=function(){return!(this.Ma&1)};u.uc=function(a){var b=this.Da;if(!(b&&typeof b.ma=="function"&&!b.ma())&&Ye(this,1,!a)){if(!a){this.setActive(n);this.wc(n)}this.ab()&&this.L.vc(this,a);this.Lb(1,!a)}};u.wc=function(a){Ye(this,2,a)&&this.Lb(2,a)};u.ra=function(){return!!(this.Ma&4)};u.setActive=function(a){Ye(this,4,a)&&this.Lb(4,a)};u.Ph=function(a){Ye(this,8,a)&&this.Lb(8,a)};u.Sf=function(){return!!(this.Ma&16)};function Ze(a,b){Ye(a,16,b)&&a.Lb(16,b)}
u.va=function(a){Ye(this,64,a)&&this.Lb(64,a)};u.Lb=function(a,b){if(this.fb&a&&b!=!!(this.Ma&a)){this.L.Lb(this,a,b);this.Ma=b?this.Ma|a:this.Ma&~a}};function $e(a,b,c){if(a.X&&a.Ma&b&&!c)g(Error("Component already rendered"));!c&&a.Ma&b&&a.Lb(b,n);a.fb=c?a.fb|b:a.fb&~b}function af(a,b){return!!(a.ji&b)&&!!(a.fb&b)}function Ye(a,b,c){return!!(a.fb&b)&&!!(a.Ma&b)!=c&&(!(a.Uh&b)||a.dispatchEvent(te(b,c)))&&!a.Vg}
u.$d=function(a){!bf(a,this.f())&&this.dispatchEvent("enter")&&this.ma()&&af(this,2)&&this.wc(k)};u.Zd=function(a){if(!bf(a,this.f())&&this.dispatchEvent("leave")){af(this,4)&&this.setActive(n);af(this,2)&&this.wc(n)}};function bf(a,b){return!!a.relatedTarget&&Rc(b,a.relatedTarget)}u.ib=function(a){if(this.ma()){af(this,2)&&this.wc(k);if(id(a,0)){af(this,4)&&this.setActive(k);this.L.Yc(this)&&this.Sa().focus()}}!this.Eg&&id(a,0)&&a.preventDefault()};
u.pd=function(a){if(this.ma()){af(this,2)&&this.wc(k);this.ra()&&this.Kc(a)&&af(this,4)&&this.setActive(n)}};u.Ci=function(a){this.ma()&&this.Kc(a)};u.Kc=function(a){af(this,16)&&Ze(this,!this.Sf());af(this,8)&&this.Ph(k);af(this,64)&&this.va(!(this.Ma&64));var b=new dd("action",this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,e=0;d=c[e];e++)b[d]=a[d];return this.dispatchEvent(b)};u.Ff=function(){af(this,32)&&Ye(this,32,k)&&this.Lb(32,k)};
u.Xc=function(){af(this,4)&&this.setActive(n);af(this,32)&&Ye(this,32,n)&&this.Lb(32,n)};u.rc=function(a){if(this.ab()&&this.ma()&&this.Yd(a)){a.preventDefault();a.stopPropagation();return k}return n};u.Yd=function(a){return a.keyCode==13&&this.Kc(a)};if(!la(Ue))g(Error("Invalid component class "+Ue));if(!la(Pe))g(Error("Invalid renderer class "+Pe));var cf=oa(Ue);Te[cf]=Pe;Se("goog-control",function(){return new Ue(l)});function df(){this.qi=[]}A(df,Pe);ga(df);function ef(a,b){var c=a.qi[b];if(!c){switch(b){case 0:c=a.t()+"-highlight";break;case 1:c=a.t()+"-checkbox";break;case 2:c=a.t()+"-content"}a.qi[b]=c}return c}u=df.prototype;u.hc=s("menuitem");u.i=function(a){var b=a.T().i("div",this.Fc(a).join(" "),ff(this,a.Qa,a.T()));gf(this,a,b,!!(a.fb&8)||!!(a.fb&16));return b};u.za=function(a){return a&&a.firstChild};
u.jc=function(a,b){var c=this.za(a),d=hf(this,a)?c.firstChild:l;df.h.jc.call(this,a,b);if(d&&!hf(this,a))c.insertBefore(d,c.firstChild||l)};function ff(a,b,c){a=ef(a,2);return c.i("div",a,b)}u.Oh=function(a,b,c){if(b){Ne(b,c?"menuitemradio":this.hc());gf(this,a,b,c)}};function hf(a,b){var c=a.za(b);if(c){c=c.firstChild;var d=ef(a,1);return!!c&&!!c.className&&c.className.indexOf(d)!=-1}return n}
function gf(a,b,c,d){if(d!=hf(a,c)){d?uc(c,"goog-option"):vc(c,"goog-option");c=a.za(c);if(d){a=ef(a,1);c.insertBefore(b.T().i("div",a),c.firstChild||l)}else c.removeChild(c.firstChild)}}u.zf=function(a){switch(a){case 2:return ef(this,0);case 16:case 8:return"goog-option-selected";default:return df.h.zf.call(this,a)}};u.t=s("goog-menuitem");function jf(a,b,c,d){Ue.call(this,a,d||df.qa(),c);this.Ia(b)}A(jf,Ue);jf.prototype.Ua=function(){var a=this.Ah;return a!=l?a:this.ye()};jf.prototype.Ia=ba("Ah");jf.prototype.Oh=function(a){$e(this,8,a);this.Sf()&&!a&&Ze(this,n);var b=this.f();b&&this.L.Oh(this,b,a)};jf.prototype.ye=function(){return Xe(this,function(a){return D(tc(a),"goog-menuitem-accel")?"":Wc(a)})};Se("goog-menuitem",function(){return new jf(l)});function kf(a,b){this.Qf=a||1;this.ef=b||lf;this.Gg=ta(this.Wl,this);this.yh=va()}A(kf,Sd);kf.prototype.enabled=n;var lf=da.window;u=kf.prototype;u.ac=l;u.Wl=function(){if(this.enabled){var a=va()-this.yh;if(a>0&&a<this.Qf*0.8)this.ac=this.ef.setTimeout(this.Gg,this.Qf-a);else{this.dispatchEvent(mf);if(this.enabled){this.ac=this.ef.setTimeout(this.Gg,this.Qf);this.yh=va()}}}};u.start=function(){this.enabled=k;if(!this.ac){this.ac=this.ef.setTimeout(this.Gg,this.Qf);this.yh=va()}};
u.stop=function(){this.enabled=n;if(this.ac){this.ef.clearTimeout(this.ac);this.ac=l}};u.m=function(){kf.h.m.call(this);this.stop();delete this.ef};var mf="tick";function nf(a,b,c){if(la(a)){if(c)a=ta(a,c)}else if(a&&typeof a.handleEvent=="function")a=ta(a.handleEvent,a);else g(Error("Invalid listener argument"));return b>2147483647?-1:lf.setTimeout(a,b||0)};function of(a){this.q=a;a=F?"focusout":"blur";this.nl=Gd(this.q,F?"focusin":"focus",this,!F);this.ol=Gd(this.q,a,this,!F)}A(of,Sd);of.prototype.handleEvent=function(a){var b=new gd(a.pc);b.type=a.type=="focusin"||a.type=="focus"?"focusin":"focusout";try{this.dispatchEvent(b)}finally{b.$()}};of.prototype.m=function(){of.h.m.call(this);Kd(this.nl);Kd(this.ol);delete this.q};function pf(a,b,c){this.target=a;this.handle=b||a;this.zh=c||new Vd(NaN,NaN,NaN,NaN);this.aa=Bc(a);this.oc=new Qd(this);Gd(this.handle,"mousedown",this.yc,n,this)}A(pf,Sd);var qf=F||G&&J("1.9.3");u=pf.prototype;u.screenX=0;u.screenY=0;u.yj=0;u.zj=0;u.vb=0;u.wb=0;u.Fa=k;u.Qc=n;u.Ii=0;u.tl=0;u.jl=n;u.eb=r("oc");u.uc=ba("Fa");u.m=function(){pf.h.m.call(this);Id(this.handle,"mousedown",this.yc,n,this);this.oc.$();delete this.target;delete this.handle;delete this.oc};
u.yc=function(a){if(this.Fa&&!this.Qc&&(a.type!="mousedown"||id(a,0))){if(this.Ii==0){rf(this,a);if(this.Qc)a.preventDefault();else return}else a.preventDefault();var b=this.aa,c=b.documentElement,d=!qf;this.oc.u(b,"mousemove",this.ul,d);this.oc.u(b,"mouseup",this.wf,d);if(qf){c.setCapture(n);this.oc.u(c,"losecapture",this.wf)}else this.oc.u(b?Jc(b):window,"blur",this.wf);F&&this.jl&&this.oc.u(b,"dragstart",ed);this.Ml&&this.oc.u(this.Ml,"scroll",this.zl,d);this.screenX=this.yj=a.screenX;this.screenY=
this.zj=a.screenY;this.vb=this.target.offsetLeft;this.wb=this.target.offsetTop;this.Qe=Zc(zc(this.aa));this.tl=va()}};function rf(a,b){if(a.dispatchEvent(new sf("start",a,b.clientX,b.clientY,b))!==n)a.Qc=k}u.wf=function(a,b){this.oc.Ve();qf&&this.aa.releaseCapture();if(this.Qc){this.Qc=n;this.dispatchEvent(new sf("end",this,a.clientX,a.clientY,a,tf(this,this.vb),uf(this,this.wb),b))}};
u.ul=function(a){if(this.Fa){var b=a.screenX-this.screenX,c=a.screenY-this.screenY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Qc){var d=this.yj-this.screenX,e=this.zj-this.screenY;if(d*d+e*e>this.Ii){rf(this,a);if(!this.Qc){this.wf(a);return}}}c=vf(this,b,c);b=c.x;c=c.y;if(this.Qc)if(this.dispatchEvent(new sf("beforedrag",this,a.clientX,a.clientY,a,b,c))!==n){wf(this,a,b,c,n);a.preventDefault()}}};
function vf(a,b,c){var d=Zc(zc(a.aa));b+=d.x-a.Qe.x;c+=d.y-a.Qe.y;a.Qe=d;a.vb+=b;a.wb+=c;return new L(tf(a,a.vb),uf(a,a.wb))}u.zl=function(a){var b=vf(this,0,0);a.clientX=this.Qe.x-this.screenX;a.clientY=this.Qe.x-this.screenY;wf(this,a,b.x,b.y,k)};function wf(a,b,c,d){a.target.style.left=c+"px";a.target.style.top=d+"px";a.dispatchEvent(new sf("drag",a,b.clientX,b.clientY,b,c,d))}
function tf(a,b){var c=a.zh,d=!isNaN(c.left)?c.left:l;c=!isNaN(c.width)?c.width:0;return Math.min(d!=l?d+c:Infinity,Math.max(d!=l?d:-Infinity,b))}function uf(a,b){var c=a.zh,d=!isNaN(c.top)?c.top:l;c=!isNaN(c.height)?c.height:0;return Math.min(d!=l?d+c:Infinity,Math.max(d!=l?d:-Infinity,b))}function sf(a,b,c,d,e,f,h,i){dd.call(this,a);this.clientX=c;this.clientY=d;this.xm=e;this.left=f!==undefined?f:b.vb;this.top=h!==undefined?h:b.wb;this.Im=b;this.Hm=!!i}A(sf,dd);function xf(a,b,c){re.call(this,c);this.Wb=a||"modal-dialog";this.Yh=!!b;this.Vb=yf()}A(xf,re);u=xf.prototype;u.yf=l;u.Ak=k;u.Hi=k;u.Yh=n;u.$f=k;u.xi=k;u.uk=0.5;u.Gj="";u.Qa="";u.Vb=l;u.Rd=l;u.nb=n;u.zk=n;u.Oa=l;u.Ja=l;u.og=l;u.ff=l;u.Fj=l;u.ng=l;u.qe=l;u.lc=l;u.jc=function(a){this.Qa=a;if(this.qe)this.qe.innerHTML=a};u.za=function(){this.f()||this.R();return this.qe};
u.i=function(){if(this.Yh&&this.$f&&!this.Ja){this.Ja=this.T().i("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});this.Ja.className=this.Wb+"-bg";me(this.Ja,n);le(this.Ja,0)}else if((!this.Yh||!this.$f)&&this.Ja){Pc(this.Ja);this.Ja=l}if(this.$f&&!this.Oa){this.Oa=this.T().i("div",this.Wb+"-bg");le(this.Oa,this.uk);me(this.Oa,n)}else if(!this.$f&&this.Oa){Pc(this.Oa);this.Oa=l}var a=this.T();this.q=a.i("div",{className:this.Wb,tabIndex:0},this.og=a.i("div",{className:this.Wb+
"-title",id:ue(this)},this.ff=a.i("span",this.Wb+"-title-text",this.Gj),this.ng=a.i("span",this.Wb+"-title-close")),this.qe=a.i("div",this.Wb+"-content"),this.lc=a.i("div",this.Wb+"-buttons"),this.Aj=a.i("span",{tabIndex:0}));this.Fj=this.og.id;Ne(this.f(),"dialog");Oe(this.f(),"labelledby",this.Fj||"");if(this.Qa)this.qe.innerHTML=this.Qa;me(this.ng,this.Hi);me(this.f(),n);if(this.Vb){a=this.Vb;a.q=this.lc;a.R()}};
u.R=function(a){if(this.X)g(Error("Component already rendered"));this.f()||this.i();a=a||Yc(this.T()).body;this.Ja&&a.appendChild(this.Ja);this.Oa&&a.appendChild(this.Oa);xf.h.R.call(this,a)};u.ta=function(){xf.h.ta.call(this);this.yf=new of(Yc(this.T()));if(this.xi&&!this.Rd){var a=new pf(this.f(),this.og);uc(this.og,this.Wb+"-title-draggable");this.Rd=a}this.eb().u(this.ng,"click",this.Dl).u(this.yf,"focusin",this.xl);Ne(this.f(),"dialog");this.ff.id!==""&&Oe(this.f(),"labelledby",this.ff.id)};
u.xb=function(){this.ab()&&this.Ea(n);this.yf.$();this.yf=l;if(this.Rd){this.Rd.$();this.Rd=l}xf.h.xb.call(this)};
u.Ea=function(a){if(a!=this.nb){var b=Yc(this.T()),c=(b?Jc(b):window)||window;this.X||this.R(b.body);if(a){zf(this);this.xd();this.eb().u(this.f(),"keydown",this.cg).u(this.f(),"keypress",this.cg).u(c,"resize",this.gj)}else this.eb().mb(this.f(),"keydown",this.cg).mb(this.f(),"keypress",this.cg).mb(c,"resize",this.gj);this.Ja&&me(this.Ja,a);this.Oa&&me(this.Oa,a);me(this.f(),a);a&&this.focus();if(this.nb=a)this.eb().u(this.lc,"click",this.dj);else{this.eb().mb(this.lc,"click",this.dj);this.dispatchEvent(Af);
this.zk&&this.$()}}};u.ab=r("nb");u.focus=function(){try{this.f().focus()}catch(a){}if(this.Vb){var b=this.Vb.ve;if(b)for(var c=Yc(this.T()),d=this.lc.getElementsByTagName("button"),e=0,f;f=d[e];e++)if(f.name==b){try{if(I||dc){var h=c.createElement("input");h.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.f().appendChild(h);h.focus();this.f().removeChild(h)}f.focus()}catch(i){}break}}};
function zf(a){a.Ja&&me(a.Ja,n);a.Oa&&me(a.Oa,n);var b=Yc(a.T()),c=Ic((b?Jc(b):window)||window||window),d=Math.max(b.body.scrollWidth,c.width);b=Math.max(b.body.scrollHeight,c.height);if(a.Ja){me(a.Ja,k);ge(a.Ja,d,b)}if(a.Oa){me(a.Oa,k);ge(a.Oa,d,b)}if(a.xi){c=he(a.f());a.Rd.zh=new Vd(0,0,d-c.width,b-c.height)}}
u.xd=function(){var a=Yc(this.T()),b=(a?Jc(a):window)||window;if(Zd(this.f())=="fixed")var c=a=0;else{c=Zc(this.T());a=c.x;c=c.y}var d=he(this.f());b=Ic(b||window);a=Math.max(a+b.width/2-d.width/2,0);c=Math.max(c+b.height/2-d.height/2,0);$d(this.f(),a,c)};u.Dl=function(){if(this.Hi){var a=this.Vb,b=a&&a.Kg;if(b){a=a.l(b);this.dispatchEvent(new Bf(b,a))&&this.Ea(n)}else this.Ea(n)}};
u.m=function(){xf.h.m.call(this);if(this.Oa){Pc(this.Oa);this.Oa=l}if(this.Ja){Pc(this.Ja);this.Ja=l}this.Aj=this.lc=this.ng=l};u.dj=function(a){a:{for(a=a.target;a!=l&&a!=this.lc;){if(a.tagName=="BUTTON"){a=a;break a}a=a.parentNode}a=l}if(a&&!a.disabled){a=a.name;var b=this.Vb.l(a);this.dispatchEvent(new Bf(a,b))&&this.Ea(n)}};
u.cg=function(a){var b=n,c=n,d=this.Vb,e=a.target;if(a.type=="keydown")if(this.Ak&&a.keyCode==27){var f=d&&d.Kg;e=e.tagName=="SELECT"&&!e.disabled;if(f&&!e){c=k;b=d.l(f);b=this.dispatchEvent(new Bf(f,b))}else e||(b=k)}else{if(a.keyCode==9&&a.shiftKey&&e==this.f())c=k}else if(a.keyCode==13){if(e.tagName=="BUTTON")f=e.name;else if(d){var h=d.ve,i;if(i=h)a:{i=d.q.getElementsByTagName("BUTTON");for(var j=0,m;m=i[j];j++)if(m.name==h||m.id==h){i=m;break a}i=l}i=i;e=(e.tagName=="TEXTAREA"||e.tagName=="SELECT")&&
!e.disabled;if(i&&!i.disabled&&!e)f=h}if(f){c=k;b=this.dispatchEvent(new Bf(f,String(d.l(f))))}}if(b||c){a.stopPropagation();a.preventDefault()}b&&this.Ea(n)};u.gj=function(){zf(this)};u.xl=function(a){this.Aj==a.target&&nf(this.Ck,0,this)};u.Ck=function(){F&&Yc(this.T()).body.focus();this.f().focus()};function Bf(a,b){this.type=Cf;this.key=a;this.caption=b}A(Bf,dd);var Cf="dialogselect",Af="afterhide";function Df(a){this.Cb=a||zc();nb.call(this)}A(Df,nb);u=Df.prototype;u.Wb="goog-buttonset";
u.ve=l;u.q=l;u.Kg=l;u.zb=function(a,b,c,d){nb.prototype.zb.call(this,a,b);if(c)this.ve=a;if(d)this.Kg=a;return this};function Ef(a,b,c,d){return a.zb(b.key,b.caption,c,d)}u.R=function(){if(this.q){this.q.innerHTML="";var a=zc(this.q);mb(this,function(b,c){var d=a.i("button",{name:c},b);if(c==this.ve)d.className=this.Wb+"-default";this.q.appendChild(d)},this)}};
var Ff=z("OK"),Gf=z("Cancel"),Hf=z("Yes"),If=z("No"),Jf=z("Save"),Kf=z("Continue"),Lf={key:"ok",caption:Ff},Mf={key:"cancel",caption:Gf},Nf={key:"yes",caption:Hf},Of={key:"no",caption:If},Pf={key:"save",caption:Jf},Qf={key:"continue",caption:Kf};function yf(){return Ef(Ef(new Df,Lf,k),Mf,n,k)}Ef(new Df,Lf,k,k);yf();Ef(Ef(new Df,Nf,k),Of,n,k);Ef(Ef(Ef(new Df,Nf),Of,k),Mf,n,k);Ef(Ef(Ef(new Df,Qf),Pf),Mf,k,k);function Rf(a,b,c,d,e,f,h){xf.call(this,e,f,h);this.Gj=a;this.ff&&Sc(this.ff,a);this.jc(b+"<br><br>");this.Jg=c;this.sf=d!==undefined?d:"";Gd(this,Cf,this.ej);a=z("OK");b=z("Cancel");h=new Df(h);h.zb("ok",a,k);h.zb("cancel",b,n,k);this.Vb=h;if(this.lc)if(this.Vb){h=this.Vb;h.q=this.lc;h.R()}else this.lc.innerHTML=""}A(Rf,xf);u=Rf.prototype;u.Jg=fa;u.sf="";u.Ob=l;u.qh=n;u.Gh=1;u.qf=0;
u.i=function(){Rf.h.i.call(this);var a={className:this.Wb+"-userInput",value:this.sf};if(this.Gh==1){this.Ob=this.T().i("input",a);this.Ob.type="text";if(this.qf)this.Ob.size=this.qf}else{this.Ob=this.T().i("textarea",a);this.Ob.rows=this.Gh;if(this.qf)this.Ob.cols=this.qf}this.za().appendChild(this.T().i("div",{style:"overflow: auto"},this.Ob));if(this.Gh>1)this.Vb.ve=l};u.Ea=function(a){xf.prototype.Ea.call(this,a);if(a){this.qh=n;this.Ob.value=this.sf;this.focus()}};
u.focus=function(){dc&&this.Ob.focus();this.Ob.select()};u.Pl=ba("sf");u.ej=function(a){if(!this.qh){this.qh=k;a.key=="ok"?nf(ta(this.Jg,this,this.Ob.value),1):nf(ta(this.Jg,this,l),1)}};u.m=function(){Pc(this.Ob);Id(this,Cf,this.ej,k,this);Rf.h.m.call(this);this.Ob=this.Gm=l};function Sf(a,b,c,d,e,f,h,i){var j,m=c.offsetParent;if(m){var o=m.tagName=="HTML"||m.tagName=="BODY";if(!o||Zd(m)!="static"){j=ee(m);o||(j=xc(j,new L(m.scrollLeft,m.scrollTop)))}}m=ie(a);(o=de(a))&&m.Ki(Wd(o));o=zc(a);var p=zc(c);if(o.aa!=p.aa){var q=o.aa.body;p=Jc(p.aa);var t=new L(0,0),v=Bc(q)?Jc(Bc(q)):window,y=q;do{var H;if(v==p)H=ee(y);else{var K=y;H=new L;if(K.nodeType==1)if(K.getBoundingClientRect){var na=be(K);H.x=na.left;H.y=na.top}else{na=Zc(zc(K));K=ee(K);H.x=K.x-na.x;H.y=K.y-na.y}else{H.x=
K.clientX;H.y=K.clientY}H=H}H=H;t.x+=H.x;t.y+=H.y}while(v&&v!=p&&(y=v.frameElement)&&(v=v.parent));q=xc(t,ee(q));if(F&&!Fc(o.aa))q=xc(q,Zc(o));m.left+=q.x;m.top+=q.y}a=(b&4&&fe(a)?b^2:b)&-5;b=new L(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);if(j)b=xc(b,j);if(e){b.x+=(a&2?-1:1)*e.x;b.y+=(a&1?-1:1)*e.y}var X;if(h)if((X=de(c))&&j){X.top=Math.max(0,X.top-j.y);X.right-=j.x;X.bottom-=j.y;X.left=Math.max(0,X.left-j.x)}a:{j=X;e=b.ka();X=0;a=(d&4&&fe(c)?d^2:d)&-5;d=he(c);i=i?i.ka():d;if(f||a!=0){if(a&
2)e.x-=i.width+(f?f.right:0);else if(f)e.x+=f.left;if(a&1)e.y-=i.height+(f?f.bottom:0);else if(f)e.y+=f.top}if(h){if(j){f=e;X=0;if(f.x<j.left&&h&1){f.x=j.left;X|=1}if(f.x<j.left&&f.x+i.width>j.right&&h&16){i.width-=f.x+i.width-j.right;X|=4}if(f.x+i.width>j.right&&h&1){f.x=Math.max(j.right-i.width,j.left);X|=1}if(h&2)X|=(f.x<j.left?16:0)|(f.x+i.width>j.right?32:0);if(f.y<j.top&&h&4){f.y=j.top;X|=2}if(f.y>=j.top&&f.y+i.height>j.bottom&&h&32){i.height-=f.y+i.height-j.bottom;X|=8}if(f.y+i.height>j.bottom&&
h&4){f.y=Math.max(j.bottom-i.height,j.top);X|=2}if(h&8)X|=(f.y<j.top?64:0)|(f.y+i.height>j.bottom?128:0);h=X}else h=256;X=h;if(X&496){c=X;break a}}$d(c,e);h=d==i?k:!d||!i?n:d.width==i.width&&d.height==i.height;h||ge(c,i);c=X}return c};function Tf(){}Tf.prototype.xd=aa();function Uf(a,b){this.element=a;this.Qd=b}A(Uf,Tf);Uf.prototype.xd=function(a,b,c){Sf(this.element,this.Qd,a,b,undefined,c)};function Vf(a,b,c){Uf.call(this,a,b);this.kk=c}A(Vf,Uf);Vf.prototype.xd=function(a,b,c,d){var e=Sf(this.element,this.Qd,a,b,l,c,10,d);if(e&496){var f=this.Qd,h=b;if(e&48){f^=2;h^=2}if(e&192){f^=1;h^=1}e=Sf(this.element,f,a,h,l,c,10,d);if(e&496)this.kk?Sf(this.element,this.Qd,a,b,l,c,5,d):Sf(this.element,this.Qd,a,b,l,c,0,d)}};function Wf(a,b,c,d){Vf.call(this,a,b,c);this.Ll=d}A(Wf,Vf);Wf.prototype.xd=function(a,b,c,d){this.Ll?Sf(this.element,this.Qd,a,b,l,c,33,d):Wf.h.xd.call(this,a,b,c,d)};function Xf(){}A(Xf,Pe);ga(Xf);u=Xf.prototype;u.hc=s("button");u.gf=function(a,b,c){b==16?Oe(a,"pressed",c):Xf.h.gf.call(this,a,b,c)};u.i=function(a){var b=Xf.h.i.call(this,a),c=a.Wd();c&&this.af(b,c);(c=a.Ua())&&this.Ia(b,c);a.fb&16&&this.gf(b,16,n);return b};u.Ua=fa;u.Ia=fa;u.Wd=function(a){return a.title};u.af=function(a,b){if(a)a.title=b||""};u.t=s("goog-button");function Yf(){}A(Yf,Xf);ga(Yf);u=Yf.prototype;u.hc=aa();u.i=function(a){Ve(a,n);a.ji&=-256;$e(a,32,n);return a.T().i("button",{"class":this.Fc(a).join(" "),disabled:!a.ma(),title:a.Wd()||"",value:a.Ua()||""},a.ye()||"")};u.tc=function(a){a.eb().u(a.f(),"click",a.Kc)};u.hg=fa;u.dd=fa;u.Yc=function(a){return a.ma()};u.vc=fa;u.Lb=function(a,b,c){Yf.h.Lb.call(this,a,b,c);if((a=a.f())&&b==1)a.disabled=c};u.Ua=function(a){return a.value};u.Ia=function(a,b){if(a)a.value=b};u.gf=fa;function Zf(a,b,c){Ue.call(this,a,b||Yf.qa(),c)}A(Zf,Ue);u=Zf.prototype;u.Ua=r("Jj");u.Ia=function(a){this.Jj=a;this.L.Ia(this.f(),a)};u.Wd=r("Hj");u.af=function(a){this.Hj=a;this.L.af(this.f(),a)};u.m=function(){Zf.h.m.call(this);delete this.Jj;delete this.Hj};u.ta=function(){Zf.h.ta.call(this);if(this.fb&32){var a=this.Sa();a&&this.eb().u(a,"keyup",this.Yd)}};u.Yd=function(a){if(a.keyCode==13&&a.type=="key"||a.keyCode==32&&a.type=="keyup")return this.Kc(a);return a.keyCode==32};
Se("goog-button",function(){return new Zf(l)});function $f(){}A($f,Pe);ga($f);$f.prototype.i=function(a){return a.T().i("div",this.t())};$f.prototype.jc=aa();$f.prototype.t=s("goog-menuseparator");function ag(a,b){Ue.call(this,l,a||$f.qa(),b);$e(this,1,n);$e(this,2,n);$e(this,4,n);$e(this,32,n);this.Ma=1}A(ag,Ue);ag.prototype.ta=function(){ag.h.ta.call(this);Ne(this.f(),"separator")};Se("goog-menuseparator",function(){return new ag});function bg(){}ga(bg);u=bg.prototype;u.hc=aa();function cg(a,b,c){if(b)b.tabIndex=c?0:-1}u.i=function(a){return a.T().i("div",this.Fc(a).join(" "))};u.za=function(a){return a};u.tc=function(a){a=a.f();pe(a,k,G);if(F)a.hideFocus=k;var b=this.hc();b&&Ne(a,b)};u.Sa=function(a){return a.f()};u.t=s("goog-container");u.Fc=function(a){var b=this.t(),c=[b,a.Ef()==dg?b+"-horizontal":b+"-vertical"];a.ma()||c.push(b+"-disabled");return c};u.zi=function(){return eg};function fg(a,b,c){re.call(this,c);this.L=b||bg.qa();this.fe=a||this.L.zi()}A(fg,re);var dg="horizontal",eg="vertical";u=fg.prototype;u.Wi=l;u.Zb=l;u.L=l;u.fe=l;u.nb=k;u.Fa=k;u.dh=k;u.oa=-1;u.Wa=l;u.Jc=n;u.nk=n;u.El=k;u.Oc=l;u.Sa=function(){return this.Wi||this.L.Sa(this)};u.Df=function(){return this.Zb||(this.Zb=new Ge(this.Sa()))};u.i=function(){this.q=this.L.i(this)};u.za=function(){return this.L.za(this.f())};
u.ta=function(){fg.h.ta.call(this);ze(this,function(b){b.X&&gg(this,b)},this);var a=this.f();this.L.tc(this);this.Ea(this.nb,k);this.eb().u(this,"enter",this.jh).u(this,"highlight",this.kh).u(this,"unhighlight",this.mh).u(this,"open",this.el).u(this,"close",this.Wk).u(a,"mousedown",this.ib).u(Bc(a),"mouseup",this.Yk).u(a,["mousedown","mouseup","mouseover","mouseout"],this.Vk);this.Yc()&&hg(this,k)};
function hg(a,b){var c=a.eb(),d=a.Sa();b?c.u(d,"focus",a.Ff).u(d,"blur",a.Xc).u(a.Df(),"key",a.rc):c.mb(d,"focus",a.Ff).mb(d,"blur",a.Xc).mb(a.Df(),"key",a.rc)}u.xb=function(){this.qb(-1);this.Wa&&this.Wa.va(n);this.Jc=n;fg.h.xb.call(this)};u.m=function(){fg.h.m.call(this);if(this.Zb){this.Zb.$();this.Zb=l}this.L=this.Wa=this.Oc=l};u.jh=s(k);
u.kh=function(a){var b=De(this,a.target);if(b>-1&&b!=this.oa){var c=Be(this,this.oa);c&&c.wc(n);this.oa=b;c=Be(this,this.oa);this.Jc&&c.setActive(k);if(this.El&&this.Wa&&c!=this.Wa)c.fb&64?c.va(k):this.Wa.va(n)}Oe(this.f(),"activedescendant",a.target.f().id)};u.mh=function(a){if(a.target==Be(this,this.oa))this.oa=-1;Oe(this.f(),"activedescendant","")};u.el=function(a){if((a=a.target)&&a!=this.Wa&&a.Da==this){this.Wa&&this.Wa.va(n);this.Wa=a}};u.Wk=function(a){if(a.target==this.Wa)this.Wa=l};
u.ib=function(a){if(this.Fa)this.Jc=k;var b=this.Sa();b&&Vc(b)?b.focus():a.preventDefault()};u.Yk=function(){this.Jc=n};u.Vk=function(a){var b;a:{b=a.target;if(this.Oc)for(var c=this.f();b&&b!==c;){var d=b.id;if(d in this.Oc){b=this.Oc[d];break a}b=b.parentNode}b=l}if(b)switch(a.type){case "mousedown":b.ib(a);break;case "mouseup":b.pd(a);break;case "mouseover":b.$d(a);break;case "mouseout":b.Zd(a)}};u.Ff=aa();u.Xc=function(){this.qb(-1);this.Jc=n;this.Wa&&this.Wa.va(n)};
u.rc=function(a){if(this.ma()&&this.ab()&&(Ae(this)!=0||this.Wi)&&this.Yd(a)){a.preventDefault();a.stopPropagation();return k}return n};
u.Yd=function(a){var b=Be(this,this.oa);if(b&&typeof b.rc=="function"&&b.rc(a))return k;if(this.Wa&&this.Wa!=b&&typeof this.Wa.rc=="function"&&this.Wa.rc(a))return k;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return n;switch(a.keyCode){case 27:if(this.Yc())this.Sa().blur();else return n;break;case 36:ig(this);break;case 35:jg(this);break;case 38:if(this.fe==eg)kg(this);else return n;break;case 37:if(this.fe==dg)Ce(this)?lg(this):kg(this);else return n;break;case 40:if(this.fe==eg)lg(this);else return n;
break;case 39:if(this.fe==dg)Ce(this)?kg(this):lg(this);else return n;break;default:return n}return k};function gg(a,b){var c=b.f();c=c.id||(c.id=ue(b));if(!a.Oc)a.Oc={};a.Oc[c]=b}u.wa=function(a,b){fg.h.wa.call(this,a,b)};u.oe=function(a,b,c){a.Uh|=2;a.Uh|=64;if(this.Yc()||!this.nk)$e(a,32,n);Ve(a,n);fg.h.oe.call(this,a,b,c);c&&this.X&&gg(this,a);b<=this.oa&&this.oa++};
u.removeChild=function(a,b){if(a=x(a)?xe(this,a):a){var c=De(this,a);if(c!=-1)if(c==this.oa)a.wc(n);else c<this.oa&&this.oa--;(c=a.f())&&c.id&&eb(this.Oc,c.id)}a=fg.h.removeChild.call(this,a,b);Ve(a,k);return a};u.Ef=r("fe");u.ab=r("nb");u.Ea=function(a,b){if(b||this.nb!=a&&this.dispatchEvent(a?"show":"hide")){this.nb=a;var c=this.f();if(c){me(c,a);this.Yc()&&cg(this.L,this.Sa(),this.Fa&&this.nb);b||this.dispatchEvent(this.nb?"aftershow":"afterhide")}return k}return n};u.ma=r("Fa");
u.uc=function(a){if(this.Fa!=a&&this.dispatchEvent(a?"enable":"disable")){if(a){this.Fa=k;ze(this,function(b){if(b.Lj)delete b.Lj;else b.uc(k)})}else{ze(this,function(b){if(b.ma())b.uc(n);else b.Lj=k});this.Jc=this.Fa=n}this.Yc()&&cg(this.L,this.Sa(),a&&this.nb)}};u.Yc=r("dh");u.vc=function(a){a!=this.dh&&this.X&&hg(this,a);this.dh=a;this.Fa&&this.nb&&cg(this.L,this.Sa(),a)};u.qb=function(a){if(a=Be(this,a))a.wc(k);else this.oa>-1&&Be(this,this.oa).wc(n)};u.wc=function(a){this.qb(De(this,a))};
function ig(a){mg(a,function(b,c){return(b+1)%c},Ae(a)-1)}function jg(a){mg(a,function(b,c){b--;return b<0?c-1:b},0)}function lg(a){mg(a,function(b,c){return(b+1)%c},a.oa)}function kg(a){mg(a,function(b,c){b--;return b<0?c-1:b},a.oa)}function mg(a,b,c){c=c<0?De(a,a.Wa):c;var d=Ae(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=Be(a,c);if(f&&a.ni(f)){a.qb(c);return k}e++;c=b.call(a,c,d)}return n}u.ni=function(a){return a.ab()&&a.ma()&&!!(a.fb&2)};function ng(){}A(ng,Pe);ga(ng);ng.prototype.t=s("goog-menuheader");function og(a,b,c){Ue.call(this,a,c||ng.qa(),b);$e(this,1,n);$e(this,2,n);$e(this,4,n);$e(this,32,n);this.Ma=1}A(og,Ue);Se("goog-menuheader",function(){return new og(l)});function pg(){}A(pg,bg);ga(pg);pg.prototype.hc=s("menu");pg.prototype.fd=function(a,b){return Rc(a.f(),b)};pg.prototype.t=s("goog-menu");pg.prototype.tc=function(a){pg.h.tc.call(this,a);a=a.f();Oe(a,"haspopup","true")};function qg(a){ag.call(this,$f.qa(),a)}A(qg,ag);Se("goog-menuseparator",function(){return new ag});function rg(a,b){fg.call(this,eg,b||pg.qa(),a);this.vc(n)}A(rg,fg);u=rg.prototype;u.Dg=k;u.ok=n;u.t=function(){return this.L.t()};u.fd=function(a){if(this.L.fd(this,a))return k;for(var b=0,c=Ae(this);b<c;b++){var d=Be(this,b);if(typeof d.fd=="function"&&d.fd(a))return k}return n};u.Cc=function(a){this.wa(a,k)};u.Jd=function(a,b){this.oe(a,b,k)};u.Ud=function(a){return Be(this,a)};u.Bf=function(){return Ae(this)};
u.Ea=function(a,b){var c=rg.h.Ea.call(this,a,b);c&&a&&this.X&&this.Dg&&this.Sa().focus();return c};u.jh=function(a){this.Dg&&this.Sa().focus();return rg.h.jh.call(this,a)};u.ni=function(a){return(this.ok||a.ma())&&a.ab()&&!!(a.fb&2)};function sg(){}A(sg,Xf);ga(sg);u=sg.prototype;u.i=function(a){var b={"class":"goog-inline-block "+this.Fc(a).join(" "),title:a.Wd()||""};return a.T().i("div",b,this.Ng(a.Qa,a.T()))};u.hc=s("button");u.za=function(a){return a&&a.firstChild.firstChild};u.Ng=function(a,b){return b.i("div","goog-inline-block "+(this.t()+"-outer-box"),b.i("div","goog-inline-block "+(this.t()+"-inner-box"),a))};u.t=s("goog-custom-button");function tg(){}A(tg,sg);ga(tg);if(G)tg.prototype.jc=function(a,b){var c=tg.h.za.call(this,a&&a.firstChild);if(c){var d=this.createCaption(b,zc(a)),e=c.parentNode;e&&e.replaceChild(d,c)}};u=tg.prototype;u.za=function(a){a=tg.h.za.call(this,a&&a.firstChild);if(G&&a&&a.__goog_wrapper_div)a=a.firstChild;return a};u.Ng=function(a,b){return tg.h.Ng.call(this,[this.createCaption(a,b),this.Og(b)],b)};u.createCaption=function(a,b){return ug(a,this.t(),b)};
function ug(a,b,c){return c.i("div","goog-inline-block "+(b+"-caption"),a)}u.Og=function(a){return a.i("div","goog-inline-block "+(this.t()+"-dropdown"),"")};u.t=s("goog-menu-button");function vg(a,b,c,d){Zf.call(this,a,c||tg.qa(),d);$e(this,64,k);b&&this.cd(b);this.ac=new kf(500)}A(vg,Zf);u=vg.prototype;u.ii=k;u.Hh=n;u.sh=n;u.ta=function(){vg.h.ta.call(this);this.J&&wg(this,this.J,k);Oe(this.f(),"haspopup","true")};u.xb=function(){vg.h.xb.call(this);if(this.J){this.va(n);this.J.xb();wg(this,this.J,n);var a=this.J.f();a&&Pc(a)}};u.m=function(){vg.h.m.call(this);if(this.J){this.J.$();delete this.J}delete this.Hl;this.ac.$()};
u.ib=function(a){vg.h.ib.call(this,a);if(this.ra()){this.va(!(this.Ma&64));if(this.J)this.J.Jc=!!(this.Ma&64)}};u.pd=function(a){vg.h.pd.call(this,a);if(this.J&&!this.ra())this.J.Jc=n};u.Kc=function(){this.setActive(n);return k};u.Xk=function(a){this.J&&this.J.ab()&&!this.fd(a.target)&&this.va(n)};u.fd=function(a){return a&&Rc(this.f(),a)||this.J&&this.J.fd(a)||n};
u.Yd=function(a){if(a.keyCode==32){a.preventDefault();if(a.type!="keyup")return n}else if(a.type!="key")return n;if(this.J&&this.J.ab()){var b=this.J.rc(a);if(a.keyCode==27){this.va(n);return k}return b}if(a.keyCode==40||a.keyCode==38||a.keyCode==32){this.va(k);return k}return n};u.De=function(){this.va(n)};u.bl=function(){this.ra()||this.va(n)};u.Xc=function(a){this.sh||this.va(n);vg.h.Xc.call(this,a)};function xg(a){a.J||a.cd(new rg(a.T()));return a.J||l}
u.cd=function(a){var b=this.J;if(a!=b){if(b){this.va(n);this.X&&wg(this,b,n);delete this.J}if(a){this.J=a;we(a,this);a.Ea(n);var c=this.sh;(a.Dg=c)&&a.vc(k);this.X&&wg(this,a,k)}}return b};u.Cc=function(a){xg(this).wa(a,k)};u.Jd=function(a,b){xg(this).oe(a,b,k)};u.Ud=function(a){return this.J?Be(this.J,a):l};u.Bf=function(){return this.J?Ae(this.J):0};u.Ea=function(a,b){var c=vg.h.Ea.call(this,a,b);c&&!this.ab()&&this.va(n);return c};u.uc=function(a){vg.h.uc.call(this,a);this.ma()||this.va(n)};
u.va=function(a){vg.h.va.call(this,a);if(this.J&&!!(this.Ma&64)==a){if(a){this.J.X||this.J.R();this.Kj=de(this.f());this.ki=ie(this.f());yg(this);this.J.qb(-1)}else{this.setActive(n);this.J.Jc=n;if(this.dg!=l){this.dg=undefined;var b=this.J.f();b&&ge(b,"","")}}this.J.Ea(a);b=this.eb();var c=a?b.u:b.mb;c.call(b,Yc(this.T()),"mousedown",this.Xk,k);this.sh&&c.call(b,this.J,"blur",this.bl);c.call(b,this.ac,mf,this.Bl);a?this.ac.start():this.ac.stop()}};
function yg(a){if(a.J.X){var b=a.Hl||a.f();b=new Wf(b,a.ii?5:7,!a.Hh,a.Hh);var c=a.J.f();if(!a.J.ab()){c.style.visibility="hidden";me(c,k)}if(!a.dg&&a.Hh)a.dg=he(c);b.xd(c,a.ii?4:6,l,a.dg);if(!a.J.ab()){me(c,n);c.style.visibility="visible"}}}
u.Bl=function(){var a=ie(this.f()),b=de(this.f()),c;c=this.ki;c=c==a?k:!c||!a?n:c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height;if(!(c=!c)){c=this.Kj;c=c==b?k:!c||!b?n:c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left;c=!c}if(c){this.ki=a;this.Kj=b;yg(this)}};function wg(a,b,c){var d=a.eb();c=c?d.u:d.mb;c.call(d,b,"action",a.De);c.call(d,b,"highlight",a.kh);c.call(d,b,"unhighlight",a.mh)}u.kh=function(a){Oe(this.f(),"activedescendant",a.target.f().id)};
u.mh=function(){Be(this.J,this.J.oa)||Oe(this.f(),"activedescendant","")};Se("goog-menu-button",function(){return new vg(l)});function zg(a){this.rd=[];Ag(this,a)}A(zg,Sd);u=zg.prototype;u.bd=l;u.Ih=l;u.Bf=function(){return this.rd.length};u.Ud=function(a){return this.rd[a]||l};function Ag(a,b){if(b){B(b,function(c){this.he(c,n)},a);Ua(a.rd,b)}}u.Cc=function(a){this.Jd(a,this.Bf())};u.Jd=function(a,b){if(a){this.he(a,n);Va(this.rd,b,0,a)}};u.ld=r("bd");u.xc=function(a){if(a!=this.bd){this.he(this.bd,n);this.bd=a;this.he(a,k)}this.dispatchEvent("select")};u.Vd=function(){return this.bd?Ka(this.rd,this.bd):-1};u.$e=function(a){this.xc(this.Ud(a))};
u.clear=function(){var a=this.rd;if(!ia(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0;this.bd=l};u.m=function(){zg.h.m.call(this);delete this.rd;this.bd=l};u.he=function(a,b){if(a)if(typeof this.Ih=="function")this.Ih(a,b);else typeof a.Ph=="function"&&a.Ph(b)};function Bg(a,b,c,d){vg.call(this,a,b,c,d);this.rf=a;Cg(this)}A(Bg,vg);u=Bg.prototype;u.A=l;u.rf=l;u.ta=function(){Bg.h.ta.call(this);Cg(this);Dg(this)};u.m=function(){Bg.h.m.call(this);if(this.A){this.A.$();this.A=l}this.rf=l};u.De=function(a){this.xc(a.target);Bg.h.De.call(this,a);a.stopPropagation();this.dispatchEvent("action")};u.If=function(){var a=this.ld();Bg.h.Ia.call(this,a&&a.Ua());Cg(this)};
u.cd=function(a){var b=Bg.h.cd.call(this,a);if(a!=b){this.A&&this.A.clear();if(a)this.A?ze(a,function(c){this.A.Cc(c)},this):Eg(this,a)}return b};u.Cc=function(a){Bg.h.Cc.call(this,a);this.A?this.A.Cc(a):Eg(this,xg(this))};u.Jd=function(a,b){Bg.h.Jd.call(this,a,b);this.A?this.A.Jd(a,b):Eg(this,xg(this))};u.xc=function(a){this.A&&this.A.xc(a)};u.$e=function(a){this.A&&this.xc(this.A.Ud(a))};
u.Ia=function(a){if(a!=l&&this.A)for(var b=0,c;c=this.A.Ud(b);b++)if(c&&typeof c.Ua=="function"&&c.Ua()==a){this.xc(c);return}this.xc(l)};u.ld=function(){return this.A?this.A.ld():l};u.Vd=function(){return this.A?this.A.Vd():-1};function Eg(a,b){a.A=new zg;b&&ze(b,function(c){this.A.Cc(c)},a);Dg(a)}function Dg(a){a.A&&a.eb().u(a.A,"select",a.If)}function Cg(a){var b=a.ld();a.jc(b?b.ye():a.rf)}u.va=function(a){Bg.h.va.call(this,a);this.Ma&64&&xg(this).qb(this.Vd())};Se("goog-select",function(){return new Bg(l)});function Fg(a){this.kc=pd?[]:"";a!=l&&this.append.apply(this,arguments)}Fg.prototype.zb=function(a){this.clear();this.append(a)};if(pd){Fg.prototype.Ig=0;Fg.prototype.append=function(a,b){if(b==l)this.kc[this.Ig++]=a;else{this.kc.push.apply(this.kc,arguments);this.Ig=this.kc.length}return this}}else Fg.prototype.append=function(a,b){this.kc+=a;if(b!=l)for(var c=1;c<arguments.length;c++)this.kc+=arguments[c];return this};Fg.prototype.clear=function(){if(pd)this.Ig=this.kc.length=0;else this.kc=""};
Fg.prototype.Ai=function(){return this.toString().length};Fg.prototype.toString=function(){if(pd){var a=this.kc.join("");this.clear();a&&this.append(a);return a}else return this.kc};function Gg(){}A(Gg,$f);ga(Gg);Gg.prototype.i=function(a){return a.T().i("div",this.t()+" goog-inline-block","")};Gg.prototype.t=s("goog-toolbar-separator");function Hg(a,b){ag.call(this,a||Gg.qa(),b)}A(Hg,ag);Se("goog-toolbar-separator",function(){return new Hg});var Ig={};function Jg(){}A(Jg,Xf);ga(Jg);Jg.prototype.i=function(a){var b={"class":"goog-inline-block "+this.Fc(a).join(" "),title:a.Wd()||""};return a.T().i("div",b,a.Qa)};Jg.prototype.hc=s("button");Jg.prototype.Ua=s(l);Jg.prototype.t=s("goog-flat-button");Se("goog-flat-button",function(){return new Zf(l,Jg.qa())});function Kg(){}A(Kg,Jg);ga(Kg);u=Kg.prototype;u.i=function(a){var b={"class":"goog-inline-block "+this.Fc(a).join(" "),title:a.Wd()||""};return a.T().i("div",b,[this.createCaption(a.Qa,a.T()),this.Og(a.T())])};u.za=function(a){return a&&a.firstChild};u.createCaption=function(a,b){return b.i("div","goog-inline-block "+(this.t()+"-caption"),a)};u.Og=function(a){return a.i("div","goog-inline-block "+(this.t()+"-dropdown"),"")};u.t=s("goog-flat-menu-button");
Se("goog-flat-menu-button",function(){return new vg(l,l,Kg.qa())});function Lg(a,b,c){jf.call(this,a,b,c);this.Oh(k)}A(Lg,jf);Lg.prototype.Kc=function(){return this.dispatchEvent("action")};Se("goog-option",function(){return new Lg(l)});function Mg(){}A(Mg,bg);ga(Mg);Mg.prototype.hc=s("toolbar");Mg.prototype.t=s("goog-toolbar");Mg.prototype.zi=function(){return dg};function Ng(a,b,c){fg.call(this,b,a||Mg.qa(),c)}A(Ng,fg);function Og(){}A(Og,sg);ga(Og);Og.prototype.t=s("goog-toolbar-button");function Pg(a,b,c){Zf.call(this,a,b||Og.qa(),c)}A(Pg,Zf);Se("goog-toolbar-button",function(){return new Pg(l)});var Qg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Rg(a){a=a%360;return a*360<0?a+360:a}function N(a){return a*Math.PI/180}function Sg(a,b,c,d){return Rg(Math.atan2(d-b,c-a)*180/Math.PI)}function Tg(a,b){var c=Rg(b)-Rg(a);if(c>180)c-=360;else if(c<=-180)c=360+c;return c};function Ug(a){var b={};a=String(a);var c=a.charAt(0)=="#"?a:"#"+a;if(Vg.test(c)){b.Kf=Wg(c);b.type="hex";return b}else{a:{var d=a.match(Xg);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(c>=0&&c<=255&&e>=0&&e<=255&&d>=0&&d<=255){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(isNaN(e)||e<0||e>255||isNaN(a)||a<0||a>255||isNaN(c)||c<0||c>255)g(Error('"('+e+","+a+","+c+'") is not a valid RGB color'));e=Yg(e.toString(16));a=Yg(a.toString(16));
c=Yg(c.toString(16));b.Kf="#"+e+a+c;b.type="rgb";return b}else if(Qg)if(c=Qg[a.toLowerCase()]){b.Kf=c;b.type="named";return b}}g(Error(a+" is not a valid color string"))}var Zg=/#(.)(.)(.)/;function Wg(a){if(!Vg.test(a))g(Error("'"+a+"' is not a valid hex color"));if(a.length==4)a=a.replace(Zg,"#$1$1$2$2$3$3");return a.toLowerCase()}var Vg=/^#(?:[0-9a-f]{3}){1,2}$/i,Xg=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Yg(a){return a.length==1?"0"+a:a};function $g(){}A($g,tg);ga($g);$g.prototype.createCaption=function(a,b){return $g.h.createCaption.call(this,ah(a,b),b)};function ah(a,b){return b.i("div","goog-color-menu-button-indicator",a)}$g.prototype.Ia=function(a,b){a&&bh(this.za(a),b)};function bh(a,b){if(a&&a.firstChild){var c;try{c=Ug(b).Kf}catch(d){c=l}a.firstChild.style.borderBottomColor=c||(F?"":"transparent")}}$g.prototype.tc=function(a){this.Ia(a.f(),a.Ua());uc(a.f(),"goog-color-menu-button");$g.h.tc.call(this,a)};function ch(){}A(ch,Pe);ga(ch);var dh=0;ch.prototype.i=function(a){var b=this.Fc(a);return a.T().i("div",b?b.join(" "):l,eh(this,a.Qa,a.md(),a.T()))};function eh(a,b,c,d){for(var e=[],f=0,h=0;f<c.height;f++){for(var i=[],j=0;j<c.width;j++){var m=b&&b[h++];i.push(fh(a,m,d))}e.push(d.i("tr",a.t()+"-row",i))}return a.ri(e,d)}ch.prototype.ri=function(a,b){var c=b.i("table",this.t()+"-table",b.i("tbody",this.t()+"-body",a));c.cellSpacing=0;c.cellPadding=0;Ne(c,"grid");return c};
function fh(a,b,c){a=c.i("td",{"class":a.t()+"-cell",id:a.t()+"-cell-"+dh++},b);Ne(a,"gridcell");return a}
ch.prototype.jc=function(a,b){if(a){var c=Ec(document,"tbody",this.t()+"-body",a)[0];if(c){var d=0;B(c.rows,function(j){B(j.cells,function(m){Oc(m);if(b){var o=b[d++];o&&m.appendChild(o)}})});if(d<b.length){for(var e=[],f=zc(a),h=c.rows[0].cells.length;d<b.length;){var i=b[d++];e.push(fh(this,i,f));if(e.length==h){i=f.i("tr",this.t()+"-row",e);c.appendChild(i);e.length=0}}if(e.length>0){for(;e.length<h;)e.push(fh(this,"",f));i=f.i("tr",this.t()+"-row",e);c.appendChild(i)}}}pe(a,k,G)}};
function gh(a,b,c){for(b=b.f();c&&c.nodeType==1&&c!=b;){if(c.tagName=="TD"&&D(tc(c),a.t()+"-cell"))return c.firstChild;c=c.parentNode}return l}function hh(a,b,c,d){if(c){c=c.parentNode;a=a.t()+"-cell-hover";d?uc(c,a):vc(c,a);b=b.f().firstChild;Oe(b,"activedescendent",c.id)}}ch.prototype.t=s("goog-palette");function ih(a,b,c){Ue.call(this,a,b||ch.qa(),c)}A(ih,Ue);u=ih.prototype;u.$b=l;u.oa=-1;u.A=l;u.m=function(){ih.h.m.call(this);if(this.A){this.A.$();this.A=l}this.$b=l};u.jg=function(a){ih.h.jg.call(this,a);jh(this);if(this.A){this.A.clear();Ag(this.A,a)}else{this.A=new zg(a);this.A.Ih=ta(this.he,this);this.eb().u(this.A,"select",this.If)}this.oa=-1};u.ye=s(l);
u.$d=function(a){ih.h.$d.call(this,a);var b=gh(this.L,this,a.target);if(!(b&&a.relatedTarget&&Rc(b,a.relatedTarget)))if(b!=kh(this)){a=this.Qa;this.qb(a?Ka(a,b):-1)}};u.Zd=function(a){ih.h.Zd.call(this,a);var b=gh(this.L,this,a.target);b&&a.relatedTarget&&Rc(b,a.relatedTarget)||b==kh(this)&&hh(this.L,this,b,n)};u.ib=function(a){ih.h.ib.call(this,a);if(this.ra()){a=gh(this.L,this,a.target);if(a!=kh(this)){var b=this.Qa;this.qb(b?Ka(b,a):-1)}}};u.Kc=function(){var a=kh(this);if(a){this.xc(a);return this.dispatchEvent("action")}return n};
u.rc=function(a){var b=this.Qa;b=b?b.length:0;var c=this.$b.width;if(b==0||!this.ma())return n;if(a.keyCode==13||a.keyCode==32)return this.Kc(a);if(a.keyCode==36){this.qb(0);return k}else if(a.keyCode==35){this.qb(b-1);return k}var d=this.oa<0?this.Vd():this.oa;switch(a.keyCode){case 37:if(d==-1)d=b;if(d>0){this.qb(d-1);a.preventDefault();return k}break;case 39:if(d<b-1){this.qb(d+1);a.preventDefault();return k}break;case 38:if(d==-1)d=b+c-1;if(d>=c){this.qb(d-c);a.preventDefault();return k}break;
case 40:if(d==-1)d=-c;if(d<b-c){this.qb(d+c);a.preventDefault();return k}}return n};u.If=aa();u.md=r("$b");u.Kb=function(a,b){if(this.f())g(Error("Component already rendered"));this.$b=ka(a)?new yc(a,b):a;jh(this)};function kh(a){var b=a.Qa;return b&&b[a.oa]}u.qb=function(a){if(a!=this.oa){lh(this,this.oa,n);this.oa=a;lh(this,a,k)}};u.Vd=function(){return this.A?this.A.Vd():-1};u.ld=function(){return this.A?this.A.ld():l};u.$e=function(a){this.A&&this.A.$e(a)};u.xc=function(a){this.A&&this.A.xc(a)};
function lh(a,b,c){if(a.f()){var d=a.Qa;d&&b>=0&&b<d.length&&hh(a.L,a,d[b],c)}}u.he=function(a,b){if(this.f())if(a){var c=a.parentNode,d=this.L.t()+"-cell-selected";b?uc(c,d):vc(c,d)}};function jh(a){var b=a.Qa;if(b)if(a.$b&&a.$b.width){b=Math.ceil(b.length/a.$b.width);if(!ka(a.$b.height)||a.$b.height<b)a.$b.height=b}else{b=Math.ceil(Math.sqrt(b.length));a.$b=new yc(b,b)}else a.$b=new yc(0,0)};function mh(a,b,c){this.pf=a||[];ih.call(this,l,b||ch.qa(),c);this.pf=this.pf;this.bg=l;this.jc(nh(this))}A(mh,ih);mh.prototype.bg=l;mh.prototype.hh=function(){var a=this.ld();if(a){a=a.style[ke("background-color")]||"";return oh(a)}else return l};mh.prototype.Qh=function(a){a=oh(a);if(!this.bg)this.bg=C(this.pf,function(b){return oh(b)});this.$e(a?Ka(this.bg,a):-1)};
function nh(a){return C(a.pf,function(b){var c=this.T().i("div",{"class":this.L.t()+"-colorswatch",style:"background-color:"+b});if(b.charAt(0)=="#"){b=Wg(b);b="RGB ("+[parseInt(b.substr(1,2),16),parseInt(b.substr(3,2),16),parseInt(b.substr(5,2),16)].join(", ")+")"}else b=b;c.title=b;return c},a)}function oh(a){if(a)try{return Ug(a).Kf}catch(b){}return l};function ph(a,b,c,d){vg.call(this,a,b,c||$g.qa(),d)}A(ph,vg);
var qh={km:["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],rm:["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],om:["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79","#990000","#b45f06","#bf9000","#38761d","#134f5c",
"#0b5394","#351c75","#741b47","#660000","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]};function rh(a,b){var c=new rg(b);a&&B(a,function(d){c.wa(d,k)});bb(qh,function(d){d=new mh(d,l,b);d.Kb(8);c.wa(d,k)});return c}u=ph.prototype;u.hh=function(){return this.Ua()};u.Qh=function(a){this.Ia(a)};u.Ia=function(a){for(var b=0,c;c=this.Ud(b);b++)typeof c.Qh=="function"&&c.Qh(a);ph.h.Ia.call(this,a)};
u.De=function(a){if(typeof a.target.hh=="function")this.Ia(a.target.hh());else a.target.Ua()=="none"&&this.Ia(l);ph.h.De.call(this,a);a.stopPropagation();this.dispatchEvent("action")};u.va=function(a){if(a&&this.Bf()==0){this.cd(rh(l,this.T()));this.Ia(this.Ua())}ph.h.va.call(this,a)};Se("goog-color-menu-button",function(){return new ph(l)});function sh(){}A(sh,tg);ga(sh);sh.prototype.t=s("goog-toolbar-menu-button");function th(){}A(th,sh);ga(th);th.prototype.createCaption=function(a,b){return ug(ah(a,b),this.t(),b)};th.prototype.Ia=function(a,b){a&&bh(this.za(a),b)};th.prototype.tc=function(a){this.Ia(a.f(),a.Ua());uc(a.f(),"goog-toolbar-color-menu-button");th.h.tc.call(this,a)};function uh(a,b,c,d){ph.call(this,a,b,c||th.qa(),d)}A(uh,ph);Se("goog-toolbar-color-menu-button",function(){return new uh(l)});function vh(a,b,c,d){vg.call(this,a,b,c||sh.qa(),d)}A(vh,vg);Se("goog-toolbar-menu-button",function(){return new vh(l)});function wh(a,b,c,d){Bg.call(this,a,b,c||sh.qa(),d)}A(wh,Bg);Se("goog-toolbar-select",function(){return new wh(l)});function xh(a,b,c,d,e,f){c=c;if((!c||c=="")&&G&&!J("1.9a"))c="";d=(f||zc()).i("DIV",d?{"class":d}:l,c);e=new Pg(d,e,f);ve(e,a);e.af(b);return e}function yh(a,b,c,d,e,f){a=xh(a,b,c,d,e,f);$e(a,16,k);return a}function zh(a,b,c,d,e,f){e=new wh(l,l,e,f);d&&B(d.split(/\s+/),e.Bg,e);e.Bg("goog-toolbar-select");e.rf=c;Cg(e);ve(e,a);e.af(b);return e};function Ah(a){return function(){return a}}var Bh=Ah(n);/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function O(){this.Fa=this.ik()}A(O,Sd);u=O.prototype;u.ik=Bh;function Ch(a,b){a.b=b;B(a.Ae(),function(c){b.Fh(c.id,c.key)})}u.Ae=function(){return[]};u.vf=function(a){if(this.b==a)this.Fa=k;else this.G.log(Bb,"Trying to enable an unregistered field with this plugin.",void 0)};u.Ug=function(a){this.G.info("disable");if(this.b==a)this.Fa=n;else this.G.log(Bb,"Trying to disable an unregistered field with this plugin.",void 0)};u.G=E("kemia.controller.Plugin");
u.ma=function(a){return this.b==a?this.Fa:n};u.m=function(){if(this.b)if(this.b){this.Ug(this.b);this.b=l}O.h.m.call(this)};u.tk=k;var Dh={};O.prototype.hi=Bh;var Eh=gb({cn:1,dn:2,fn:3,If:4,Gf:5,execCommand:6,queryCommandValue:7,ib:8,pd:9,$d:10,Zd:11,Ee:12,Ym:13,Xm:14,Wm:15,an:16,$m:17,Zm:18,Vm:19,Um:20,Rm:21,ln:22,kn:23,jn:24,hn:25,bn:26});O.prototype.execCommand=function(a){var b=this.Vi(a);try{Fh(this.b);var c=this.Uc.apply(this,arguments)}finally{if(!b){P(this.b);this.b.dispatchEvent(Gh)}}return c};
O.prototype.Vi=Bh;O.prototype.Xb=s(n);function Hh(a,b){this.source=a;this.target=b}function Ih(a,b,c){return((a.target.x-a.source.x)*(b.y-a.source.y)-(b.x-a.source.x)*(a.target.y-a.source.y))*((a.target.x-a.source.x)*(c.y-a.source.y)-(c.x-a.source.x)*(a.target.y-a.source.y))>0};function Jh(a,b){this.x=Number(a)||0;this.y=Number(b)||0}A(Jh,L);function Kh(a){return new Jh(a.x,a.y)}u=Jh.prototype;u.ka=function(){return new Jh(this.x,this.y)};u.scale=function(a){this.x*=a;this.y*=a;return this};u.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y))};u.add=function(a){this.x+=a.x;this.y+=a.y;return this};u.cf=function(a){this.x-=a.x;this.y-=a.y;return this};function Lh(a,b,c,d,e){this.source=a!==undefined?a:new L(10,0);this.target=b!==undefined?b:M(this.source,new L(2,0));this.style=c!==undefined?c:Mh;this.Eh=d!==undefined?d:"";this.Lg=e!==undefined?e:""}u=Lh.prototype;u.translate=function(a){this.source=M(this.source,a);this.target=M(this.target,a)};u.ya=function(){var a=Kh(this.source);return a.add(Kh(this.target).cf(a).scale(0.5))};
u.Ef=function(a){var b=new L((this.source.x+this.target.x)/2,(this.source.y+this.target.y)/2),c=new Kh(xc(this.source,this.target));return Ih(new Hh(b,M(b,new Jh(-c.y,c.x))),a,this.target)?Nh:Oh};u.kg=function(a){this.Eh=a?a:""};u.ig=function(a){this.Lg=a?a:""};u.toString=function(){return"kemia.model.Arrow "+this.source.toString()+" "+this.target.toString()};var Mh=1,Nh=1,Oh=2;function Ph(a){this.a=a!==undefined?a:new L(0,0)}Ph.prototype.translate=function(a){this.a=M(this.a,a)};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Qh(){this.Hd={};O.call(this)}A(Qh,O);var Rh=gb({gm:"editArrow",hm:"editPlus"});u=Qh.prototype;u.Xb=function(a){return a in Rh};u.Gc=Ah("ArrowPlusEdit");u.Uc=function(a,b,c){this.Hd[a]=c};u.G=E("kemia.controller.plugins.ArrowPlusEdit");
u.ib=function(a){if(this.Hd.editArrow){Q(this.b);var b=this.b.j.ca.transform.pb();b=R(b,[new L(a.offsetX,a.offsetY)]);Sh(this.b.r[0],new Lh(b[0]));S(this.b,this.b.r);P(this.b)}else if(this.Hd.editPlus){Q(this.b);b=this.b.j.ca.transform.pb();b=R(b,[new L(a.offsetX,a.offsetY)]);a=this.b.r[0];b=new Ph(b[0]);a.Ib.push(b);b.Ka=a;S(this.b,this.b.r);P(this.b)}};u.yd=function(){this.Hd.editArrow=n;this.Hd.editPlus=n};u.queryCommandValue=function(a){var b=l;if(this.Xb(a))b=this.Hd[a];return b};var Th={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",96:"num-0",
97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};function Uh(a){this.bf={};this.Ic={Ad:[],Cj:0};this.Rk=kb(Vh);this.pk=k;this.mk=this.qk=n;this.sl=k;this.Hc=a;Gd(this.Hc,"keydown",this.od,n,this);Yb&&G&&J("1.8")&&Gd(this.Hc,"keyup",this.Di,n,this);if(Zb&&!G){Gd(this.Hc,"keypress",this.Fi,n,this);Gd(this.Hc,"keyup",this.Gi,n,this)}}var Wh;A(Uh,Sd);var Vh=[27,112,113,114,115,116,117,118,119,120,121,122,123,19],Xh={Vj:"shortcut",Uj:"shortcut_"};u=Uh.prototype;
u.Fh=function(a){var b=Yh,c=this.bf,d=arguments;if(x(d[1])){d=d[1];d=d.replace(/[ +]*\+[ +]*/g,"+").replace(/[ ]+/g," ").toLowerCase();d=d.split(" ");for(var e=[],f,h=0;f=d[h];h++){var i=f.split("+"),j;f=0;for(var m,o=0;m=i[o];o++){switch(m){case "shift":f|=1;continue;case "ctrl":f|=2;continue;case "alt":f|=4;continue;case "meta":f|=8;continue}j=m;if(!Wh){i={};m=void 0;for(m in Th)i[Th[m]]=m;Wh=i}j=Wh[j];break}e.push({keyCode:j,$i:f})}d=e}else{e=d;h=1;if(ia(d[1])){e=d[1];h=0}for(d=[];h<e.length;h+=
2)d.push({keyCode:e[h],$i:e[h+1]})}b(c,d,a)};u.m=function(){Uh.h.m.call(this);this.bf={};Id(this.Hc,"keydown",this.od,n,this);Yb&&G&&J("1.8")&&Id(this.Hc,"keyup",this.Di,n,this);if(Zb&&!G){Id(this.Hc,"keypress",this.Fi,n,this);Id(this.Hc,"keyup",this.Gi,n,this)}this.Hc=l};u.Di=function(a){if(a.keyCode==224){this.Zi=k;nf(function(){this.Zi=n},400,this)}else{var b=a.metaKey||this.Zi;if((a.keyCode==67||a.keyCode==88||a.keyCode==86)&&b){a.metaKey=b;this.od(a)}}};
function Zh(a,b){return Zb&&!G&&b.ctrlKey&&b.altKey&&!b.shiftKey}u.Fi=function(a){if(a.keyCode>32&&Zh(this,a))this.Ui=k};u.Gi=function(a){!this.Ui&&Zh(this,a)&&this.od(a)};function Yh(a,b,c){var d=b.shift();d=d.keyCode&255|d.$i<<8;var e=a[d];if(e&&c&&(b.length==0||x(e)))g(Error("Keyboard shortcut conflicts with existing shortcut"));if(b.length){e||(e=a[d]={});Yh(e,b,c)}else a[d]=c}function $h(a,b,c,d){c=c||0;if((d=(d||a.bf)[b[c]])&&!x(d)&&b.length-c>1)return $h(a,b,c+1,d);return d}
u.od=function(a){if(ai(this,a))if(a.type=="keydown"&&Zh(this,a))this.Ui=n;else{var b=a.keyCode&255|((a.shiftKey?1:0)|(a.ctrlKey?2:0)|(a.altKey?4:0)|(a.metaKey?8:0))<<8,c,d,e=va();if(this.Ic.Ad.length&&e-this.Ic.Cj<=1500)c=$h(this,this.Ic.Ad);else this.Ic.Ad.length=0;c=c?c[b]:this.bf[b];if(!c){c=this.bf[b];this.Ic.Ad=[]}if(c&&x(c))d=c;else if(c){this.Ic.Ad.push(b);this.Ic.Cj=e;G&&a.preventDefault()}else this.Ic.Ad.length=0;if(d){this.pk&&a.preventDefault();this.qk&&a.stopPropagation();b=this.dispatchEvent(new bi(Xh.Vj,
d,a.target));b&=this.dispatchEvent(new bi(Xh.Uj+d,d,a.target));b||a.preventDefault();this.Ic.Ad.length=0}}};
function ai(a,b){var c=b.keyCode;if(c==16||c==17||c==18)return n;var d=b.target,e=d.tagName=="TEXTAREA"||d.tagName=="INPUT"||d.tagName=="BUTTON"||d.tagName=="SELECT",f=!e&&(d.isContentEditable||d.ownerDocument&&d.ownerDocument.designMode=="on");if(!e&&!f)return k;if(a.Rk[c]||a.mk)return k;if(f)return n;if(a.sl&&(b.altKey||b.ctrlKey||b.metaKey))return k;if(d.tagName=="INPUT"&&(d.type=="text"||d.type=="password"))return c==13;if(d.tagName=="INPUT"||d.tagName=="BUTTON")return c!=32;return n}
function bi(a,b,c){dd.call(this,a,c);this.identifier=b}A(bi,dd);/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function ci(){O.call(this)}A(ci,O);ci.prototype.Xb=function(a){return a=="selectSymbol"};ci.prototype.Gc=Ah("selectSymbol");var di=[{id:"H",key:"h"},{id:"C",key:"c"},{id:"N",key:"n"},{id:"S",key:"s"},{id:"P",key:"p"},{id:"O",key:"o"},{id:"F",key:"f"},{id:"I",key:"i"},{id:"+",key:[187,1]},{id:"-",key:189}];u=ci.prototype;u.Ae=function(){return di};u.yd=function(){this.Q=undefined};u.Uc=function(a,b){this.Q=b};u.G=E("kemia.controller.plugins.AtomEdit");
u.Gf=function(a){try{var b=a.identifier,c=Pa(di,function(e){return e.id==b});if(c){B(this.b.selected,function(e){if(e instanceof T)if("+"==c.id){Q(this.b);e.Za++;this.b.Mc(this.b.r);P(this.b)}else if("-"==c.id){Q(this.b);e.Za--;this.b.Mc(this.b.r);P(this.b)}else{var f=c.id;if(f!=e.Q){Q(this.b);ei(this,f,e);this.b.Mc(this.b.r);P(this.b);return k}}},this);return k}}catch(d){this.G.info(d)}};
u.Ee=function(a){if(this.Q){this.b.selected.length=0;this.b.Z.style.cursor="default";var b=fi(this.b,a);a.currentTarget.p&&a.currentTarget.p.clear();if(b instanceof T){gi(this.b,b);this.b.Z.style.cursor="pointer";a.currentTarget.p=a.currentTarget.p?this.Gb(b,a.currentTarget.p):this.Gb(b);return k}}return n};
u.ib=function(a){if(this.Q){var b=this.b.selected;if(b.length)if(b.length==1&&a.shiftKey){a=b[0];hi(a.v,a,ii,ji,this.Q);this.b.Mc(this.b.r);P(this.b);return k}else B(b,function(c){if(c instanceof T)if(this.Q&&this.Q!=c.Q){Q(this.b);ei(this,this.Q,c);this.b.Mc(this.b.r);P(this.b);return k}},this);else{this.ue(ki(a));this.b.Mc(this.b.r);P(this.b);return k}}return n};u.Gb=function(a,b){return this.b.j.ca.Ab.la(a,"purple",b)};
function ei(a,b,c){var d=new T(b,c.a.x,c.a.y),e=c.v;B(c.g.M(),function(f){var h=f.ka();h.v=undefined;c==h.source?h.source=d:h.target=d;li(e,h);mi(e,f)});ni(e,c);oi(e,d)}u.ue=function(a){a=pi(this.b.j.transform.pb(),[a])[0];var b=new T(this.Q,a.x,a.y);a=new U;oi(a,b);if(this.b.r.length>0){b=this.b.r[0];qi(b,a)}};u.queryCommandValue=function(a){if(a=="selectSymbol")return this.Q};var ri={};var si={C:4,Si:4,N:3,P:3,O:2,S:2,H:1,Br:1,Cl:1,I:1,F:1};function T(a,b,c,d,e,f){this.Q=a!==undefined?a:"C";this.a=new L(b?b:0,c?c:0);this.g=new qb;this.Za=d?d:0;this.Uf=f?f:0;this.Ub=e!==undefined?e:n;this.mn=l;this.fa=Array(3)}T.prototype.ob=function(){return this.g.Af()};function ti(a){var b=si[a.Q],c=a.g.M();c=Ma(c,function(e,f){return e+f.sa},0);var d=0;if(b)d=b-c+a.Za;return d}function ui(a){for(var b=a.g.M(),c=[],d=0,e=b.length;d<e;d++)c.push(V(b[d],a));return c}
function vi(a){var b=a.g.M(),c;if(b.length==0)c=0;else if(b.length==1){var d=V(b[0],a),e=Sg(a.a.x,a.a.y,d.a.x,d.a.y);b=C(d.g.M(),function(f){f=V(f,d);if(f!=a)return Tg(e,Sg(d.a.x,d.a.y,f.a.x,f.a.y))});Ya(b);c=b[0]>0?e-120:e+120}else if(b.length==2){b=C(b,function(f){f=V(f,a);return Sg(a.a.x,a.a.y,f.a.x,f.a.y)});c=Tg(b[0],b[1]);if(Math.abs(c)<180)c=180+c/2;else c/=2;c=b[0]+c}else if(b.length==3){Ya(b,function(f,h){return Za(V(f,a).g.M().length,V(h,a).g.M().length)});b=Wa(b,0,2);b=C(b,function(f){f=
V(f,a);return Sg(a.a.x,a.a.y,f.a.x,f.a.y)});c=b[0]+Tg(b[0],b[1])/2}return c}T.prototype.ka=function(){return new T(this.Q,this.a.x,this.a.y,this.Za,this.Ub,this.Uf)};T.prototype.lb=function(a,b){this.fa[a]=b};T.prototype.toString=function(){return"kemia.model.Atom ["+this.Q+"] "+this.a.toString()};function W(a,b,c,d,e,f){this.source=a;this.target=b;this.sa=c!==undefined?c:ii;this.da=d!==undefined?d:ji;this.Ub=e!==undefined?e:n;this.v=f!==undefined?f:l}function V(a,b){if(b===a.source)return a.target;if(b===a.target)return a.source;return l}W.prototype.Ai=function(){return wc(this.source.a,this.target.a)};W.prototype.ka=function(){return new W(this.source,this.target,this.sa,this.da,this.Ub,this.v)};var ii=1,ji=10;
W.prototype.toString=function(){return"kemia.model.Bond["+this.sa+", "+this.da+"]  "+this.source.toString()+" -- "+this.target.toString()+" mol: "+(this.v?this.v.name:"no molecule")};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function wi(){O.call(this);this.yg=n}A(wi,O);wi.prototype.Xb=function(a){return a=="selectBond"};wi.prototype.Gc=Ah("selectBond");wi.prototype.Uc=function(a,b){this.Ya=b};var xi=[{id:"1",key:"1"},{id:"2",key:"2"},{id:"3",key:"3"},{id:"4",key:"4"},{id:"5",key:"5"},{id:"6",key:"6"},{id:"7",key:"7"},{id:"8",key:"8"},{id:"9",key:"9"}];wi.prototype.Ae=function(){return xi};
var yi=[{caption:"Single",sa:ii,da:ji},{caption:"Double",sa:2,da:ji},{caption:"Triple",sa:3,da:ji},{caption:"Quadruple",sa:4,da:ji},{caption:"Single Up",sa:ii,da:11},{caption:"Single Down",sa:ii,da:13},{caption:"Single Up or Down",sa:ii,da:12}];u=wi.prototype;u.G=E("kemia.controller.plugins.BondEdit");
u.Gf=function(a){var b=Pa(xi,function(c){return c.id==a.identifier});b&&B(this.b.selected,function(c){var d=parseInt(b.id);if(c instanceof T){c=c;Q(this.b);for(var e=0;e<d;e++){var f=hi(c.v,c,ii,ji);if(f)c=V(f,c)}S(this.b,this.b.r);P(this.b);return k}return k},this)};
u.Ee=function(a){if(this.Ya&&!this.yg){var b=fi(this.b,a);this.b.selected.length=0;this.b.Z.style.cursor="default";a.currentTarget.p&&a.currentTarget.p.clear();a.currentTarget.p=undefined;if(b instanceof T){gi(this.b,b);this.b.Z.style.cursor="pointer";a.currentTarget.p=a.currentTarget.p?this.Gb(b,a.currentTarget.p):this.Gb(b);return k}else if(b instanceof W){gi(this.b,b);this.b.Z.style.cursor="pointer";a.currentTarget.p=a.currentTarget.p?this.sc(b,a.currentTarget.p):this.sc(b);return k}}return n};
u.ib=function(a){try{var b=this.b.selected;if(b.length)B(b,function(d){if(d instanceof T)if(this.Ya){Q(this.b);d=hi(d.v,d,this.Ya.sa,this.Ya.da);this.b.selected.length=0;gi(this.b,d);S(this.b,this.b.r);P(this.b);return k}if(d instanceof W)if(this.Ya)if(this.Ya.sa!=d.sa||this.Ya.da!=d.da||d.da!=ji){Q(this.b);var e=this.Ya.da!=ji&&d.da==this.Ya.da?new W(d.target,d.source,this.Ya.sa,this.Ya.da):new W(d.source,d.target,this.Ya.sa,this.Ya.da),f=d.v;mi(f,d);li(f,e);S(this.b,this.b.r);P(this.b);return k}},
this);else if(this.Ya){Q(this.b);this.ue(ki(a));S(this.b,this.b.r);P(this.b);return k}}catch(c){this.G.log(Bb,c,void 0)}};u.ue=function(a){a=pi((this.b.j.transform?this.b.j.transform:this.b.j.ca.transform).pb(),[a])[0];var b=new T("C",a.x,a.y);a=new U;oi(a,b);hi(a,b,this.Ya.sa,this.Ya.da);if(this.b.r.length>0){b=this.b.r[0];b instanceof zi&&qi(b,a)}else this.b.Mc([a])};u.Gb=function(a,b){return this.b.j.ca.Ab.la(a,"green",b)};u.sc=function(a,b){return this.b.j.ca.Kd.l(a).la(a,"green",b)};
u.yd=function(){this.Ya=undefined};u.queryCommandValue=function(a){if(a=="selectBond")return this.Ya};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Ai(){O.call(this)}A(Ai,O);Ai.prototype.Gc=Ah("clearEditor");Ai.prototype.Xb=function(a){return a=="clearEditor"};Ai.prototype.Uc=function(){try{Q(this.b);this.b.clear()}catch(a){this.G.info(a)}};Ai.prototype.Vi=Bh;/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Bi(){O.call(this)}A(Bi,O);u=Bi.prototype;u.Xb=function(a){return a=="erase"};u.Gc=Ah("erase");u.G=E("kemia.controller.plugins.Erase");u.Uc=function(a,b,c){this.ra=c};
u.Ee=function(a){if(this.ra){var b=fi(this.b,a);this.b.Z.style.cursor="default";a.currentTarget.p&&a.currentTarget.p.clear();if(b instanceof T){this.b.Z.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.p=a.currentTarget.p?this.Gb(b,a.currentTarget.p):this.Gb(b);return k}else if(b instanceof W){this.b.Z.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.p=a.currentTarget.p?this.sc(b,a.currentTarget.p):this.sc(b);return k}else if(b instanceof
U){this.b.Z.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.p=a.currentTarget.p?this.Ie(b,a.currentTarget.p):this.Ie(b);return k}else if(b instanceof Ph){this.b.Z.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.p=a.currentTarget.p?this.Mf(b,a.currentTarget.p):this.Mf(b);return k}else if(b instanceof Lh){this.b.Z.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';if(a.currentTarget.hl)a.currentTarget.p=
this.Lf(b,a.currentTarget.p);else a.currentTarget.hl=this.Lf(b)}else{a.currentTarget.p=undefined;return n}}return n};u.ib=function(a){var b=n;if(this.ra){Q(this.b);a=fi(this.b,a);if(a instanceof T){Ci(this,a);b=k}if(a instanceof W){Di(this,a);b=k}if(a instanceof U){(b=a.Ka)?Ei(b,a):Qa(this.b.r,a);S(this.b,this.b.r);b=k}if(a instanceof Ph){Qa(a.Ka.Ib,a);a.Ka=undefined;S(this.b,this.b.r);b=k}if(a instanceof Lh){Qa(a.Ka.ja,a);a.Ka=undefined;S(this.b,this.b.r);b=k}P(this.b)}return b};
function Ci(a,b){var c=b.v;B(b.g.M(),function(d){mi(c,d)});ni(c,b);c.e.length==0&&Ei(c.Ka,c);S(a.b,a.b.r)}function Di(a,b){var c=a.b.r,d=b.v;mi(d,b);var e=Fi(d);Ib(a.G,"fragements.length: "+e.length);var f=d.Ka;if(f){Ei(f,d);B(e,function(h){qi(f,h)})}S(a.b,c)}u.yd=function(){this.ra=n;this.b.Z.style.cursor="default"};u.queryCommandValue=function(a){var b=l;if(a=="erase")b=this.ra;return b};u.Gb=function(a,b){return this.b.j.ca.Ab.la(a,"#ff6666",b)};
u.sc=function(a,b){return this.b.j.ca.Kd.l(a).la(a,"#ff6666",b)};u.Mf=function(a,b){return this.b.j.gg.la(a,"#ff6666",b)};u.Lf=function(a,b){return this.b.j.nf.la(a,"#ff6666",b)};u.Ie=function(a,b){return this.b.j.ca.la(a,"#ff6666",b)};function Gi(a){a=String(a);var b;b=/^\s*$/.test(a)?n:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}g(Error("Invalid JSON string: "+a))}function Hi(a){return Ii(new Ji,a)}function Ji(){}function Ii(a,b){var c=[];Ki(a,b,c);return c.join("")}
function Ki(a,b,c){switch(typeof b){case "string":Li(a,b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==l){c.push("null");break}if(ia(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++){c.push(e);Ki(a,b[f],c);e=","}c.push("]");break}c.push("{");d="";for(e in b)if(b.hasOwnProperty(e)){f=b[e];if(typeof f!="function"){c.push(d);Li(a,e,c);c.push(":");Ki(a,f,c);d=","}}c.push("}");break;case "function":break;
default:g(Error("Unknown type: "+typeof b))}}var Mi={'"':'\\"',"\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","":"\\u000b"},Ni=/\uffff/.test("?")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Li(a,b,c){c.push('"',b.replace(Ni,function(d){if(d in Mi)return Mi[d];var e=d.charCodeAt(0),f="\\u";if(e<16)f+="000";else if(e<256)f+="00";else if(e<4096)f+="0";return Mi[d]=f+e.toString(16)}),'"')};function Oi(a,b){this.e=a;this.g=b;this.fa=Array(3);this.rb=l}Oi.prototype.lb=function(a,b){this.fa[a]=b};Oi.prototype.ya=function(){if(!this.rb){for(var a=0,b=0,c=0,d=this.e.length;c<d;c++){a+=this.e[c].a.x;b+=this.e[c].a.y}this.rb=new L(a/this.e.length,b/this.e.length)}return this.rb};Oi.prototype.toString=function(){return"kemia.ring.Ring \n\t"+C(this.e,function(a){return" "+a.toString()},this).join("\n\t")+"\n\t"+C(this.g,function(a){return" "+a.toString()},this).join("\n\t")+"\n\t"};function Pi(a){this.e=a}function Qi(a){var b=a.e.length-1;return a.e.length>2&&a.e[0]==a.e[b]}
Pi.prototype.splice=function(a){var b;var c=a.e,d=this.e.length-1,e=c.length-1;if(this.e[d]==c[0]||this.e[d]==c[e])b=this.e[d];else if(this.e[0]==c[0]||this.e[0]==c[e])b=this.e[0];else g("Couldn't splice - no intersection");c=[];d=0;for(e=this.e.length;d<e;d++)c.push(this.e[d]);this.e[0]==b&&c.reverse();if(a.e[0]==b){d=1;for(e=a.e.length;d<e;d++)c.push(a.e[d])}else for(d=a.e.length-2;d>=0;d--)c.push(a.e[d]);a:{a=1;for(b=c.length-1;a<b;a++)for(d=1;d<b;d++)if(a!=d)if(c[a]==c[d]){a=n;break a}a=k}if(!a)return l;
return new Pi(c)};function Ri(a){this.Ec=[];this.e=[];for(var b=0,c=a.ob();b<c;b++){var d=a.g[b];this.Ec.push(new Pi([d.source,d.target]))}b=0;for(c=Y(a);b<c;b++)this.e.push(a.e[b])}
Ri.prototype.remove=function(a,b){for(var c=[],d=0,e=this.Ec.length;d<e;d++){var f=this.Ec[d];if(Qi(f))D(f.e,a)&&c.push(f);else{var h=f.e.length-1;if(f.e[0]==a||f.e[h]==a)c.push(f)}}d=[];f=0;for(h=c.length;f<h;f++)Qi(c[f])&&d.push(c[f]);f=0;for(h=d.length;f<h;f++){D(c,d[f])&&Qa(c,d[f]);D(this.Ec,d[f])&&Qa(this.Ec,d[f])}e=[];f=0;for(h=c.length;f<h;f++)for(var i=f+1;i<h;i++){var j=c[i].splice(c[f]);j!=l&&e.push(j)}f=0;for(h=c.length;f<h;f++)D(this.Ec,c[f])&&Qa(this.Ec,c[f]);f=0;for(h=e.length;f<h;f++)!D(this.Ec,
e[f])&&e[f].e.length<=b+1&&this.Ec.push(e[f]);Qa(this.e,a);return d};function Si(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];e instanceof Array?b.push(Si(e)):b.push(e)}return b}function Ti(a,b,c){if(a.length)a.push(b[0].concat(c[0]));else a[0]=b[0].concat(c[0])}function Ui(a,b){return a.Cnum-b.Cnum}
function Vi(a,b,c,d){for(var e=0,f=b.length;e<f;e++){var h=b[e];if(a.length>=h.length){for(var i=k,j=0,m=h.length;j<m;j++)D(a,h[j])||(i=n);if(i)return k}j=0;for(m=a.length;j<m;j++)D(h,a[j])&&d[j]++}b=n;j=0;for(m=a.length;j<m;j++)if(d[a[j]]<c[a[j]]-1)b=k;if(b){j=0;for(m=a.length;j<m;j++)d[a[j]]++;return n}return k}function Wi(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=b.g[a[d]],h=Xi(b,f.source);f=Xi(b,f.target);D(c,h)||c.push(h);D(c,f)||c.push(f)}return c}
function Yi(a){var b=a.ob()-Y(a)+1;if(!b)return[];var c;c=Y(a);for(var d=[],e=0;e<c;e++){for(var f=[],h=0;h<c;h++)if(e==h)f.push(0);else Zi(a,a.e[e],a.e[h])?f.push(1):f.push(99999999);d.push(f)}e=[];for(f=0;f<c;f++){h=[];for(var i=0;i<c;i++){var j=Zi(a,a.e[f],a.e[i]);j?h.push([[Ka(a.g,j)]]):h.push([])}e.push(h)}f=[];for(h=0;h<c;h++){i=[];for(j=0;j<c;j++)i.push([]);f.push(i)}for(h=0;h<c;h++)for(i=0;i<c;i++)for(j=0;j<c;j++){var m=d[i][j],o=d[i][h]+d[h][j],p=e[i][h],q=e[h][j];if(o!=1E8)if(m>o){f[i][j]=
m==o+1?Si(e[i][j]):[];d[i][j]=o;e[i][j]=[p[0].concat(q[0])]}else if(m==o)p.length&&q.length&&Ti(e[i][j],p,q);else if(m==o-1)Ti(f[i][j],p,q);else d[i][j]=d[i][j]}c={D:d,Pe1:e,Pe2:f};d=c.D;e=c.Pe1;f=c.Pe2;h=d.length;c=[];for(i=0;i<h;i++)for(j=0;j<h;j++)d[i][j]==0||e[i][j].length==1&&f[i][j].length==0||c.push({Cnum:f[i][j].length?2*(d[i][j]+0.5):2*d[i][j],Pe1:e[i][j],Pe2:f[i][j]});c.sort(Ui);a:{d=[];e=[];f=0;for(h=Y(a);f<h;f++)e.push(a.e[f].ob());i=[];for(f=0;f<Y(a);f++)i[f]=0;f=0;for(h=c.length;f<h;f++){j=
c[f];if(j.Cnum%2){m=0;for(o=j.Pe2.length;m<o;m++){p=p=j.Pe1[0].concat(j.Pe2[m]);q=d;var t=e,v=i,y=Wi(p,a);if(p.length===y.length)Vi(y,q,t,v)||q.push(y);if(d.length==b){b=d;break a}}}else{m=0;for(o=j.Pe1.length-1;m<o;m++){p=p=j.Pe1[m].concat(j.Pe1[m+1]);q=d;t=e;v=i;y=Wi(p,a);if(p.length===y.length)Vi(y,q,t,v)||q.push(y);if(d.length==b){b=d;break a}}}}b=d}c=0;for(d=b.length;c<d;c++){e=b;f=c;h=b[c];i=a;j=[h[0]];m=i.e[h[0]];for(o=0;h.length!=j.length;){o++;if(o>1E3)break;p=1;for(q=h.length;p<q;p++){t=
i.e[j[j.length-1]];v=i.e[h[p]];if(!D(j,h[p]))if(Zi(i,t,v))j.push(h[p]);else Zi(i,m,v)&&Va(j,0,0,h[p])}}e[f]=j}return b};function $i(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c.push(b.e[a[d]]);e=[];d=0;for(var f=c.length-1;d<f;d++){var h=Zi(b,c[d],c[d+1]);h!=l&&e.push(h)}h=Zi(b,c[0],c[c.length-1]);h!=l&&e.push(h);return new Oi(c,e)};function aj(a,b,c,d,e,f){if(arguments.length==6)this.setTransform(a,b,c,d,e,f);else if(arguments.length!=0)g(Error("Insufficient matrix parameters"));else{this.ha=this.ua=1;this.Aa=this.Ha=this.jb=this.kb=0}}u=aj.prototype;u.ka=function(){return new aj(this.ha,this.Aa,this.Ha,this.ua,this.jb,this.kb)};u.setTransform=function(a,b,c,d,e,f){if(!ka(a)||!ka(b)||!ka(c)||!ka(d)||!ka(e)||!ka(f))g(Error("Invalid transform parameters"));this.ha=a;this.Aa=b;this.Ha=c;this.ua=d;this.jb=e;this.kb=f;return this};
u.scale=function(a,b){this.ha*=a;this.Aa*=a;this.Ha*=b;this.ua*=b;return this};u.translate=function(a,b){this.jb+=a*this.ha+b*this.Ha;this.kb+=a*this.Aa+b*this.ua;return this};u.rotate=function(a,b,c){a=bj(new aj,a,b,c);b=this.ha;c=this.Ha;this.ha=a.ha*b+a.Aa*c;this.Ha=a.Ha*b+a.ua*c;this.jb+=a.jb*b+a.kb*c;b=this.Aa;c=this.ua;this.Aa=a.ha*b+a.Aa*c;this.ua=a.Ha*b+a.ua*c;this.kb+=a.jb*b+a.kb*c;return this};
u.toString=function(){return"matrix("+[this.ha,this.Aa,this.Ha,this.ua,this.jb,this.kb].join(",")+")"};u.transform=function(a,b,c,d,e){var f=b;d=d;for(b=b+2*e;f<b;){e=a[f++];var h=a[f++];c[d++]=e*this.ha+h*this.Ha+this.jb;c[d++]=e*this.Aa+h*this.ua+this.kb}};u.pb=function(){var a=this.ha*this.ua-this.Ha*this.Aa;return new aj(this.ua/a,-this.Aa/a,-this.Ha/a,this.ha/a,(this.Ha*this.kb-this.ua*this.jb)/a,(this.Aa*this.jb-this.ha*this.kb)/a)};
function cj(a,b){return(new aj).setTransform(1,0,0,1,a,b)}function dj(a,b,c){return a.setTransform(b,0,0,c,0,0)}function bj(a,b,c,d){var e=Math.cos(b);b=Math.sin(b);return a.setTransform(e,b,-b,e,c-c*e+d*b,d-c*b-d*e)};function ej(a,b,c,d,e,f){aj.call(this);arguments.length==6&&this.setTransform(a,b,c,d,e,f)}A(ej,aj);function R(a,b){var c=C(b,function(f){return[f.x,f.y]}),d=ab(c);c=[];a.transform(d,0,c,0,d.length/2);d=[];for(var e=0;e<c.length;e+=2)d.push(new L(c[e],c[e+1]));return d}function pi(a,b){return R(a,b)}ej.prototype.pb=function(){var a=this.ha*this.ua-this.Ha*this.Aa;return new ej(this.ua/a,-this.Aa/a,-this.Ha/a,this.ha/a,(this.Ha*this.kb-this.ua*this.jb)/a,(this.Aa*this.jb-this.ha*this.kb)/a)};function U(a){this.g=[];this.e=[];this.name=a?a:"";this.id=undefined;this.xj=[];this.ag=k;this.Eb=[];this.Td=0}function li(a,b){var c=Xi(a,b.source),d=Xi(a,b.target);if(a.Eb[c]!=a.Eb[d]){var e;if(a.Eb[c]<a.Eb[d]){c=a.Eb[c];e=a.Eb[d]}else{e=a.Eb[c];c=a.Eb[d]}a.Td--;d=0;for(var f=a.e.length;d<f;d++)if(a.Eb[d]==c)a.Eb[d]=e}a.g.push(b);b.source.g.add(b);b.target.g.add(b);oi(a,b.source);oi(a,b.target);b.v=a}
function fj(a){var b=1.25;if(a.g.length)b=Ma(a.g,function(c,d){return c+d.Ai()},0)/a.g.length;return b}function Zi(a,b,c){a=b.g.M();for(var d=0,e=a.length;d<e;d++){var f=a[d];if(V(f,b)==c)return f}return l}function Xi(a,b){return Ka(a.e,b)}function ni(a,b){var c;if(b.constructor==Number)c=a.e[b];else if(b.constructor==T)c=b;var d=c.g.M();B(d,function(e){Qa(this.g,e)},a);c.g.clear();Qa(a.e,c);c.v=undefined}
function mi(a,b){var c;c=b.constructor==Number?a.g[b]:b;c.source.g.remove(c);c.target.g.remove(c);if(c.source.g.M().length==0){Qa(a.e,c.source);c.source.v=undefined}if(c.target.g.M().length==0){Qa(a.e,c.target);c.target.v=undefined}Qa(a.g,c);c.v=undefined;c.source=undefined;c.target=undefined}function Y(a){return a.e.length}u=U.prototype;u.ob=function(){return this.g.length};function oi(a,b){if(!D(a.e,b)){var c=a.e.length;a.Td++;a.Eb[c]=a.Td;a.e.push(b);b.v=a}}
function gj(a){if(a.ag){var b;if(a.ob()-Y(a)+a.Td){b=0;for(var c=a.e.length;b<c;b++){var d=a.e[b];d.index=b;d.nc=undefined;d.de=undefined;a.e[b].index=b}b=0;for(c=a.g.length;b<c;b++)a.g[b].index=b;if(c=Y(a)){b=$a(n,c);c=$a(n,c);d=[];var e=a.e[0];e.nc=0;d.push(e);for(b[0]=k;;){if(!d.length)break;e=d[0];Ra(d,0);for(var f=e.g.M(),h=0,i=f.length;h<i;h++){var j=f[h],m=j.index;if(!c[m]){c[m]=k;var o=V(j,e);j=o.index;if(b[j]){j=[];if(e.nc==o.nc){j.push(e);j.push(o)}else{o.de=k;var p=ui(o);m=0;for(var q=
p.length;m<q;m++){var t=p[m];t.nc==o.nc-1&&j.push(t)}}for(o=e.nc;;){j[0].de=k;j[1].de=k;o--;p=ui(j[0]);m=0;for(q=p.length;m<q;m++)if(p[m].nc==o){j[0]=p[m];break}p=ui(j[1]);m=0;for(q=p.length;m<q;m++)if(p[m].nc==o){j[1]=p[m];break}if(j[0]==j[1]){j[0].de=k;break}}}else{o.nc=e.nc+1;b[j]=k;d.push(o)}}}}}b=[];e=Y(a);c=$a(n,e);d=$a(n,e);e=$a(-1,e);f=0;for(h=Y(a);f<h;f++){j=a.e[f];if(!c[j.index])if(j.de){i=new U;q=[];q.push(j);c[0]=k;t=new T;t.Of=j.index;e[j.index]=0;for(oi(i,t);;){if(!q.length)break;o=
q[0];Ra(q,0);p=o.g.M();j=0;for(m=p.length;j<m;j++){var v=p[j];t=v.index;if(!d[t]){d[t]=k;v=V(v,o);t=v.index;if(v.de){if(c[t]){t=Zi(a,o,v);var y=new W(i.e[e[o.index]],i.e[e[v.index]]);y.Of=t.index}else{c[t]=k;q.push(v);t=new T;t.Of=v.index;e[v.index]=i.e.length;oi(i,t);v=Zi(a,o,v);y=new W(i.e[e[o.index]],t);y.Of=v.index}li(i,y)}}}}j=0;for(m=i.e.length;j<m;j++)i.e[j].index=j;j=0;for(m=i.g.length;j<m;j++)i.g[j].index=j;j=i.g.length-i.e.length+1;m=i;q=[];o=new Ri(m);p=0;for(t=Y(m);p<t;p++){v=o.remove(m.e[p],
6);for(y=0;y<v.length;y++){var H=v[y].e;Ra(H,H.length-1);for(var K=0,na=H.length;K<na;K++)H[K]=Xi(m,H[K]);q.push(H)}}Ya(q);m=q;if(m.length>=j){m=m;q=j;y=i;o=[];p=[];t=0;for(v=Y(y);t<v;t++)p.push(y.e[t].ob());y=$a(0,Y(y));t=0;for(v=m.length;t<v;t++){H=m[t];if(!Vi(H,o,p,y)){o.push(H);if(o.length==q)break}}q=o;if(q.length<j)q=Yi(i)}else q=Yi(i);j=0;for(m=q.length;j<m;j++){o=q[j];p=0;for(t=o.length;p<t;p++)o[p]=i.e[o[p]].Of}j=0;for(i=q.length;j<i;j++)b.push($i(q[j],a))}}b=b}else b=[];a.xj=b;a.ag=n}return a.xj}
u.ka=function(){var a=new U(this.name);B(this.e,function(b){oi(a,b)});B(this.g,function(b){li(a,b)});return a};function Fi(a){var b=a.ka();if(b.Td==1)return[b];var c=new nb;B(b.e,function(d){var e=b.Eb[Xi(b,d)];pb(c.Va,e)==n&&c.zb(e,new U);oi(c.l(e),d)});B(b.g,function(d){var e=b.Eb[Xi(b,d.source)];li(c.l(e),d)});return c.M()}function hj(a,b){for(var c=[],d=a.g.length,e=0;e<d;e++)if(a.g[e].source==b||a.g[e].target==b)c.push(a.g[e]);return c}
u.toString=function(){return"kemia.model.Molecule - name: "+this.name+"\n\t"+C(this.e,function(a){return" "+Xi(this,a)+": "+a.toString()},this).join("\n\t")+"\n\t"+C(this.g,function(a){return" "+Xi(this,a.source)+", "+Xi(this,a.target)+":  "+a.toString()},this).join("\n\t")+"\n\t"+C(gj(this),function(a){return a.toString()}).join("\n\t")};u.ya=function(){var a=ij(this);return new L((a.left+a.right)/2,(a.top+a.bottom)/2)};function ij(a){return Ud.apply(l,C(a.e,function(b){return b.a}))}
u.rotate=function(a,b){b!==undefined||(b=this.ya());var c=bj(new ej,N(a),b.x,b.y);B(this.e,function(d){d.a=R(c,[d.a])[0]})};u.scale=function(a){var b=dj(new ej,a,a);B(this.e,function(c){c.a=R(b,[c.a])[0]})};u.translate=function(a){B(this.e,function(b){b.a=M(b.a,a)})};
function jj(a,b,c,d,e,f){Ia(D(b.g,c));Ia(D(a.g,d));Ia(D(e.g.M(),c));Ia(D(f.g.M(),d));var h=fj(a)/fj(b);b.scale(h);h=Kh(xc(f.a,e.a));var i=V(d,f),j=V(c,e);b.rotate(180+Tg(Sg(e.a.x,e.a.y,j.a.x,j.a.y),Sg(i.a.x,i.a.y,f.a.x,f.a.y)),e.a);b.translate(h);var m=[c];B(e.g.M(),function(o){if(!D(m,o)){e==o.source?o.source=f:o.target=f;m.push(o);li(this,o)}},a);j=V(c,e);i=V(d,f);B(j.g.M(),function(o){if(!D(m,o)){j==o.source?o.source=i:o.target=i;li(this,o);m.push(o)}},a);c=La(b.g,function(o){return!D(m,o)});B(c,
function(o){li(this,o)},a);b.g.length=0;b.e.length=0;b.Ka&&Ei(b.Ka,b);delete b;a.ag=k;return a}function hi(a,b,c,d,e){var f=1.25,h=b.g.M();if(h.length)f=Ma(h,function(j,m){return j+wc(m.source.a,m.target.a)},0)/h.length;h=vi(b);if(h!=undefined){var i="C";if(e)i=e;e=new T(i,b.a.x+f*Math.cos(N(h)),b.a.y+f*Math.sin(N(h)));b=new W(b,e,c,d);oi(a,e);li(a,b);return b}}u.G=E("kemia.model.Molecule");/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function zi(){this.nh="";this.td=[];this.ja=[];this.Ib=[]}u=zi.prototype;u.G=E("kemia.model.Reaction");
u.lf=function(a){var b=this.Wc(),c=new Jh(0,0),d=ij(a);if(b.length>0){b=kj(b);if(d.left<=b.right&&b.left<=d.right&&d.top<=b.bottom&&b.top<=d.bottom)c=new Jh(b.right-d.left+3,0)}a.translate(c);if(!this.uh(a)){c=this.Vc();d=ij(a).right+3;if(this.ja.length>0)d-=this.ja[0].source.x;var e=new Jh(d,0);B(this.ja,function(f){f.translate(e)});B(this.Ib,function(f){f.translate(e)});B(c,function(f){f.translate(e)})}Ia(this.uh(a));this.Ib.length=0;qi(this,a)};u.Wc=function(){return La(this.td,this.uh,this)};
u.Vc=function(){return La(this.td,this.th,this)};function qi(a,b){a.td.push(b);b.Ka=a}u.Cg=function(a,b){if(this.ja.length==0){var c=this.Wc();if(c.length>0){c=kj(c);c=new Lh(new L(c.right+3,(c.top+c.bottom)/2))}else c=new Lh(new L(3,0));Sh(this,c)}c=ij(a);var d=this.Vc(),e=0;if(d.length==0||b)e+=this.ja[0].target.x;else{d=kj(d);e+=d.right}e+=3;e-=c.left;if(e!=0){a.translate(new Jh(e,0));this.Ib.length=0}this.th(a);qi(this,a)};u.uh=function(a){return this.ja.length>0?this.ja[0].Ef(a.ya())==Oh:k};
u.th=function(a){return this.ja.length>0?this.ja[0].Ef(a.ya())==Nh:n};function Ei(a,b){Qa(a.td,b);b.Ka=undefined}function Sh(a,b){if(a.ja.length)a.ja[0].Ka=undefined;a.ja.length=0;a.ja[0]=b;b.Ka=a}u.kg=function(a){this.ja.length>0&&this.ja[0].kg(a)};u.ig=function(a){this.ja.length>0&&this.ja[0].ig(a)};u.Ik=r("Ib");
u.fh=function(a){var b;Ya(a,function(c,d){return Za(ij(c).left,ij(d).left)});B(a,function(c){if(b){var d,e=ij(b);d=ij(c);e=new Jh(e.right,e.top);d=e.add((new Jh(d.left,d.bottom)).cf(e).scale(0.5));d=new Ph(d);this.Ib.push(d);d.Ka=this}b=c},this)};function kj(a){a=ab(C(a,function(b){return b.e}));a=C(a,function(b){return b.a});return a.length>0?Ud.apply(l,a):l}
function lj(a){if(a.ja.length>0){var b=a.ja[0],c=kj(a.Wc());a=kj(a.Vc());if(c||a){c||(c=new Td(a.top,a.left-1,a.bottom,a.left-1));a||(a=new Td(c.top,c.right+1,c.bottom,c.right+1));c=new Jh(c.right,c.top);c=c.add((new Jh(a.left,a.bottom)).cf(c).scale(0.5));c=Kh(c).cf(Kh(b.ya()));b.translate(c)}}}u.translate=function(a){B(this.td,function(b){b.translate(a)});B(this.Ib,function(b){b.translate(a)});B(this.ja,function(b){b.translate(a)})};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function mj(a){if(a.sa==ii)return"SINGLE_BOND";if(a.sa==2)return"DOUBLE_BOND";if(a.sa==3)return"TRIPLE_BOND";if(a.sa==4)return"QUADRUPLE_BOND";g(Error("Invalid bond type ["+a.toString()+"]"))}function nj(a){if(a.da==11)return"SINGLE_BOND_UP";if(a.da==13)return"SINGLE_BOND_DOWN";if(a.da==12)return"SINGLE_BOND_UP_OR_DOWN";return"NOT_STEREO"}
function oj(a,b,c,d){switch(a){case "SINGLE_BOND":switch(b){case "NOT_STEREO":return new W(c,d);case "SINGLE_BOND_UP":return new W(c,d,ii,11);case "SINGLE_BOND_UP_OR_DOWN":return new W(c,d,ii,12);case "SINGLE_BOND_DOWN":return new W(c,d,ii,13);default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}case "DOUBLE_BOND":return new W(c,d,2);case "TRIPLE_BOND":return new W(c,d,3);case "QUADRUPLE_BOND":return new W(c,d,4);case "AROMATIC":return new W(c,d,undefined,undefined,k);default:g(Error("invalid bond type/stereo ["+
a+"]/["+b+"]"))}}function pj(a){a=a.constructor==String?Gi(a):a;var b=new U;b.name=a.name;b.id=a.id;B(a.atoms,function(c){oi(b,new T(c.symbol,c.coord.x,c.coord.y,c.charge))});B(a.bondindex,function(c){li(b,oj(c.type,c.stereo,b.e[c.source],b.e[c.target]))});return b}
function qj(a){var b=C(a.e,function(d){return{symbol:d.Q,coord:{x:d.a.x,y:d.a.y},charge:d.Za}}),c=C(a.g,function(d){var e=mj(d),f=nj(d);Xi(a,d.source);Xi(a,d.target);return{source:Xi(a,d.source),target:Xi(a,d.target),type:e,stereo:f}});return{name:a.name,id:a.id,atoms:b,bondindex:c}}function rj(a){return{source:{x:a.source.x,y:a.source.y},target:{x:a.target.x,y:a.target.y}}}function sj(a){return{x:a.a.x,y:a.a.y}}
function tj(a,b){var c;c=a.constructor==String?Gi(a):a;var d=new zi,e=[];if(c.reactants)e=C(c.reactants,pj);var f=[];if(c.products)f=C(c.products,pj);d.nh=c.header;if(c.arrows)B(c.arrows,function(h){Sh(d,new Lh(new L(h.source.x,h.source.y),new L(h.target.x,h.target.y)))});else f.length>0&&Sh(d,new Lh);d.kg(c.reagents_text);d.ig(c.conditions_text);c.pluses&&B(c.pluses,function(h){h=new Ph(new L(h.x,h.y));d.Ib.push(h);h.Ka=d});B(e,function(h){d.lf(h)});B(f,function(h){d.Cg(h,b)});c.arrows||lj(d);if(d.Ib.length==
0){d.fh(d.Wc());d.fh(d.Vc())}return d}function uj(a){var b=a.nh,c=C(a.Wc(),qj),d=C(a.Vc(),qj),e=C(a.ja,rj),f=C(a.Ib,sj),h;if(a.ja.length>0)h=a.ja[0].Eh;var i;if(a.ja.length>0)i=a.ja[0].Lg;return{header:b,reactants:c,products:d,reagents_text:h,conditions_text:i,arrows:e,pluses:f}}E("kemia.io.json");/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function vj(){O.call(this)}A(vj,O);vj.prototype.G=E("kemia.controller.plugins.MoleculeEdit");vj.prototype.Xb=function(a){return a=="selectMoleculeTemplate"};vj.prototype.Gc=Ah("selectMoleculeTemplate");var wj=[{id:"benzene",key:"a"}];u=vj.prototype;u.Ae=function(){return wj};
u.Gf=function(a){var b=Pa(wj,function(e){return e.id==a.identifier});if(b){var c=Pa(xj,function(e){return e.name==b.id}),d=this.b.selected;if(d.length)B(d,function(e){if(e instanceof T){Q(this.b);yj(this,e,c);S(this.b,this.b.r);P(this.b);return k}if(e instanceof W){Q(this.b);zj(this,e,c);S(this.b,this.b.r);P(this.b);return k}},this);else return n}};u.Uc=function(a,b){this.ed=b};
u.ib=function(a){var b=this.b.selected;if(b.length&&this.ed)B(b,function(c){if(c instanceof T){Q(this.b);var d=Ta(c.v.e),e=yj(this,c,this.ed);e=La(e.e,function(f){return!D(d,f)});Aj(this,a,e,c);S(this.b,this.b.r);P(this.b);return k}if(c instanceof W){Q(this.b);zj(this,c,this.ed);S(this.b,this.b.r);P(this.b);return k}},this);else if(this.ed){Q(this.b);this.ue(pi(this.b.j.transform?this.b.j.transform.pb():this.b.j.ca.transform.pb(),[ki(a)])[0],this.ed);S(this.b,this.b.r);P(this.b);return k}};
u.Ee=function(a){if(this.ed){var b=fi(this.b,a);this.b.selected.length=0;this.b.Z.style.cursor="default";a.currentTarget.p&&a.currentTarget.p.clear();a.currentTarget.p=undefined;if(b instanceof T){gi(this.b,b);this.b.Z.style.cursor="pointer";a.currentTarget.p=a.currentTarget.p?this.Gb(b,a.currentTarget.p):this.Gb(b);return k}else if(b instanceof W){gi(this.b,b);this.b.Z.style.cursor="pointer";a.currentTarget.p=a.currentTarget.p?this.sc(b,a.currentTarget.p):this.sc(b);return k}}return n};
u.Gb=function(a,b){return this.b.j.ca.Ab.la(a,"yellow",b)};u.sc=function(a,b){return this.b.j.ca.Kd.l(a).la(a,"yellow",b)};
function Aj(a,b,c,d){var e=d.a,f=new pf(a.b.Z);f.fk=d.v;f.rb=e;f.Bc=R(a.b.j.transform?a.b.j.transform:a.b.j.ca.transform,[e])[0];f.hb=ki(b);f.ne=Sg(f.Bc.x,f.Bc.y,f.hb.x,f.hb.y);f.w=a.b;f.addEventListener("drag",function(){f.fk.Sk.clear();f.tb=f.tb||f.vb;f.ub=f.ub||f.wb;var h=Sg(f.Bc.x,f.Bc.y,f.hb.x+(f.vb-f.tb),f.hb.y+(f.wb-f.ub))-f.ne;h-=h%30;f.ne+=h;var i=bj(new ej,-N(h),f.rb.x,f.rb.y);B(c,function(j){j.a=R(i,[j.a])[0]});S(f.w,f.w.r)});f.addEventListener("end",function(){f.$()});f.yc(b)}
u.ue=function(a,b){if(b)var c=pj(b);var d=xc(a,c.ya());c.translate(d);if(this.b.r.length>0){d=this.b.r;var e=d[0];if(e instanceof zi)qi(e,c);else e instanceof U&&d.push(c)}else qi(new zi,c)};function zj(a,b,c){a=pj(c);jj(b.v,a,a.g[0],b,a.g[0].target,b.source)}function yj(a,b,c){a=hi(b.v,b,ii,ji);var d=V(a,b);c=pj(c);var e=c.e[0],f=hi(c,e,ii,ji);return jj(b.v,c,f,a,e,d)}u.G=E("kemia.controller.plugins.MoleculeEdit");u.yd=function(){this.ed=undefined};u.queryCommandValue=function(a){if(a=="selectMoleculeTemplate")return this.ed};
u.bh=function(a){return La(C(a.e,function(b){var c=Bj(this.b.Oe,{x:b.a.x,y:b.a.y},this);c=La(c,function(d){if(d instanceof T)if(!D(a.e,d))return k;return n});return c.length>0?[b,c[0]]:n},this),function(b){return b!=n},this)};
var xj=[{name:"benzene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,
target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclohexane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,
z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:1,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane-house",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},
{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"naphthalene",
atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:0,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:3,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:0,z:0},charge:0}],bondindex:[{source:0,
target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:6,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:6,target:7,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:7,target:8,type:"SINGLE_BOND",stereo:"NOT_STEREO"},
{source:8,target:9,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:9,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclobutane",atoms:[{symbol:"C",coord:{x:0,y:0},charge:0},{symbol:"C",coord:{x:0,y:1.5},charge:0},{symbol:"C",coord:{x:-1.5,y:1.5000000000000002},charge:0},{symbol:"C",coord:{x:-1.5000000000000002,y:1.1102230246251565E-16},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopropane",atoms:[{symbol:"C",coord:{x:0,y:0},charge:0},{symbol:"C",coord:{x:0,y:1.5},charge:0},{symbol:"C",coord:{x:-1.2990381056766582,y:0.7500000000000001},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]}];/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Cj(){O.call(this);this.ra={};this.ra[Dj]=k;this.rh=n}A(Cj,O);var Dj="move",Ej=gb({mm:Dj,qm:"rotate"});u=Cj.prototype;u.Xb=function(a){return a in Ej};u.Gc=Ah("move");u.yd=function(){this.ra[Dj]=n;this.ra.rotate=n};u.Uc=function(a,b,c){this.ra[a]=c};
u.Ee=function(a){if((this.ra[Dj]||this.ra.rotate)&&!this.rh){var b=fi(this.b,a);this.b.selected.length=0;this.b.Z.style.cursor="default";a.currentTarget.p&&a.currentTarget.p.clear();if(this.ra.rotate){if(b instanceof U){gi(this.b,b);this.b.Z.style.cursor='url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';a.currentTarget.p=this.Ie(b,a.currentTarget.p);return k}}else if(b instanceof T){gi(this.b,b);this.b.Z.style.cursor="move";a.currentTarget.p=this.Gb(b,a.currentTarget.p);return k}else if(b instanceof
W){if(b.source.g.M().length==1||b.target.g.M().length==1){gi(this.b,b);this.b.Z.style.cursor="move";a.currentTarget.p=this.sc(b,a.currentTarget.p)}return k}else if(b instanceof U){gi(this.b,b);this.b.Z.style.cursor="move";a.currentTarget.p=this.Ie(b,a.currentTarget.p);return k}else if(b instanceof Lh){gi(this.b,b);if(!a.shiftKey){this.b.Z.style.cursor="move";a.currentTarget.p=this.Lf(b,a.currentTarget.p);return k}}else if(b instanceof Ph){gi(this.b,b);if(!a.shiftKey){this.b.Z.style.cursor="move";
a.currentTarget.p=this.Mf(b,a.currentTarget.p);return k}}else if(!b){this.b.Z.style.cursor="all-scroll";return k}return n}};
u.ib=function(a){if(this.ra[Dj]||this.ra.rotate){a.currentTarget.p&&a.currentTarget.p.clear();a.currentTarget.p=undefined;this.rh=k;var b=fi(this.b,a);if(this.ra.rotate)if(b instanceof U){Q(this.b);this.b.Z.style.cursor='url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';Fj(this,a,b);P(this.b);return k}if(this.ra[Dj]){if(b instanceof T){Q(this.b);Gj(this,a,b);P(this.b);return k}if(b instanceof W){Q(this.b);Hj(this,a,b);P(this.b);return k}if(b instanceof U){Q(this.b);if(a.shiftKey){this.b.Z.style.cursor=
'url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';Fj(this,a,b)}else Ij(this,a,b);P(this.b);return k}if(b instanceof Ph){Q(this.b);Jj(this,a,b);P(this.b);return k}if(b instanceof Lh){Q(this.b);Kj(this,a,b);P(this.b);return k}if(!b){Q(this.b);Lj(this,a);P(this.b);return k}}}return n};
u.pd=function(a){try{this.rh=n;var b=La(Mj(this.b,a),function(e){return e instanceof T&&e!==this.Wg},this),c=b.length>0?b[0]:undefined;if(this.Wg&&c instanceof T){Q(this.b);U.pn(this.Wg,c);this.Wg=undefined;S(this.b,this.b.r);P(this.b);return k}}catch(d){this.G.log(Bb,d,void 0)}};u.Gb=function(a,b){b||(b=new Nj);this.b.j.ca.Ab.la(a,"#3366ff",b);return b};u.sc=function(a,b){b||(b=new Nj);return this.b.j.ca.Kd.l(a).la(a,"#3366ff",b)};
u.Ie=function(a,b){b||(b=new Nj);var c="#3366ff";if(a.Ka&&a.Ka.th(a))c="purple";this.b.j.ca.la(a,c,b);return b};u.Lf=function(a,b){b||(b=new Nj);return b.add(this.b.j.nf.la(a,"#3366ff"))};u.Mf=function(a,b){b||(b=new Nj);return b.add(this.b.j.gg.la(a,"#3366ff"))};u.queryCommandValue=function(a){return this.ra[a]};
function Oj(a,b){var c=a.v,d=b.v;B(b.g.M(),function(h){var i=h.ka();b==i.source?i.source=a:i.target=a;li(d,i);mi(d,h)});ni(d,b);if(c!==d){B(c.e,function(h){oi(d,h)});B(c.g,function(h){h=h.ka();h.v=undefined;li(d,h)});B(c.e,function(h){ni(c,h)});B(c.g,function(h){mi(c,h)});Ei(c.Ka,c);delete c}var e=d.ka(),f=d.Ka;Ei(f,d);qi(f,e);return e}
function Pj(a,b){var c=b.v;B(b.g.M(),function(f){var h=f.ka();b==h.source?h.source=a:h.target=a;li(c,h);mi(c,f)});ni(c,b);var d=c.ka();B(d.g,aa());var e=c.Ka;Ei(e,c);qi(e,d);return d}
function Gj(a,b,c){var d=new pf(a.b.Z);d.bc=b.clientX;d.cc=b.clientY;d.Fg=c;d.w=a.b;d.addEventListener("drag",function(e){d.sb&&B(d.sb,function(h){h.clear()});d.sb=[];d.Fg.v.ia&&d.Fg.v.ia.clear();new cj(e.clientX-d.bc,e.clientY-d.cc);var f=pi(d.w.j.transform?d.w.j.transform.pb():d.w.j.ca.transform.pb(),[new L(e.clientX,e.clientY),new L(d.bc,d.cc)]);c.a=M(c.a,xc(f[0],f[1]));d.bc=e.clientX;d.cc=e.clientY;d.zg=Sa(c,C(c.g.M(),function(h){var i=V(h,c);return Sa(i,C(i.g.M(),function(j){return V(j,i)}))}));
e=this.b.bh([c],d.zg);d.gb=Wa(e,0,1);B(e,function(h){d.sb.push(d.w.j.ca.Ab.la(h[0]));d.sb.push(d.w.j.ca.Ab.la(h[1]))});d.w.j.ca.R(d.Fg.v,d.w.j.ca.transform)},undefined,a);d.addEventListener("end",function(){try{B(d.gb,function(f){f[0].v==f[1].v?Pj(f[0],f[1]):Oj(f[0],f[1])},this);S(d.w,d.w.r);d.gb=[];d.$()}catch(e){this.G.log(Bb,e,void 0)}},undefined,a);d.yc(b)}
function Hj(a,b,c){var d,e;if(c.source.g.M().length==1){d=c.target;e=c.source}else if(c.target.g.M().length==1){d=c.source;e=c.target}if(d){var f=new pf(a.b.Z),h=d.a;f.Bc=R(a.b.j.transform?a.b.j.transform:a.b.j.ca.transform,[h])[0];f.hb=ki(b);f.ne=Sg(f.Bc.x,f.Bc.y,f.hb.x,f.hb.y);f.gb=[];f.of=c;f.w=a.b;f.addEventListener("drag",function(i){try{f.sb&&B(f.sb,function(y){y.clear()});f.sb=[];f.tb=f.tb||f.vb;f.ub=f.ub||f.wb;var j=f.vb-f.tb,m=f.wb-f.ub,o=Sg(f.Bc.x,f.Bc.y,f.hb.x+j,f.hb.y+m)-f.ne;o-=o%30;
f.ne+=o;var p=pi(bj(new ej,-N(o),h.x,h.y),[f.of.source.a,f.of.target.a]);f.of.source.a=p[0];f.of.target.a=p[1];S(f.w,f.w.r);var q=fi(f.w,i,new L(f.hb.x+j,f.hb.y+m));if(q instanceof T&&q.v==e.v){var t=Sa(d,C(d.g.M(),function(y){return V(y,d)}));if(!D(t,q)){f.gb=[[q,e]];f.sb.push(f.w.j.ca.Ab.la(e));f.sb.push(f.w.j.ca.Ab.la(q))}}}catch(v){this.G.log(Bb,v,void 0)}},undefined,a);f.addEventListener("end",function(){try{B(f.gb,function(j){j[0].v==j[1].v&&Pj(j[0],j[1])},this);S(f.w,f.w.r);f.gb=[];f.$()}catch(i){this.G.log(Bb,
i,void 0)}finally{this.yg=n}},undefined,a);a.yg=k;f.yc(b)}}function Jj(a,b,c){var d=new pf(a.b.Z);d.bc=b.clientX;d.cc=b.clientY;d.Ch=c;d.w=a.b;d.addEventListener("drag",function(e){new cj(e.clientX-d.bc,e.clientY-d.cc);var f=pi(d.w.j.transform.pb(),[new L(e.clientX,e.clientY),new L(d.bc,d.cc)]);d.Ch.a=M(c.a,xc(f[0],f[1]));d.Ch.ia.clear();d.w.j.gg.R(d.Ch,d.w.j.transform);d.bc=e.clientX;d.cc=e.clientY});d.addEventListener("end",function(){S(d.w,d.w.r);d.$()});d.yc(b)}
function Kj(a,b,c){var d=new pf(a.b.Z);d.bc=b.clientX;d.cc=b.clientY;d.wm=c;d.w=a.b;d.addEventListener("drag",function(e){new cj(e.clientX-d.bc,e.clientY-d.cc);var f=pi(d.w.j.transform.pb(),[new L(e.clientX,e.clientY),new L(d.bc,d.cc)]);f=xc(f[0],f[1]);c.source=M(c.source,f);c.target=M(c.target,f);c.ia.clear();d.w.j.nf.R(c,d.w.j.transform);d.bc=e.clientX;d.cc=e.clientY});d.addEventListener("end",function(){S(d.w,d.w.r);d.$()});d.yc(b)}
function Ij(a,b,c){var d=new pf(a.b.Z);d.rb=Qj(a.b,c.ya());d.tb=l;d.ub=l;d.fi=0;d.gi=0;d.gb=[];d.v=c;d.w=a.b;d.addEventListener("drag",function(){d.sb&&B(d.sb,function(j){j.clear()});d.sb=[];d.gb=[];d.tb=d.tb||d.vb;d.ub=d.ub||d.wb;var e=d.vb-d.tb,f=d.wb-d.ub,h=e-d.fi,i=f-d.gi;d.v.ia.lg(e,f,0,0,0);e=d.w.j.transform?d.w.j.transform:d.w.j.ca.transform;d.v.translate(new Jh(h/e.ha,i/e.ua));d.fi=d.vb-d.tb;d.gi=d.wb-d.ub;d.zg=c.e;h=this.b.bh(c.e,d.zg);if(h.length>1)d.gb=Wa(h,0,2);B(d.gb,function(j){d.sb.push(d.w.j.ca.Ab.la(j[0]));
d.sb.push(d.w.j.ca.Ab.la(j[1]))})},undefined,a);d.addEventListener("end",function(){try{if(d.gb.length==2){var e=d.gb[0][1],f=d.gb[1][1],h=Pa(e.g.M(),function(p){return V(p,e)==f}),i=d.gb[0][0],j=d.gb[1][0],m=Pa(i.g.M(),function(p){return V(p,i)==j});h&&m&&jj(i.v,e.v,h,m,e,i)}S(d.w,d.w.r);d.gb=[];d.$()}catch(o){this.G.log(Bb,o,void 0)}},undefined,a);d.yc(b)}
function Lj(a,b){var c=new pf(a.b.Z);c.addEventListener("drag",function(){var d=this.b.j.transform,e=c.screenX-c.ll,f=c.screenY-c.ml;if(e||f){var h=new Jh(e/d.ha,f/d.ua);B(this.b.r,function(i){i instanceof zi&&i.translate(h)});S(this.b,this.b.r)}c.ll=c.screenX;c.ml=c.screenY},undefined,a);c.addEventListener("end",function(){S(this.b,this.b.r);c.$()},undefined,a);c.yc(b)}
function Fj(a,b,c){var d=new pf(a.b.Z);d.rb=pi(a.b.j.transform?a.b.j.transform:a.b.j.ca.transform,[c.ya()])[0];d.hb=ki(b);d.hk=Sg(d.rb.x,d.rb.y,d.hb.x,d.hb.y);d.tb=l;d.ub=l;d.ia=c.ia;d.v=c;d.w=a.b;d.addEventListener("drag",function(){d.tb=d.tb||d.vb;d.ub=d.ub||d.wb;d.ei=Sg(d.rb.x,d.rb.y,d.hb.x+(d.vb-d.tb),d.hb.y+(d.wb-d.ub))-d.hk;d.ia.lg(0,0,d.ei,d.rb.x,d.rb.y)});d.addEventListener("end",function(){d.v.rotate(-d.ei,d.v.ya());S(d.w,d.w.r);d.$()});d.yc(b)}u.G=E("kemia.controller.plugins.Move");/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Rj(){O.call(this);this.rl=100;this.Ed=[];this.Ue=[];this.Pg=[]}A(Rj,O);var Sj=[{id:"undo",key:27}];Rj.prototype.Ae=function(){return Sj};Rj.prototype.Gf=aa();var Tj=gb({sm:"undo",pm:"redo"});u=Rj.prototype;u.Gc=s("UndoRedo");u.Xb=function(a){return a in Tj};u.Uc=function(a){try{if(a=="undo")Uj(this,this.Ed,this.Ue);else a=="redo"&&Uj(this,this.Ue,this.Ed)}catch(b){this.G.info(b)}};
u.Uk=function(a){try{var b=Vj(this,a.target);if(this.Pg!=b){this.Ed.push(b);if(this.Ed.length>this.rl){this.Ed.shift();var c=this.Ue.length;this.Ue.length=0;this.dispatchEvent({type:Wj,state:b});if(this.Ed.length==1||c)this.dispatchEvent(Xj)}}this.Pg=b}catch(d){this.G.info(d)}};function Vj(a,b){var c=b.r,d="[]";if(c)d=C(c,function(e){if(e instanceof zi)return uj(e);else if(e instanceof U)return qj(e)});return d}
function Uj(a,b,c){if(b.length){var d=b.pop();c.push(d);S(a.b,C(d,function(e){return e.e?pj(e):tj(e,k)}));if(b.length==0||c.length==1)a.dispatchEvent(Xj)}}u.vf=function(a){Rj.h.vf.call(this,a);this.xf=new Qd(this);this.xf.u(a,Yj,this.Uk)};u.Ug=function(a){a.zm();this.xf.$();this.Pg=this.xf=l};u.m=function(){Rj.h.m.call(this);this.xf.$();this.b=l};var Xj="state_change",Wj="state_added";Rj.prototype.G=E("kemia.controller.plugins.UndoRedo");
Rj.prototype.queryCommandValue=function(a){var b=n;if(a=="undo")b=this.Ed.length>0;else if(a=="redo")b=this.Ue.length>0;return b};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Zj(){O.call(this)}A(Zj,O);var $j={um:"zoomIn",vm:"zoomOut"},ak=gb($j);Zj.prototype.Gc=Ah($j);Zj.prototype.Xb=function(a){return a in ak};Zj.prototype.execCommand=function(a){try{var b=this.b.j.Ze;if(a=="zoomIn")this.b.ie(b*1.1);else a=="zoomOut"&&this.b.ie(b*0.9);S(this.b,this.b.r)}catch(c){this.G.info(c)}};Zj.prototype.G=E("kemia.controller.plugins.Zoom");function bk(a){var b=new rg,c=new vg("File",b),d=xh("clearEditor","Clear all","New");b.Cc(d);c.Jb=k;a.push(c);a.push(new Hg);b=ck("undo","Undo","","tr-icon tr-undo");b.Jb=k;a.push(b);b=ck("redo","Redo","","tr-icon tr-redo");b.Jb=k;a.push(b);a.push(new Hg);b=yh(Dj,"Move","","tr-icon tr-move");b.Jb=k;a.push(b);b=yh("rotate","Rotate","","tr-icon tr-rotate");b.Jb=k;a.push(b);b=yh("erase","Erase","","tr-icon tr-erase");b.Jb=k;a.push(b);a.push(new Hg);return a}
function dk(a){a.push(xh("zoomIn","Zoom In","","tr-icon tr-zoom-in"));a.push(xh("zoomOut","Zoom Out","","tr-icon tr-zoom-out"));a.push(new Hg);return a}
function ek(a){var b=zh("selectSymbol","Atomic Symbol","Symbol");b.Jb=k;b.hf=function(i){i=i&&i.length>0?i:l;i!=b.Ua()&&b.Ia(i)};var c=new rg;c.wa(new Lg(Kc("DIV",{style:"color:grey"},"H")),k);c.wa(new Lg(Kc("DIV",{style:"color:black"},"C")),k);c.wa(new Lg(Kc("DIV",{style:"color:blue"},"N")),k);c.wa(new Lg(Kc("DIV",{style:"color:red"},"O")),k);c.wa(new Lg(Kc("DIV",{style:"color:yellow"},"S")),k);c.wa(new Lg(Kc("DIV",{style:"color:orange"},"P")),k);c.wa(new Lg(Kc("DIV",{style:"color:green"},"F")),
k);c.wa(new Lg(Kc("DIV",{style:"color:green"},"Cl")),k);c.wa(new Lg(Kc("DIV",{style:"color:DarkRed"},"Br")),k);c.wa(new Lg(Kc("DIV",{style:"color:purple"},"I")),k);c.wa(new qg,k);c.wa(new Lg(Kc("DIV",{style:"color:black"},"R1")),k);c.wa(new Lg(Kc("DIV",{style:"color:black"},"R2")),k);b.cd(c);a.push(b);var d=zh("selectBond","Bond Type","Bond");d.Jb=k;d.hf=function(i){i!=d.Ua()&&d.Ia(i)};var e=new rg;B(yi,function(i){e.wa(new Lg(i.caption,i),k)});d.cd(e);a.push(d);var f=zh("selectMoleculeTemplate",
"Template","Template");f.Jb=k;f.hf=function(i){i!=f.Ua()&&f.Ia(i)};var h=new rg;B(xj,function(i){h.wa(new Lg(i.name,i),k)});f.cd(h);a.push(f);return a}function fk(a){var b=bk([]);b=dk(b);b=ek(b);return gk(b,a)}
function gk(a,b){for(var c=zc(b),d=[],e=0,f;f=a[e];e++){if(x(f)){var h=void 0;if(f=hk[f]){h=f.factory||yh;var i=f.vk,j=f.xn,m=f.caption,o=f.ym,p=c||zc();h=h(i,j,m,o,l,p);if(f.Jb)h.Jb=k}f=h}f&&d.push(f)}c=zc(b);c=new Ng(Mg.qa(),dg,c);e=fe(b);c.dd(e);c.vc(n);for(f=0;h=d[f];f++){$e(h,32,n);h.dd(e);c.wa(h,k)}c.R(b);return c}function ck(a,b,c,d,e,f){var h=xh(a,b,c,d,e,f);h.hf=function(i){h.uc(i)};return h}z("Format");z("Format");z("Undo");z("Redo");z("Font");z("Font size");z("Text color");z("Bold");z("Italic");
z("Underline");z("Text background color");z("Add or remove link");z("Numbered list");z("Bullet list");z("Decrease indent");z("Increase indent");z("Align left");z("Align center");z("Align right");z("Justify");z("Remove formatting");z("Insert image");z("Strikethrough");z("Left-to-right");z("Right-to-left");z("Quote");z("Edit HTML source");z("Link");z("Subscript");z("Superscript");z("Edit HTML");for(var hk={},ik=[],jk=0,kk;kk=ik[jk];jk++)hk[kk.vk]=kk;delete ik;var lk,mk,nk,ok,pk,qk,rk;rk=qk=pk=ok=nk=mk=lk=n;var sk=$b();if(sk)if(sk.indexOf("Firefox")!=-1)lk=k;else if(sk.indexOf("Camino")!=-1)mk=k;else if(sk.indexOf("iPhone")!=-1||sk.indexOf("iPod")!=-1)nk=k;else if(sk.indexOf("iPad")!=-1)ok=k;else if(sk.indexOf("Android")!=-1)pk=k;else if(sk.indexOf("Chrome")!=-1)qk=k;else if(sk.indexOf("Safari")!=-1)rk=k;var tk=mk,uk=nk,vk=ok,wk=pk,xk=qk,yk=rk;var zk;a:{var Ak="",Bk,Ck;if(lk)Bk=/Firefox\/([0-9.]+)/;else if(F||dc){zk=ic;break a}else if(xk)Bk=/Chrome\/([0-9.]+)/;else if(yk)Bk=/Safari\/([0-9.]+)/;else if(uk||vk){Bk=/Version\/(\S+).*Mobile\/(\S+)/;Ck=k}else if(wk)Bk=/Android\s+([0-9.]+)(?:.*Version\/([0-9.]+))?/;else if(tk)Bk=/Camino\/([0-9.]+)/;if(Bk){var Dk=Bk.exec($b());Ak=Dk?Ck?Dk[1]+"."+Dk[2]:Dk[2]||Dk[1]:""}zk=Ak};F&&J("7.0");G&&J("1.8");F||dc||G&&J("1.9");F||I&&J("525");I&&J("531");I&&J("528");G&&J("1.9")||F||dc||I&&J("531");G||I&&J("526");xk&&Fa(zk,"4")>=0||yk&&Fa(zk,"533");function Ek(){this.cb=[];this.ea=[];this.Qb=[]}Ek.prototype.mc=l;Ek.prototype.db=l;Ek.prototype.zd=k;var Fk=[];Fk[0]=2;Fk[1]=2;Fk[2]=6;Fk[3]=6;Fk[4]=0;u=Ek.prototype;u.clear=function(){this.cb.length=0;this.ea.length=0;this.Qb.length=0;delete this.mc;delete this.db;delete this.zd;return this};u.moveTo=function(a,b){if(this.cb[this.cb.length-1]==0)this.Qb.length-=2;else{this.cb.push(0);this.ea.push(1)}this.Qb.push(a,b);this.db=this.mc=[a,b];return this};
u.lineTo=function(){var a=this.cb[this.cb.length-1];if(a==l)g(Error("Path cannot start with lineTo"));if(a!=1){this.cb.push(1);this.ea.push(0)}for(a=0;a<arguments.length;a+=2){var b=arguments[a],c=arguments[a+1];this.Qb.push(b,c)}this.ea[this.ea.length-1]+=a/2;this.db=[b,c];return this};
u.si=function(){var a=this.cb[this.cb.length-1];if(a==l)g(Error("Path cannot start with curve"));if(a!=2){this.cb.push(2);this.ea.push(0)}for(a=0;a<arguments.length;a+=6){var b=arguments[a+4],c=arguments[a+5];this.Qb.push(arguments[a],arguments[a+1],arguments[a+2],arguments[a+3],b,c)}this.ea[this.ea.length-1]+=a/6;this.db=[b,c];return this};u.close=function(){var a=this.cb[this.cb.length-1];if(a==l)g(Error("Path cannot start with close"));if(a!=4){this.cb.push(4);this.ea.push(1);this.db=this.mc}return this};
u.arcTo=function(a,b,c,d){var e=this.db[0]-a*Math.cos(N(c))+a*Math.cos(N(c+d)),f=this.db[1]-b*Math.sin(N(c))+b*Math.sin(N(c+d));this.cb.push(3);this.ea.push(1);this.Qb.push(a,b,c,d,e,f);this.zd=n;this.db=[e,f];return this};
u.rk=function(a,b,c,d){var e=this.db[0]-a*Math.cos(N(c)),f=this.db[1]-b*Math.sin(N(c)),h=N(d);d=Math.ceil(Math.abs(h)/Math.PI*2);h=h/d;c=N(c);for(var i=0;i<d;i++){var j=Math.cos(c),m=Math.sin(c),o=4/3*Math.sin(h/2)/(1+Math.cos(h/2)),p=e+(j-o*m)*a,q=f+(m+o*j)*b;c+=h;j=Math.cos(c);m=Math.sin(c);this.si(p,q,e+(j+o*m)*a,f+(m-o*j)*b,e+j*a,f+m*b)}return this};function Gk(a,b){for(var c=a.Qb,d=0,e=0,f=a.cb.length;e<f;e++){var h=a.cb[e],i=Fk[h]*a.ea[e];b(h,c.slice(d,d+i));d+=i}}
u.ka=function(){var a=new this.constructor;a.cb=this.cb.concat();a.ea=this.ea.concat();a.Qb=this.Qb.concat();a.mc=this.mc&&this.mc.concat();a.db=this.db&&this.db.concat();a.zd=this.zd;return a};var Hk={};Hk[0]=Ek.prototype.moveTo;Hk[1]=Ek.prototype.lineTo;Hk[4]=Ek.prototype.close;Hk[2]=Ek.prototype.si;Hk[3]=Ek.prototype.rk;function Ik(a){if(a.zd)return a.ka();var b=new Ek;Gk(a,function(c,d){Hk[c].apply(b,d)});return b}
Ek.prototype.transform=function(a){if(!this.zd)g(Error("Non-simple path"));a.transform(this.Qb,0,this.Qb,0,this.Qb.length/2);this.mc&&a.transform(this.mc,0,this.mc,0,1);this.db&&this.mc!=this.db&&a.transform(this.db,0,this.db,0,1);return this};function Jk(a,b,c,d,e){re.call(this,e);this.width=a;this.height=b;this.ec=c||l;this.re=d||l}A(Jk,re);u=Jk.prototype;u.xa=l;u.Pc=0;u.hd=0;function Kk(a){return a.ec?new yc(a.ec,a.re):a.yb()}u.md=function(){return this.yb()};u.yb=function(){if(this.X)return he(this.f());if(ka(this.width)&&ka(this.height))return new yc(this.width,this.height);return l};function Lk(a){var b=a.yb();return b?b.width/Kk(a).width:0}
function Mk(a,b,c,d,e,f,h,i,j,m,o,p){var q=j.size/2;d=i=="bottom"?d+f-q:i=="center"?d+f/2:d+q;return a.we(b,c,d,c+e,d,h,j,m,o,p)};function Nk(a,b){this.q=a;this.$a=b;this.Qg=n}A(Nk,Sd);u=Nk.prototype;u.$a=l;u.q=l;u.Wh=l;u.f=r("q");u.lg=function(a,b,c,d,e){this.Wh=bj(new aj,N(c),d,e).translate(a,b);this.$a.Lh(this,a,b,c,d,e)};u.addEventListener=function(a,b,c,d){Gd(this.q,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Id(this.q,a,b,c,d)};u.m=function(){Nk.h.m.call(this);Md(this.q)};function Ok(a,b,c,d){Nk.call(this,a,b);this.pj(c);this.nj(d)}A(Ok,Nk);u=Ok.prototype;u.fill=l;u.Vh=l;u.nj=function(a){this.fill=a;this.$a.Jh(this,a)};u.Fk=r("fill");u.pj=function(a){this.Vh=a;this.$a.Kh(this,a)};u.Pk=r("Vh");function Pk(a,b,c,d){Ok.call(this,a,b,c,d)}A(Pk,Ok);function Qk(a,b){Nk.call(this,a,b)}A(Qk,Nk);function Rk(a,b){Nk.call(this,a,b)}A(Rk,Nk);function Sk(a,b,c,d){Ok.call(this,a,b,c,d)}A(Sk,Ok);function Tk(a,b,c,d){Ok.call(this,a,b,c,d)}A(Tk,Ok);function Uk(a,b,c,d){Ok.call(this,a,b,c,d)}A(Uk,Ok);function Vk(a){Nk.call(this,l,a);this.pa=[]}A(Vk,Qk);Vk.prototype.clear=function(){if(this.pa.length){this.pa.length=0;Wk(this.$a)}};Vk.prototype.Kb=aa();Vk.prototype.appendChild=function(a){this.pa.push(a)};Vk.prototype.fc=function(){for(var a=0,b=this.pa.length;a<b;a++)Xk(this.$a,this.pa[a])};
function Yk(a,b,c,d,e,f,h,i){Ok.call(this,a,b,h,i);this.xk=c;this.yk=d;this.lj=e;this.mj=f;this.vd=new Ek;this.vd.clear();this.vd.moveTo(this.xk+this.lj*Math.cos(N(0)),this.yk+this.mj*Math.sin(N(0)));this.vd.arcTo(this.lj,this.mj,0,360);this.vd.close();this.Fl=new Zk(l,b,this.vd,h,i)}A(Yk,Pk);Yk.prototype.fc=function(a){this.Fl.fc(a)};function $k(a,b,c,d,e,f,h,i){Ok.call(this,a,b,h,i);this.ke=c;this.me=d;this.Fd=e;this.nd=f}A($k,Tk);$k.prototype.Rc=n;
$k.prototype.Kb=function(a,b){this.Fd=a;this.nd=b;this.Rc&&Wk(this.$a)};$k.prototype.fc=function(a){this.Rc=k;a.beginPath();a.moveTo(this.ke,this.me);a.lineTo(this.ke,this.me+this.nd);a.lineTo(this.ke+this.Fd,this.me+this.nd);a.lineTo(this.ke+this.Fd,this.me);a.closePath()};function Zk(a,b,c,d,e){Ok.call(this,a,b,d,e);this.Nh(c)}A(Zk,Sk);Zk.prototype.Rc=n;Zk.prototype.Nh=function(a){this.vd=a.zd?a:Ik(a);this.Rc&&Wk(this.$a)};
Zk.prototype.fc=function(a){this.Rc=k;a.beginPath();Gk(this.vd,function(b,c){switch(b){case 0:a.moveTo(c[0],c[1]);break;case 1:for(var d=0;d<c.length;d+=2)a.lineTo(c[d],c[d+1]);break;case 2:for(d=0;d<c.length;d+=6)a.bezierCurveTo(c[d],c[d+1],c[d+2],c[d+3],c[d+4],c[d+5]);break;case 3:g(Error("Canvas paths cannot contain arcs"));case 4:a.closePath()}})};
function al(a,b,c,d,e,f,h,i,j,m){Ok.call(this,l,a,j,m);this.Bj=b;this.Mj=c;this.bm=d;this.Nj=e;this.cm=f;this.lk=h||"left";this.Dk=i;this.q=Kc("DIV",{style:"display:table;position:absolute;padding:0;margin:0;border:0"});this.Pf=Kc("DIV",{style:"display:table-cell;padding: 0;margin: 0;border: 0"});c=this.Mj;i=this.Nj;d=this.bm;e=this.cm;j=this.lk;f=this.Dk;b=this.q.style;h=Lk(this.$a);m=this.$a;var o=m.yb();m=o?o.height/Kk(m).height:0;if(c==i){b.lineHeight="90%";this.Pf.style.verticalAlign=j=="center"?
"middle":j=="left"?d<e?"top":"bottom":d<e?"bottom":"top";b.textAlign="center";i=f.size*h;b.top=Math.round(Math.min(d,e)*m)+"px";b.left=Math.round((c-i/2)*h)+"px";b.width=Math.round(i)+"px";b.height=Math.abs(d-e)*m+"px";b.fontSize=f.size*0.6*m+"pt"}else{b.lineHeight="100%";this.Pf.style.verticalAlign="top";b.textAlign=j;b.top=Math.round(((d+e)/2-f.size*2/3)*m)+"px";b.left=Math.round(c*h)+"px";b.width=Math.round(Math.abs(i-c)*h)+"px";b.height="auto";b.fontSize=f.size*m+"pt"}b.fontWeight=f.bold?"bold":
"normal";b.fontStyle=f.vh?"italic":"normal";b.fontFamily=f.ah;c=this.fill;b.color=c.Bb||c.yi();this.Pf.innerHTML=this.Mj==this.Nj?C(this.Bj.split(""),xa).join("<br>"):xa(this.Bj);a.f().appendChild(this.q);this.q.appendChild(this.Pf)}A(al,Uk);al.prototype.nj=function(a){this.fill=a;if(this.q)this.q.style.color=a.Bb||a.yi()};al.prototype.pj=aa();al.prototype.fc=aa();function bl(a,b,c,d,e,f,h){Nk.call(this,a,b);this.ke=c;this.me=d;this.Fd=e;this.nd=f;this.Ul=h}A(bl,Rk);bl.prototype.Rc=n;
bl.prototype.Kb=function(a,b){this.Fd=a;this.nd=b;this.Rc&&Wk(this.$a)};bl.prototype.fc=function(a){if(this.Ji){this.Fd&&this.nd&&a.drawImage(this.Ji,this.ke,this.me,this.Fd,this.nd);this.Rc=k}else{a=new Image;a.onload=ta(this.Zk,this,a);a.src=this.Ul}};bl.prototype.Zk=function(a){this.Ji=a;Wk(this.$a)};function cl(a,b){this.size=a;this.ah=b}cl.prototype.bold=n;cl.prototype.vh=n;function dl(){};function el(a,b){this.Bb=a;this.Pe=b||1}A(el,dl);function fl(a,b){this.ai=a;this.Bb=b};function gl(a,b,c,d,e){Jk.call(this,a,b,c,d,e)}A(gl,Jk);u=gl.prototype;u.Jh=function(){Wk(this)};u.Kh=function(){Wk(this)};u.Lh=function(){Wk(this)};function hl(a,b){var c=a.getContext();c.save();var d=b.Wh?b.Wh.ka():new aj,e=d.jb,f=d.kb;if(e||f)c.translate(e,f);(d=d.Aa)&&c.rotate(Math.asin(d))}u.i=function(){var a=this.Cb.i("div",{style:"position:relative;overflow:hidden"});this.q=a;this.pe=this.Cb.i("canvas");a.appendChild(this.pe);this.xh=this.xa=new Vk(this);this.Jl=0;il(this)};
u.getContext=function(){this.f()||this.i();if(!this.Od){this.Od=this.pe.getContext("2d");this.Od.save()}return this.Od};u.Kb=function(a,b){this.width=a;this.height=b;il(this);Wk(this)};u.yb=function(){var a=this.width,b=this.height,c=x(a)&&a.indexOf("%")!=-1,d=x(b)&&b.indexOf("%")!=-1;if(!this.X&&(c||d))return l;var e,f;if(c){e=this.f().parentNode;f=he(e);a=parseFloat(a)*f.width/100}if(d){e=e||this.f().parentNode;f=f||he(e);b=parseFloat(b)*f.height/100}return new yc(a,b)};
function il(a){ge(a.f(),a.width,a.height);var b=a.yb();if(b){ge(a.pe,b.width,b.height);a.pe.width=b.width;a.pe.height=b.height;a.Od=l}}u.reset=function(){var a=this.getContext();a.restore();var b=this.yb();b.width&&b.height&&a.clearRect(0,0,b.width,b.height);a.save()};u.clear=function(){this.reset();this.xa.clear();for(var a=this.f();a.childNodes.length>1;)a.removeChild(a.lastChild)};
function Wk(a){if(a.sn)a.qn=k;else if(a.X){a.reset();if(a.ec){var b=a.yb();a.getContext().scale(b.width/a.ec,b.height/a.re)}if(a.Pc||a.hd)a.getContext().translate(-a.Pc,-a.hd);hl(a,a.xa);a.xa.fc(a.Od);a.getContext().restore()}}
function Xk(a,b){if(!(b instanceof al)){var c=a.getContext();hl(a,b);if(!b.Fk||!b.Pk)b.fc(c);else{var d=b.fill;if(d)if(d instanceof el){if(d.Pe!=0){c.globalAlpha=d.Pe;c.fillStyle=d.Bb;b.fc(c);c.fill();c.globalAlpha=1}}else{var e=c.createLinearGradient(d.Mm(),d.Om(),d.Nm(),d.Qm());e.addColorStop(0,d.yi());e.addColorStop(1,d.Km());c.fillStyle=e;b.fc(c);c.fill()}if(d=b.Vh){b.fc(c);c.strokeStyle=d.Bb;d=d.ai;if(x(d)&&d.indexOf("px")!=-1)d=parseFloat(d)/Lk(a);c.lineWidth=d;c.stroke()}}a.getContext().restore()}}
u.Xa=function(a,b){b=b||this.xa;b.appendChild(a);this.X&&!this.Jl&&!(b!=this.xa&&b!=this.xh)&&Xk(this,a)};u.tf=function(a,b,c,d,e,f,h){a=new Yk(l,this,a,b,c,d,e,f);this.Xa(a,h);return a};u.Xg=function(a,b,c,d,e,f,h){a=new $k(l,this,a,b,c,d,e,f);this.Xa(a,h);return a};u.drawImage=function(a,b,c,d,e,f){a=new bl(l,this,a,b,c,d,e);this.Xa(a,f);return a};u.we=function(a,b,c,d,e,f,h,i,j,m){a=new al(this,a,b,c,d,e,f,h,i,j);this.Xa(a,m);return a};
u.gc=function(a,b,c,d){a=new Zk(l,this,a,b,c);this.Xa(a,d);return a};u.te=function(a){var b=new Vk(this);a=a||this.xa;if(a==this.xa||a==this.xh)this.xh=b;this.Xa(b,a);return b};u.m=function(){this.Od=l;gl.h.m.call(this)};u.ta=function(){var a=this.yb();gl.h.ta.call(this);if(!a){il(this);this.dispatchEvent("resize")}Wk(this)};function jl(a,b){Nk.call(this,a,b)}A(jl,Qk);jl.prototype.clear=function(){Oc(this.f())};jl.prototype.Kb=function(a,b){kl(this.$a,this.f(),{width:a,height:b})};function ll(a,b,c,d){Ok.call(this,a,b,c,d)}A(ll,Pk);function ml(a,b,c,d){Ok.call(this,a,b,c,d)}A(ml,Tk);ml.prototype.Kb=function(a,b){kl(this.$a,this.f(),{width:a,height:b})};function nl(a,b,c,d){Ok.call(this,a,b,c,d)}A(nl,Sk);nl.prototype.Nh=function(a){kl(this.$a,this.f(),{d:ol(a)})};function pl(a,b,c,d){Ok.call(this,a,b,c,d)}A(pl,Uk);
function ql(a,b){Nk.call(this,a,b)}A(ql,Rk);ql.prototype.Kb=function(a,b){kl(this.$a,this.f(),{width:a,height:b})};function rl(a,b,c,d,e){Jk.call(this,a,b,c,d,e);this.ti={};this.Zh=I&&!J(526);this.Fb=new Qd(this)}var sl;A(rl,Jk);function tl(a,b,c){b=a.Cb.aa.createElementNS("http://www.w3.org/2000/svg",b);c&&kl(a,b,c);return b}function kl(a,b,c){for(var d in c)b.setAttribute(d,c[d])}u=rl.prototype;u.Xa=function(a,b){(b||this.xa).f().appendChild(a.f())};u.Jh=function(a,b){var c=a.f();if(b instanceof el){c.setAttribute("fill",b.Bb);c.setAttribute("fill-opacity",b.Pe)}else c.setAttribute("fill","none")};
u.Kh=function(a,b){var c=a.f();if(b){c.setAttribute("stroke",b.Bb);var d=b.ai;x(d)&&d.indexOf("px")!=-1?c.setAttribute("stroke-width",parseFloat(d)/Lk(this)):c.setAttribute("stroke-width",d)}else c.setAttribute("stroke","none")};u.Lh=function(a,b,c,d,e,f){a.f().setAttribute("transform","translate("+b+","+c+") rotate("+d+" "+e+" "+f+")")};
u.i=function(){var a=tl(this,"svg",{width:this.width,height:this.height,overflow:"hidden"}),b=tl(this,"g");this.Tg=tl(this,"defs");this.xa=new jl(b,this);a.appendChild(this.Tg);a.appendChild(b);this.q=a;if(this.ec||this.Pc||this.hd){this.f().setAttribute("preserveAspectRatio","none");this.Zh?this.qg():this.f().setAttribute("viewBox",this.Pc+" "+this.hd+" "+(this.ec?this.ec+" "+this.re:""))}};
u.qg=function(){if(this.X&&(this.ec||this.Pc||!this.hd)){var a=this.yb();if(a.width==0)this.f().style.visibility="hidden";else{this.f().style.visibility="";var b=-this.Pc,c=-this.hd,d=a.width/this.ec;a=a.height/this.re;this.xa.f().setAttribute("transform","scale("+d+" "+a+") translate("+b+" "+c+")")}}};u.Kb=aa();
u.yb=function(){if(!G)return this.X?he(this.f()):rl.h.yb.call(this);var a=this.width,b=this.height,c=x(a)&&a.indexOf("%")!=-1,d=x(b)&&b.indexOf("%")!=-1;if(!this.X&&(c||d))return l;var e,f;if(c){e=this.f().parentNode;f=he(e);a=parseFloat(a)*f.width/100}if(d){e=e||this.f().parentNode;f=f||he(e);b=parseFloat(b)*f.height/100}return new yc(a,b)};u.clear=function(){this.xa.clear();Oc(this.Tg);this.ti={}};
u.tf=function(a,b,c,d,e,f,h){a=tl(this,"ellipse",{cx:a,cy:b,rx:c,ry:d});e=new ll(a,this,e,f);this.Xa(e,h);return e};u.Xg=function(a,b,c,d,e,f,h){a=tl(this,"rect",{x:a,y:b,width:c,height:d});e=new ml(a,this,e,f);this.Xa(e,h);return e};u.drawImage=function(a,b,c,d,e,f){a=tl(this,"image",{x:a,y:b,width:c,height:d,"image-rendering":"optimizeQuality",preserveAspectRatio:"none"});a.setAttributeNS("http://www.w3.org/1999/xlink","href",e);e=new ql(a,this);this.Xa(e,f);return e};
u.we=function(a,b,c,d,e,f,h,i,j,m){var o=Math.round(Sg(b,c,d,e));d=d-b;e=e-c;e=Math.round(Math.sqrt(d*d+e*e));var p=h.size;d={"font-family":h.ah,"font-size":p};p=Math.round(c-p/2+Math.round(p*0.85));var q=b;if(f=="center"){q+=Math.round(e/2);d["text-anchor"]="middle"}else if(f=="right"){q+=e;d["text-anchor"]="end"}d.x=q;d.y=p;if(h.bold)d["font-weight"]="bold";if(h.vh)d["font-style"]="italic";if(o!=0)d.transform="rotate("+o+" "+b+" "+c+")";b=tl(this,"text",d);b.appendChild(this.Cb.aa.createTextNode(a));
if(i==l&&G&&Yb){a="black";if(j instanceof el)a=j.Bb;i=new fl(1,a)}j=new pl(b,this,i,j);this.Xa(j,m);return j};u.gc=function(a,b,c,d){a=tl(this,"path",{d:ol(a)});b=new nl(a,this,b,c);this.Xa(b,d);return b};
function ol(a){var b=[];Gk(a,function(c,d){switch(c){case 0:b.push("M");Array.prototype.push.apply(b,d);break;case 1:b.push("L");Array.prototype.push.apply(b,d);break;case 2:b.push("C");Array.prototype.push.apply(b,d);break;case 3:var e=d[3];b.push("A",d[0],d[1],0,Math.abs(e)>180?1:0,e>0?1:0,d[4],d[5]);break;case 4:b.push("Z")}});return b.join(" ")}u.te=function(a){var b=tl(this,"g");(a||this.xa).f().appendChild(b);return new jl(b,this)};
u.ta=function(){var a=this.yb();rl.h.ta.call(this);a||this.dispatchEvent("resize");if(this.Zh){a=this.width;var b=this.height;typeof a=="string"&&a.indexOf("%")!=-1&&typeof b=="string"&&b.indexOf("%")!=-1&&this.Fb.u(ul(),mf,this.qg);this.qg()}};u.xb=function(){rl.h.xb.call(this);this.Zh&&this.Fb.mb(ul(),mf,this.qg)};u.m=function(){delete this.ti;delete this.Tg;delete this.xa;rl.h.m.call(this)};function ul(){if(!sl){sl=new kf(400);sl.start()}return sl};function vl(){return this.q=this.$a.Cb.f(this.Hb)||this.q}function wl(a,b){this.Hb=a.id;Nk.call(this,a,b)}A(wl,Qk);wl.prototype.f=vl;wl.prototype.clear=function(){Oc(this.f())};wl.prototype.Kb=function(a,b){var c=this.f(),d=c.style;d.width=Z(a)+"px";d.height=Z(b)+"px";c.coordsize=Z(a)+" "+Z(b);if(this.$a.xa!=this)c.coordorigin="0 0"};function xl(a,b,c,d,e,f,h,i){this.Hb=a.id;Ok.call(this,a,b,h,i);this.Dm=c;this.Em=d;this.un=e;this.vn=f}A(xl,Pk);xl.prototype.f=vl;
function yl(a,b,c,d){this.Hb=a.id;Ok.call(this,a,b,c,d)}A(yl,Tk);yl.prototype.f=vl;yl.prototype.Kb=function(a,b){var c=this.f().style;c.width=Z(a)+"px";c.height=Z(b)+"px"};function zl(a,b,c,d){this.Hb=a.id;Ok.call(this,a,b,c,d)}A(zl,Sk);zl.prototype.f=vl;zl.prototype.Nh=function(a){Al(this.f(),"path",Bl(a))};function Cl(a,b,c,d){this.Hb=a.id;Ok.call(this,a,b,c,d)}A(Cl,Uk);Cl.prototype.f=vl;function Dl(a,b){this.Hb=a.id;Nk.call(this,a,b)}A(Dl,Rk);Dl.prototype.f=vl;
Dl.prototype.Kb=function(a,b){var c=this.f().style;c.width=El(a)+"px";c.height=El(b)+"px"};function Fl(a,b,c,d,e){Jk.call(this,a,b,c,d,e);this.Fb=new Qd(this)}A(Fl,Jk);var Gl=document.documentMode&&document.documentMode>=8;function Hl(a){var b;if(b=x(a)){b=a.length-1;b=b>=0&&a.indexOf("%",b)==b}return b?a:parseFloat(a.toString())+"px"}function El(a){return Math.round((parseFloat(a.toString())-0.5)*100)}function Z(a){return Math.round(parseFloat(a.toString())*100)}function Al(a,b,c){if(Gl)a[b]=c;else a.setAttribute(b,c)}
function Il(a,b){var c=a.Cb.createElement("g_vml_:"+b);c.id="goog_"+Ha++;return c}function Jl(a){if(Gl&&a.X)a.f().innerHTML=a.f().innerHTML}Fl.prototype.Xa=function(a,b){(b||this.xa).f().appendChild(a.f());Jl(this)};
Fl.prototype.Jh=function(a,b){var c=a.f();c.fillcolor="";for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];e.tagName=="fill"&&c.removeChild(e)}if(b instanceof el)if(b.Bb=="transparent")c.filled=n;else if(b.Pe!=1){c.filled=k;d=Il(this,"fill");d.opacity=Math.round(b.Pe*100)+"%";d.color=b.Bb;c.appendChild(d)}else{c.filled=k;c.fillcolor=b.Bb}else c.filled=n;Jl(this)};
Fl.prototype.Kh=function(a,b){var c=a.f();if(b){c.stroked=k;var d=b.ai;if(x(d)&&d.indexOf("px")==-1)d=parseFloat(d);else d*=Lk(this);var e=c.getElementsByTagName("stroke")[0];if(d<1){e=e||Il(this,"stroke");e.opacity=d;e.yn="1px";e.color=b.Bb;c.appendChild(e)}else{e&&c.removeChild(e);c.strokecolor=b.Bb;c.strokeweight=d+"px"}}else c.stroked=n;Jl(this)};
Fl.prototype.Lh=function(a,b,c,d,e,f){a=a.f();a.style.left=El(b)+"px";a.style.top=El(c)+"px";if(d||a.rotation){a.rotation=d;a.coordsize=Z(e*2)+" "+Z(f*2)}};function Kl(a,b,c,d,e){var f=a.style;f.position="absolute";f.left=El(b)+"px";f.top=El(c)+"px";f.width=Z(d)+"px";f.height=Z(e)+"px";if(a.tagName=="shape")a.coordsize=Z(d)+" "+Z(e)}function Ll(a,b){var c=Il(a,b),d=Kk(a);Kl(c,0,0,d.width,d.height);return c}try{eval("document.namespaces")}catch(Ml){}u=Fl.prototype;
u.i=function(){var a=this.Cb.aa;if(!a.namespaces.g_vml_){Gl?a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"):a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml");a.createStyleSheet().cssText="g_vml_\\:*{behavior:url(#default#VML)}"}a=this.width;var b=this.height,c=this.Cb.i("div",{style:"overflow:hidden;position:relative;width:"+Hl(a)+";height:"+Hl(b)});this.q=c;var d=Il(this,"group"),e=d.style;e.position="absolute";e.left=e.top=0;e.width=this.width;e.height=this.height;
d.coordsize=this.ec?Z(this.ec)+" "+Z(this.re):Z(a)+" "+Z(b);d.coordorigin=this.Pc!==undefined?Z(this.Pc)+" "+Z(this.hd):"0 0";c.appendChild(d);this.xa=new wl(d,this);Gd(c,"resize",ta(this.ih,this))};u.ih=function(){var a=he(this.f()),b=this.xa.f().style;if(a.width){b.width=a.width+"px";b.height=a.height+"px"}else{for(a=this.f();a&&a.currentStyle&&a.currentStyle.display!="none";)a=a.parentNode;a&&a.currentStyle&&this.Fb.u(a,"propertychange",this.ih)}this.dispatchEvent("resize")};u.Kb=aa();
u.yb=function(){var a=this.f();return new yc(a.style.pixelWidth||a.offsetWidth||1,a.style.pixelHeight||a.offsetHeight||1)};u.clear=function(){this.xa.clear()};u.tf=function(a,b,c,d,e,f,h){var i=Il(this,"oval");Kl(i,a-c,b-d,c*2,d*2);a=new xl(i,this,a,b,c,d,e,f);this.Xa(a,h);return a};u.Xg=function(a,b,c,d,e,f,h){var i=Il(this,"rect");Kl(i,a,b,c,d);a=new yl(i,this,e,f);this.Xa(a,h);return a};
u.drawImage=function(a,b,c,d,e,f){var h=Il(this,"image");Kl(h,a,b,c,d);Al(h,"src",e);a=new Dl(h,this);this.Xa(a,f);return a};
u.we=function(a,b,c,d,e,f,h,i,j,m){var o=Ll(this,"shape"),p=Il(this,"path");Al(p,"v","M"+El(b)+","+El(c)+"L"+El(d)+","+El(e)+"E");Al(p,"textpathok","true");b=Il(this,"textpath");b.setAttribute("on","true");c=b.style;c.fontSize=h.size*Lk(this);c.fontFamily=h.ah;if(f!=l)c["v-text-align"]=f;if(h.bold)c.fontWeight="bold";if(h.vh)c.fontStyle="italic";Al(b,"string",a);o.appendChild(p);o.appendChild(b);a=new Cl(o,this,i,j);this.Xa(a,m);return a};
u.gc=function(a,b,c,d){var e=Ll(this,"shape");Al(e,"path",Bl(a));a=new zl(e,this,b,c);this.Xa(a,d);return a};
function Bl(a){var b=[];Gk(a,function(c,d){switch(c){case 0:b.push("m");Array.prototype.push.apply(b,C(d,Z));break;case 1:b.push("l");Array.prototype.push.apply(b,C(d,Z));break;case 2:b.push("c");Array.prototype.push.apply(b,C(d,Z));break;case 4:b.push("x");break;case 3:var e=d[2]+d[3];b.push("ae",Z(d[4]-d[0]*Math.cos(N(e))),Z(d[5]-d[1]*Math.sin(N(e))),Z(d[0]),Z(d[1]),Math.round(d[2]*-65536),Math.round(d[3]*-65536))}});return b.join(" ")}
u.te=function(a){var b=Ll(this,"group");(a||this.xa).f().appendChild(b);return new wl(b,this)};u.ta=function(){Fl.h.ta.call(this);this.ih();Jl(this)};u.m=function(){this.xa=l;Fl.h.m.call(this)};function Nl(a,b,c,d){this.jf=a;this.kf=b;this.rg=c;this.wg=d}Nl.prototype.ka=function(){return new Nl(this.jf,this.kf,this.rg,this.wg)};function Ol(a,b,c){if(b instanceof L){c=b.y;b=b.x}else c=c;var d=a.jf,e=a.kf,f=a.rg-a.jf,h=a.wg-a.kf;return((b-d)*(a.rg-d)+(c-e)*(a.wg-e))/(f*f+h*h)}function Pl(a,b){return new L(a.jf+b*(a.rg-a.jf),a.kf+b*(a.wg-a.kf))};function Ql(a,b,c){this.cells={};this.Ld=b?b:2;this.Yl=c?c:0.3;this.le=this.je=1E5;this.xg=this.sg=-1E5;b=0;for(c=a.length;b<c;b++){var d=a[b].ya();if(d.x<this.je)this.je=d.x;if(d.x>this.sg)this.sg=d.x;if(d.y<this.le)this.le=d.y;if(d.y>this.xg)this.xg=d.y}this.je-=1;this.le-=1;this.sg+=1;this.xg+=1;this.width=this.sg-this.je;this.height=this.xg-this.le;this.bi=Math.ceil(this.width/this.Ld);this.dm=Math.ceil(this.height/this.Ld);B(a,function(e){var f=e.ya();f=Math.floor((f.y-this.le)/this.Ld)*this.bi+
Math.floor((f.x-this.je)/this.Ld);this.cells[f]||(this.cells[f]=[]);this.cells[f].push(e)},this)}function Rl(a,b){var c=[],d=Math.floor((b.x-a.je)/a.Ld),e=Math.floor((b.y-a.le)/a.Ld),f=d-1;for(d=d+2;f<d;f++)if(!(f<0||f>=a.bi))for(var h=e-1,i=e+2;h<i;h++)h<0||h>=a.dm||c.push(h*a.bi+f);return c}
function Bj(a,b){for(var c=[],d=Rl(a,b),e=0,f=d.length;e<f;e++){var h=a.cells[d[e]];if(h)for(var i=0,j=h.length;i<j;i++){var m=h[i],o=m.ze(b);o<a.Yl&&c.push({ud:m.ud,vi:o})}}c.sort(function(p,q){return p.vi-q.vi});return C(c,function(p){return p.ud})}
function Sl(a){return ab(C(a,function(b){return Sa(Tl(b.td),C(b.Ib,function(c){return{ud:c,ya:function(){return c.a},ze:function(d){return wc(c.a,d)}}}),C(b.ja,function(c){return{ud:c,ya:function(){return c.ya()},ze:function(d){var e=new Nl(c.source.x,c.source.y,c.target.x,c.target.y);return wc(Pl(e,Math.min(Math.max(Ol(e,d.x,d.y),0),1)),d)}}}))}))}
function Tl(a){var b=C(a,function(c){return{ud:c,ya:function(){return c.ya()},ze:function(d){return wc(c.ya(),d)/4}}});B(a,function(c){b=Sa(b,C(c.e,function(d){return{ud:d,ya:function(){return d.a},ze:function(e){return wc(d.a,e)}}}));b=Sa(b,C(c.g,function(d){return{ud:d,ya:function(){return Kh(M(d.source.a,d.target.a)).scale(0.5)},ze:function(e){var f=new Nl(d.source.a.x,d.source.a.y,d.target.a.x,d.target.a.y);return wc(Pl(f,Math.min(Math.max(Ol(f,e.x,e.y),0),1)),e)}}}))});return b};function Ul(a,b,c){this.ba=a;this.k=new nb(b!==undefined?b:{});c!==undefined&&this.k.Id(c)}Ul.prototype.G=E("kemia.view.Renderer");function Vl(a,b){var c=Wd(b).md(),d=c.width,e=a.ba.md();c.scale(c.width/c.height>e.width/e.height?e.width/c.width:e.height/c.height);c=a.Ze*c.width/d;return new ej(c,0,0,-c,-Math.min(b.left,b.right)*c,Math.max(b.top,b.bottom)*c)}Ul.prototype.setTransform=ba("transform");function Wl(a,b){Ul.call(this,a,Xl,b)}A(Wl,Ul);
Wl.prototype.la=function(a,b,c){b||(b=this.k.l("highlight").color);c||(c=new Nj);var d=Sg(a.source.a.x,a.source.a.y,a.target.a.x,a.target.a.y),e=N(Rg(d+90));d=N(Rg(d-90));var f=this.transform.ha,h=this.k.l("highlight").radius*f;a=R(this.transform,[a.source.a,a.target.a]);f=M(new L(h*Math.cos(e),-h*Math.sin(e)),a[0]);var i=M(new L(h*Math.cos(e),-h*Math.sin(e)),a[1]);e=M(new L(h*Math.cos(d),-h*Math.sin(d)),a[0]);d=M(new L(h*Math.cos(d),-h*Math.sin(d)),a[1]);h=new Ek;h.moveTo(a[0].x,a[0].y);h.lineTo(f.x,
f.y);h.lineTo(i.x,i.y);h.lineTo(a[1].x,a[1].y);h.close();b=new el(b,0.15);c.add(this.ba.gc(h,l,b));f=new Ek;f.moveTo(a[0].x,a[0].y);f.lineTo(e.x,e.y);f.lineTo(d.x,d.y);f.lineTo(a[1].x,a[1].y);f.close();c.add(this.ba.gc(f,l,b));return c};function Yl(a){a=new Hh(a.source.a,a.target.a);a=xc(a.target,a.source);return Math.atan2(a.y,a.x)}function Zl(a){return a.Q!="C"||a.ob()==1}
var Xl={bond:{stroke:{width:1.5,color:"black"},fill:{color:"black"},"width-ratio":6,"symbol-space":0.3,"triple-dist":0.15,"quad-dist":0.13},highlight:{radius:0.3,color:"blue"}};function $l(a,b){Wl.call(this,a,$l.jd,b)}A($l,Wl);$l.prototype.R=function(a,b,c){this.setTransform(b);var d=[a.source.a,a.target.a],e=Kh(xc(d[1],d[0]));e.normalize();e.scale(this.k.l("bond")["symbol-space"]);if(Zl(a.source))d[0]=M(d[0],e);if(Zl(a.target))d[1]=xc(d[1],e);d=R(b,[d[0],d[1]]);c.moveTo(d[0].x,d[0].y);c.lineTo(d[1].x,d[1].y)};function am(a,b){Wl.call(this,a,am.jd,b)}A(am,Wl);
am.prototype.R=function(a,b,c){this.setTransform(b);var d=bm(a),e=Kh(xc(a.target.a,a.source.a));e.scale(1/this.k.l("bond")["width-ratio"]);var f=new Jh(-e.y,e.x),h=e.ka().normalize().scale(this.k.l("bond")["symbol-space"]);if(d){var i=M(a.source.a,f);if(!Ih(new Hh(a.source.a,a.target.a),d.ya(),i)){d=f;d.x=-d.x;d.y=-d.y}d=M(a.source.a,f);i=M(a.target.a,f);var j=a.source.a;f=a.target.a;if(Zl(a.source)){d=M(d,h);j=M(j,h)}else d=M(d,e);if(Zl(a.target)){i=xc(i,h);f=xc(f,h)}else i=xc(i,e)}else{f.scale(0.5);
e=f;if(Math.abs(e.x)>0.08){f=e.x/0.08;e.x/=f;e.y/=f}if(Math.abs(e.y)>0.08){f=e.y/0.08;e.x/=f;e.y/=f}f=e;d=M(a.source.a,f);i=M(a.target.a,f);j=xc(a.source.a,f);f=xc(a.target.a,f);if(Zl(a.source)){d=M(d,h);j=M(j,h)}if(Zl(a.target)){i=xc(i,h);f=xc(f,h)}}a=R(b,[d,i,j,f]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.moveTo(a[2].x,a[2].y);c.lineTo(a[3].x,a[3].y)};function bm(a){return Pa(gj(a.v),function(b){return D(b.g,a)})};function cm(a,b){Wl.call(this,a,cm.jd,b)}A(cm,Wl);
cm.prototype.R=function(a,b,c){this.setTransform(b);var d=this.k.l("bond").stroke.width;d=new fl(d,this.k.l("bond").stroke.color);var e=Yl(a),f=e+Math.PI/2;e=e-Math.PI/2;var h=this.k.l("bond")["triple-dist"];f=new ej(1,0,0,1,Math.cos(f)*h,Math.sin(f)*h);e=new ej(1,0,0,1,Math.cos(e)*h,Math.sin(e)*h);f=R(f,[a.source.a,a.target.a]);e=R(e,[a.source.a,a.target.a]);a=R(b,[a.source.a,a.target.a,f[0],f[1],e[0],e[1]]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.moveTo(a[2].x,a[2].y);c.lineTo(a[3].x,
a[3].y);c.moveTo(a[4].x,a[4].y);c.lineTo(a[5].x,a[5].y);this.ba.gc(c,d,l)};function dm(a,b){Wl.call(this,a,dm.jd,b)}A(dm,Wl);
dm.prototype.R=function(a,b,c){this.setTransform(b);var d=this.k.l("bond").stroke.width;d=new fl(d,this.k.l("bond").stroke.color);var e=Yl(a),f=e+Math.PI/2,h=e-Math.PI/2,i=this.k.l("bond")["quad-dist"],j=new ej(1,0,0,1,Math.cos(f)*i/3,Math.sin(f)*i/3);e=new ej(1,0,0,1,Math.cos(h)*i/3,Math.sin(h)*i/3);f=new ej(1,0,0,1,Math.cos(f)*i,Math.sin(f)*i);h=new ej(1,0,0,1,Math.cos(h)*i,Math.sin(h)*i);j=R(j,[a.source.a,a.target.a]);e=R(e,[a.source.a,a.target.a]);f=R(f,[a.source.a,a.target.a]);a=R(h,[a.source.a,
a.target.a]);b=R(b,[j[0],j[1],e[0],e[1],f[0],f[1],a[0],a[1]]);c.moveTo(b[0].x,b[0].y);c.lineTo(b[1].x,b[1].y);c.moveTo(b[2].x,b[2].y);c.lineTo(b[3].x,b[3].y);c.moveTo(b[4].x,b[4].y);c.lineTo(b[5].x,b[5].y);c.moveTo(b[6].x,b[6].y);c.lineTo(b[7].x,b[7].y);this.ba.gc(c,d,l)};function em(a,b){Wl.call(this,a,em.jd,b)}A(em,Wl);
em.prototype.R=function(a,b,c){this.setTransform(b);var d=this.k.l("bond").stroke.width/10,e=Yl(a),f=e+Math.PI/2;e=e-Math.PI/2;f=pi(new ej(1,0,0,1,Math.cos(f)*d,Math.sin(f)*d),[a.target.a])[0];d=pi(new ej(1,0,0,1,Math.cos(e)*d,Math.sin(e)*d),[a.target.a])[0];if(a.target.Q!="C"){e=3*wc(f,a.source.a);f.x=(f.x*(e-1)+a.source.a.x)/e;f.y=(f.y*(e-1)+a.source.a.y)/e;d.x=(d.x*(e-1)+a.source.a.x)/e;d.y=(d.y*(e-1)+a.source.a.y)/e}a=R(b,[a.source.a,f,d]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.lineTo(a[2].x,
a[2].y)};function fm(a,b){Wl.call(this,a,fm.jd,b)}A(fm,Wl);
fm.prototype.R=function(a,b,c){this.setTransform(b);var d=this.k.l("bond").stroke.width/10,e=Yl(a),f=e+Math.PI/2;e=e-Math.PI/2;f=new ej(1,0,0,1,Math.cos(f)*d,Math.sin(f)*d);d=new ej(1,0,0,1,Math.cos(e)*d,Math.sin(e)*d);f=R(f,[a.source.a,a.target.a]);d=R(d,[a.source.a,a.target.a]);b=R(b,[f[0],f[1],d[0],d[1],a.source.a]);d=0;if(a.target.Q!="C")d=1;for(a=0;a<7-d;a++){c.moveTo(((7-a)*b[4].x+a*b[1].x)/7,((7-a)*b[4].y+a*b[1].y)/7);c.lineTo(((7-a)*b[4].x+a*b[3].x)/7,((7-a)*b[4].y+a*b[3].y)/7)}};function gm(a,b){Wl.call(this,a,gm.jd,b)}A(gm,Wl);
gm.prototype.R=function(a,b,c){this.setTransform(b);var d=Math.round(wc(a.source.a,a.target.a)*12);if(d<8)d=8;Ib(this.G,"# zigZags "+d);var e=this.k.l("bond").stroke.width/10,f=Yl(a),h=f+Math.PI/2;f=f-Math.PI/2;var i=[];i.push(a.source.a);Ib(this.G,"# coords "+i.length);for(var j=l,m=1/d,o=0,p=1;p<=d;p++){o+=m;j=p%2==0?new ej(1,0,0,1,Math.cos(h)*e*o,Math.sin(h)*e*o):new ej(1,0,0,1,Math.cos(f)*e*o,Math.sin(f)*e*o);j=R(j,[new L(((d-p)*a.source.a.x+a.target.a.x*p)/d,((d-p)*a.source.a.y+a.target.a.y*
p)/d)])[0];i.push(j)}a=R(b,i);c.moveTo(a[1].x,a[1].y);b=2;for(d=a.length-1;b<d;b++){c.lineTo(a[b].x,a[b].y);c.moveTo(a[b].x,a[b].y)}};function hm(a,b){this.ba=a;this.k=new nb;b&&this.k.Id(b)}hm.prototype.G=E("kemia.view.BondRendererFactory");var im=gb({Mk:ii,Ek:2,Qk:3,Jk:4}),jm=gb({Lk:ji,Ok:11,Kk:13,Nk:12});u=hm.prototype;u.l=function(a){return this[im[a.sa]].apply(this,[a.da])};u.Mk=function(a){return this[jm[a]].apply(this)};u.Lk=function(){if(!this.uj)this.uj=new $l(this.ba,this.k);return this.uj};u.Ok=function(){if(!this.vj)this.vj=new em(this.ba,this.k);return this.vj};
u.Kk=function(){if(!this.tj)this.tj=new fm(this.ba,this.k);return this.tj};u.Nk=function(){if(!this.wj)this.wj=new gm(this.ba,this.k);return this.wj};u.Ek=function(){if(!this.wi)this.wi=new am(this.ba,this.k);return this.wi};u.Qk=function(){if(!this.Ij)this.Ij=new cm(this.ba,this.k);return this.Ij};u.Jk=function(){if(!this.jj)this.jj=new dm(this.ba,this.k);return this.jj};function Nj(){this.ia=[]}Nj.prototype.G=E("kemia.graphics.ElementArray");Nj.prototype.add=function(a){this.ia.push(a);return this};Nj.prototype.clear=function(){B(this.ia,function(a){Pc(a.f())},this);this.ia.length=0};Nj.prototype.lg=function(a,b,c,d,e){B(this.ia,function(f){f.lg(a,b,c,d,e)})};function km(a,b){Ul.call(this,a,lm,b)}A(km,Ul);
km.prototype.R=function(a,b,c){this.setTransform(b);c||(c=new Nj);var d=this.k.l("atom"),e=this.k.l(a.Q)?this.k.l(a.Q).color:d.color,f=b.ha;f=new cl(f/1.8>12?15:f/1.8,d.fontName);d=new fl(d.stroke.width,"black");e=new el(e);b=R(b,[a.a])[0];var h={text:"",Vf:"center",zc:"",Bd:""};if(a.Q!="C"||a.ob()<1||a.Za||a.ob()==1&&this.k.l("showTerminalCarbons")){var i=ti(a);if(i==0)h.text=a.Q;else{var j,m=a.g.Af();j=mm(a,0);if(m>1){for(var o=1;o<m;++o)j+=mm(a,o);j=j/m%360}j=j>350||j<=10?"E":j>10&&j<=80?"SE":
j>80&&j<=100?"S":j>100&&j<=170?"SW":j>170&&j<=190?"W":j>190&&j<=260?"NW":j>260&&j<=280?"N":"NE";m="center";if(j=="SW"||j=="W"||j=="NW"){m="right";if(i==1)h.text="H";h.text+=a.Q}else{m="left";h.text=a.Q+"H"}if(i>1)h.Bd=String(i)}if(a.Za)if(a.Za>1)h.zc+="+"+a.Za;else if(a.Za<-1)h.zc+=a.Za;else if(a.Za==-1)h.zc="-";else if(a.Za==1)h.zc="+"}else h.text="";h.Vf=m;a=this.ba;m=h.text.length*0.55*f.size;i=f.size;if(h.text){c.add(Mk(a,h.text,b.x-m/2,b.y-i/2,m,i,h.Vf,l,f,d,e));if(h.Vf=="left"){if(h.Bd||h.zc){j=
this.k.l("subscriptSize");h.Bd&&c.add(Mk(a,h.Bd,b.x+m*0.9,b.y,j,j,"center",l,f,d,e));h.zc&&c.add(Mk(a,h.zc,b.x+m,b.y-i*0.8,j,j,"center",l,f,d,e))}}else if(h.Vf=="right")if(h.Bd||h.zc){j=this.k.l("subscriptSize");if(h.Bd){c.add(Mk(a,"H",b.x-m*3,b.y-i/2,m,i,"center",l,f,d,e));c.add(Mk(a,h.Bd,b.x-m*1.8,b.y,j,j,"center",l,f,d,e))}h.zc&&c.add(Mk(a,h.zc,b.x+m,b.y-i*0.8,j,j,"center",l,f,d,e))}}return c};
km.prototype.la=function(a,b,c){var d=this.k.l("atom");b||(b=this.k.l(a.Q)?this.k.l(a.Q).color:d.color);c||(c=new Nj);b=new el(b,0.3);d=d.highlight.radius*this.transform.ha;a=R(this.transform,[a.a])[0];c.add(this.ba.tf(a.x,a.y,d,d,l,b,void 0));return c};function mm(a,b){if(a.g.M().length==0)return 0;var c=a.g.M()[b],d=c.target.a,e=c.source.a,f=d.y-e.y;d=d.x-e.x;if(a==c.source){d=-d;f=-f}c=Math.atan2(f,d)*180/Math.PI;if(c<0)c=360+c;return c}km.prototype.G=E("kemia.view.AtomRenderer");
var lm={atom:{color:"#FF9999",diameter:0.05,highlight:{radius:0.3},stroke:{width:0.15},fontName:"Arial"},showTerminalCarbons:k,margin:20,subscriptSize:5,N:{color:"blue"},O:{color:"red"},S:{color:"yellow"},P:{color:"orange"},Cl:{color:"green"},F:{color:"green"},Br:{color:"DarkRed"},I:{color:"purple"},C:{color:"black"},R1:{color:"black"},R2:{color:"black"},H:{color:"white"}};function nm(a,b){Wl.call(this,a,nm.jd,b)}A(nm,Wl);nm.prototype.R=function(a,b){this.setTransform(b);var c=new Ek,d=pi(this.transform,[a.ya()])[0],e=R(this.transform,[a.e[0].a])[0];e=wc(d,e)*0.5;c.moveTo(d.x+e,d.y);c.arcTo(e,e,0,180);c.moveTo(d.x+e,d.y);c.arcTo(e,e,0,-180)};function om(a,b){Ul.call(this,a,pm,b);this.Ze=1;this.Kd=new hm(a,this.k);this.Ab=new km(a,this.k);this.sk=new nm(a,this.k)}A(om,Ul);om.prototype.G=E("kemia.view.MoleculeRenderer");om.prototype.ie=ba("Ze");
om.prototype.R=function(a,b){if(a.ia)a.ia.clear();else a.ia=new Nj;a.ag=k;var c=C(a.e,function(h){return h.a});c=Ud.apply(l,c);if(!b){var d=this.k.l("margin");b=Vl(this,c.expand(d,d,d,d))}this.setTransform(b);R(this.transform,[new L((c.left+c.right)/2,(c.top+c.bottom)/2)]);c=new fl(this.k.l("bond").stroke.width,this.k.l("bond").stroke.color);d=new el(this.k.l("bond").fill.color);var e=new Ek;B(a.g,function(h){this.Kd.l(h).R(h,b,e)},this);var f=this.sk;B(gj(a),function(h){La(h.g,function(i){return i.Ub}).length==
h.g.length&&this.ia.add(f.R(h,b,e))});a.ia.add(this.ba.gc(e,c,d));B(a.e,function(h){this.Ab.R(h,b,a.ia)},this)};om.prototype.la=function(a,b,c){b||(b=this.k.l("highlight").color);c||(c=new Nj);B(a.g,function(d){this.Kd.l(d).la(d,b,c)},this);B(a.e,function(d){this.Ab.la(d,b,c)},this);return c};var pm={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},highlight:{radius:0.3,color:"blue"}};function qm(a,b){Ul.call(this,a,rm,b)}A(qm,Ul);
qm.prototype.R=function(a,b){this.setTransform(b);if(a.ia)a.ia.clear();else a.ia=new Nj;var c=this.k.l("arrow").height,d=wc(a.target,a.source),e=Sg(a.source.x,a.source.y,a.target.x,a.target.y),f=Rg(e+90),h=Rg(e-90),i=new L((a.source.x+a.target.x)/2,(a.source.y+a.target.y)/2),j=new L(i.x,i.y+c),m=new L(i.x,i.y-c),o=new L(i.x-d/2,i.y),p=new L(i.x+d/2,i.y),q=new L(p.x-c,p.y+c/2),t=new L(p.x-c,p.y-c/2);c=new Ek;d=new fl(this.k.l("arrow").stroke.width,this.k.l("arrow").stroke.color);var v=new fl(this.k.l("arrow").font.stroke.width,
this.k.l("arrow").font.stroke.color),y=new el(this.k.l("arrow").font.stroke.color),H=b.ha,K=H/1.8>12?15:H/1.8;H=new cl(K,this.k.l("arrow").font.name);e=bj(new ej,N(e),i.x,i.y);i=e.ha;var na=e.Aa;e.ha=b.ha*i+b.Ha*na;e.Aa=b.Aa*i+b.ua*na;i=e.Ha;na=e.ua;e.Ha=b.ha*i+b.Ha*na;e.ua=b.Aa*i+b.ua*na;i=e.jb;na=e.kb;e.jb=b.ha*i+b.Ha*na+b.jb;e.kb=b.Aa*i+b.ua*na+b.kb;j=R(e,[o,p,q,t,j,m]);c.moveTo(j[0].x,j[0].y);c.lineTo(j[1].x,j[1].y);c.lineTo(j[2].x,j[2].y);c.moveTo(j[1].x,j[1].y);c.lineTo(j[3].x,j[3].y);m=N(f);
f=N(h);h=M(new L(K*Math.cos(m),-K*Math.sin(m)),j[0]);m=M(new L(K*Math.cos(m),-K*Math.sin(m)),j[1]);o=M(new L(K*Math.cos(f),-K*Math.sin(f)),j[0]);K=M(new L(K*Math.cos(f),-K*Math.sin(f)),j[1]);a.ia.add(this.ba.we(a.Eh,h.x,h.y,m.x,m.y,"center",H,v,y));a.ia.add(this.ba.we(a.Lg,o.x,o.y,K.x,K.y,"center",H,v,y));a.ia.add(this.ba.gc(c,d))};
qm.prototype.la=function(a,b,c){b||(b=this.k.l("arrow").highlight.color);c||(c=this.ba.te());var d=Sg(a.source.x,a.source.y,a.target.x,a.target.y),e=N(Rg(d+90));d=N(Rg(d-90));var f=this.transform.ha,h=this.k.l("arrow").highlight.radius*f;a=R(this.transform,[a.source,a.target]);f=M(new L(h*Math.cos(e),-h*Math.sin(e)),a[0]);var i=M(new L(h*Math.cos(e),-h*Math.sin(e)),a[1]);e=M(new L(h*Math.cos(d),-h*Math.sin(d)),a[0]);d=M(new L(h*Math.cos(d),-h*Math.sin(d)),a[1]);h=new Ek;h.moveTo(a[0].x,a[0].y);h.lineTo(f.x,
f.y);h.lineTo(i.x,i.y);h.lineTo(a[1].x,a[1].y);h.close();b=new el(b,0.15);this.ba.gc(h,l,b,c);f=new Ek;f.moveTo(a[0].x,a[0].y);f.lineTo(e.x,e.y);f.lineTo(d.x,d.y);f.lineTo(a[1].x,a[1].y);f.close();this.ba.gc(f,l,b,c);return c};qm.prototype.G=E("kemia.view.ArrowRenderer");var rm={arrow:{height:0.5,stroke:{width:2,color:"black"},fill:{color:"black"},font:{name:"Arial",stroke:{width:0.1,color:"grey"}},highlight:{radius:0.75,color:"grey"}}};function sm(a,b){Ul.call(this,a,tm,b)}A(sm,Ul);sm.prototype.R=function(a,b){if(a.ia)a.ia.clear();else a.ia=new Nj;this.setTransform(b);a.Sk=this.ba.te();var c=a.a,d=this.k.l("plus").size,e=new L(c.x,c.y-d),f=new L(c.x,c.y+d),h=new L(c.x-d,c.y),i=new L(c.x+d,c.y);c=new Ek;d=new fl(this.k.l("plus").stroke.width,this.k.l("plus").stroke.color);e=R(b,[e,f,h,i]);c.moveTo(e[0].x,e[0].y);c.lineTo(e[1].x,e[1].y);c.moveTo(e[2].x,e[2].y);c.lineTo(e[3].x,e[3].y);a.ia.add(this.ba.gc(c,d))};
sm.prototype.la=function(a,b,c){b||(b=this.k.l("plus").highlight.color);c||(c=this.ba.te());b=new el(b,0.3);var d=this.k.l("plus").highlight.radius*this.transform.ha;a=R(this.transform,[a.a])[0];this.ba.tf(a.x,a.y,d,d,l,b,c);return c};var tm={plus:{highlight:{color:"blue",radius:0.4},size:0.25,stroke:{width:2,color:"black"}}};function um(a,b){Ul.call(this,a,vm,b);this.Ze=1;this.ca=new om(a,this.k);this.nf=new qm(a,this.k);this.gg=new sm(a,this.k)}A(um,Ul);um.prototype.R=function(a){var b=a.td;if(!this.transform)if(b.length>0){var c=wm(this,b),d=this.k.l("margin");c.expand(d,d,d,d);this.setTransform(Vl(this,c))}else this.setTransform(new ej(25,0,0,-25,100,100));B(b,function(e){this.ca.R(e,this.transform)},this);B(a.Ib,function(e){this.gg.R(e,this.transform)},this);B(a.ja,function(e){this.nf.R(e,this.transform)},this)};
function wm(a,b){var c=ab(C(b,function(d){return d.e}));c=C(c,function(d){return d.a});if(c.length>0)return Ud.apply(l,c)}um.prototype.G=E("kemia.view.ReactionRenderer");um.prototype.ie=function(a){this.Ze=a;this.ca.ie(a)};var vm={margin:4};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function xm(a,b){this.id=a.id;this.Jm=zc(a);this.Z=a;var c=a.clientWidth,d=a.clientHeight;c=F?new Fl(c,d,void 0,void 0,void 0):I&&(!J("420")||ec)?new gl(c,d,void 0,void 0,void 0):new rl(c,d,void 0,void 0,void 0);c.i();this.ba=c;this.ba.R(a);this.r=[];this.Lc={};this.be={};for(var e in Eh)this.be[e]=[];this.k=new nb(ym);b&&this.k.Id(b);this.j=new um(this.ba,this.k);this.Oi=this.Qi=n;this.Sd=new Qd(this);this.qj=new Uh(document);this.am=[];zm(this,"keydown",this.od);zm(this,"keypress",this.en);zm(this,
"keyup",this.gn);zm(this,"mousedown",this.cl);zm(this,"mousemove",this.dl);zm(this,"mouseup",this.Ei);zm(this,"paste",this.fl);Gd(this.qj,"shortcut",this.$k,undefined,this);if(this.wk&&this.wn()){e=this.wk;c=this.f();c=zc(c);var f=l;if(F){f=c.aa.createStyleSheet();ne(f,e)}else{d=Ec(c.aa,"head",void 0,void 0)[0];if(!d){f=Ec(c.aa,"body",void 0,void 0)[0];d=c.i("head");f.parentNode.insertBefore(d,f)}f=c.i("style");ne(f,e);c.appendChild(d,f)}}this.dispatchEvent(Am);for(var h in this.Lc)this.Lc[h].vf(this);
this.Yf=Bm;this.Oi=this.Qi=n;this.selected=[];this.Oe=[]}var Cm;A(xm,Sd);function gi(a,b){a.selected.push(b)}u=xm.prototype;u.clear=function(){Dm(this);this.dispatchEvent(Em)};function Dm(a){a.ba.clear();a.r=[new zi];a.Oe=new Ql([],1,0.5);var b=new el(a.k.l("background").color);a.ba.Xg(0,0,a.ba.md().width,a.ba.md().height,l,b)}u.ie=function(a){this.j.transform=undefined;this.j.ie(a)};
function S(a,b){Dm(a);a.r=[];B(b,function(d){var e;if(d instanceof zi)e=d;if(d instanceof U){e=new zi;e.lf(d)}this.r.push(e)},a);var c=ab(C(b,function(d){if(d instanceof U)return Tl([d]);if(d instanceof zi)return Sl([d])}));if(c.length>0)a.Oe=new Ql(c,1,0.5);a.R()}u.Mc=function(a){Q(this);S(this,a)};u.R=function(){B(this.r,function(a){a instanceof zi&&this.j.R(a);a instanceof U&&this.j.ca.R(a)},this)};u.Hk=r("r");
function Q(a){a.gk=Hi(C(a.r,function(b){if(b instanceof zi)return uj(b);else if(b instanceof U)return qj(b)}));a.dispatchEvent(Yj)}u.ce=function(a){for(var b=this.be[a],c=Wa(arguments,1),d=0;d<b.length;++d){var e=b[d];if((e.ma(this)||Dh[a])&&e[Eh[a]].apply(e,c))return k}return n};function P(a){a.Qi=k;a.Oi=k}
function fi(a,b,c){b=Mj(a,b,c);a=La(b,function(d){return d instanceof T},a);if(a.length>0)return a[0];a=La(b,function(d){return d instanceof W});if(a.length>0)return a[0];a=La(b,function(d){return d instanceof U});if(a.length>0)return a[0];a=La(b,function(d){return d instanceof Lh});if(a.length>0)return a[0];b=La(b,function(d){return d instanceof Ph});if(b.length>0)return b[0]}function Qj(a,b){return pi(a.j.transform?a.j.transform.pb():a.j.ca.transform.pb(),[b])[0]}
function ki(a){var b=a.currentTarget,c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;c-=b.offsetLeft;for(a-=b.offsetTop;b=b.offsetParent;){c-=b.offsetLeft;a-=b.offsetTop}return new L(c,a)}function Mj(a,b,c){c!==undefined||(c=ki(b));b=pi(a.j.transform?a.j.transform.pb():a.j.ca.transform.pb(),[c])[0];return Bj(a.Oe,{x:b.x,y:b.y})}
u.bh=function(a,b){b!==undefined||(b=[]);return La(C(a,function(c){var d=Bj(this.Oe,{x:c.a.x,y:c.a.y},this);d=La(d,function(e){if(e instanceof T)return!D(b,e)});return d.length>0?[c,d[0]]:n},this),function(c){return c!=n},this)};u.dl=function(a){try{this.ce(12,a)}catch(b){this.G.info(b)}};u.Ei=function(a){this.ce(9,a)};u.cl=function(a){try{this.ce(8,a)}catch(b){this.G.info(b);this.G.info("reverting state");this.Mc(C(eval("("+this.gk+")"),tj))}};u.Ei=function(a){this.ce(9,a)};
u.$k=function(a){this.ce(5,a)};u.fl=function(a){this.ce(25,a)};function Fm(a,b,c){for(var d=a.be[7],e=0;e<d.length;++e){var f=d[e];if(f.ma(a)&&f.Xb(b)&&(c||f.hi()))return f.queryCommandValue(b)}return c?l:n}function Fh(a){B(a.be[7],function(b){b.yd&&b.yd()})}u.queryCommandValue=function(a){var b=this.Tf();if(x(a))return Fm(this,a,b);else{for(var c={},d=0;d<a.length;d++)c[a[d]]=Fm(this,a[d],b);return c}};
u.execCommand=function(a){for(var b=arguments,c,d=this.be[6],e=0;e<d.length;++e){var f=d[e];if(f.ma(this)&&f.Xb(a)){c=f.execCommand.apply(f,b);break}}return c};u.Kl=function(a){var b=a.Gc();this.Lc[b]&&this.G.log(Bb,"Cannot register the same class of plugin twice ["+b+"]",void 0);this.Lc[b]=a;for(var c in Eh)a[Eh[c]]&&this.be[c].push(a);Ch(a,this);this.Tf()&&a.vf(this)};u.Tf=function(){return this.Yf==Bm};var Bm=2;xm.prototype.G=E("kemia.controller.ReactionEditor");var Gh="cvc_"+Pd++,Am="load_"+Pd++;
Pd++;var Yj="beforechange_"+Pd++;Pd++;var Em="clear_"+Pd++;xm.prototype.m=function(){if(this.Yf==1||this.Tf())this.G.log(Cb,"Disposing an editor that is in use.",void 0);this.Z&&this.execCommand(Ig.fm);for(var a in this.Lc){var b=this.Lc[a];b.hi()||b.Ug(this)}this.Yf=0;this.Sd&&this.Sd.Ve();this.rn=l;if(this.Sd){this.Sd.$();this.Sd=l}for(;a=this.am.pop();)a.$();if(Cm==this.id)Cm=l;for(var c in this.Lc){a=this.Lc[c];a.tk&&a.$()}delete this.Lc;xm.h.m.call(this)};
xm.prototype.Tf=function(){return this.Yf==Bm};function zm(a,b,c,d,e){a.Sd.u(a.Z,b,c,d,e)}xm.prototype.Fh=function(a,b){this.qj.Fh(a,b)};var ym={background:{color:"#F0FFF0"},margin:{left:1,right:1,top:1,bottom:1}};function Gm(a,b){this.Fb=new Qd(this);this.uf=a;this.Mb=b;this.Dh=[];ze(this.Mb,function(c){c.Jb&&this.Dh.push(Hm(this,ue(c)))},this);this.Mb.vc(n);this.Fb.u(this.uf,Gh,this.Zl).u(this.Mb,"action",this.Tk)}A(Gm,Sd);function Hm(a,b){return b}u=Gm.prototype;u.eb=r("Fb");u.ab=function(){return this.Mb.ab()};u.Ea=function(a){this.Mb.Ea(a)};u.ma=function(){return this.Mb.ma()};u.uc=function(a){this.Mb.uc(a)};u.blur=function(){this.Mb.Xc(l)};
u.m=function(){Gm.h.m.call(this);if(this.Fb){this.Fb.$();delete this.Fb}if(this.Mb){this.Mb.$();delete this.Mb}delete this.uf;delete this.Dh};u.Zl=function(a){if(this.Mb.ma()&&this.dispatchEvent("change")){var b;try{b=this.uf.queryCommandValue(a.Bm||this.Dh)}catch(c){b={}}a=b;for(var d in a)if(b=xe(this.Mb,d)){var e=a[d];b.hf?b.hf(e):Ze(b,!!e)}}};u.Tk=function(a){var b;b=ue(a.target);var c=a.target.Ua(),d;if(a.target.Sf)d=a.target.Sf();this.uf.execCommand(b,c,d,a)};u.G=E("kemia.controller.ToolbarController");var Im={Qj:["BC","AD"],Pj:["Before Christ","Anno Domini"],Sj:["J","F","M","A","M","J","J","A","S","O","N","D"],$j:["J","F","M","A","M","J","J","A","S","O","N","D"],Rj:["January","February","March","April","May","June","July","August","September","October","November","December"],Zj:["January","February","March","April","May","June","July","August","September","October","November","December"],Wj:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bk:["Jan","Feb","Mar","Apr","May",
"Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dk:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Yj:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ck:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nm:["S","M","T","W","T","F","S"],ak:["S","M","T","W","T","F","S"],Xj:["Q1","Q2","Q3","Q4"],Tj:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Oj:["AM","PM"],ci:["EEEE, MMMM d, y","MMMM d, y","MMM d, y",
"M/d/yy"],di:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],em:{Md:"M/d",MMMMd:"MMMM d",MMMd:"MMM d"},im:6,tm:[5,6],jm:2};function Jm(){}function Km(a){if(typeof a=="number"){var b=new Jm;b.Sh=a;var c;c=a;if(c==0)c="Etc/GMT";else{var d=["Etc/GMT",c<0?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);c%=60;c!=0&&d.push(":",Ea(c,2));c=d.join("")}b.Dj=c;a=a;if(a==0)a="UTC";else{c=["UTC",a<0?"+":"-"];a=Math.abs(a);c.push(Math.floor(a/60)%100);a%=60;a!=0&&c.push(":",a);a=c.join("")}b.Xh=[a,a];b.pg=[];return b}b=new Jm;b.Dj=a.id;b.Sh=-a.std_offset;b.Xh=a.names;b.pg=a.transitions;return b}
function Lm(a,b){for(var c=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5,d=0;d<a.pg.length&&c>=a.pg[d];)d+=2;return d==0?0:a.pg[d-1]};function Mm(a){this.fg=[];typeof a=="number"?Nm(this,a):Om(this,a)}var Pm=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvzZ]+/];function Om(a,b){for(;b;)for(var c=0;c<Pm.length;++c){var d=b.match(Pm[c]);if(d){d=d[0];b=b.substring(d.length);if(c==0)if(d=="''")d="'";else{d=d.substring(1,d.length-1);d=d.replace(/\'\'/,"'")}a.fg.push({text:d,type:c});break}}}
function Nm(a,b){var c;if(b<4)c=Im.ci[b];else if(b<8)c=Im.di[b-4];else if(b<12)c=Im.ci[b-8]+" "+Im.di[b-8];else{Nm(a,10);return}Om(a,c)}
function Qm(a,b,c,d,e,f){a=b.length;switch(b.charAt(0)){case "G":c=d.getFullYear()>0?1:0;return a>=4?Im.Pj[c]:Im.Qj[c];case "y":c=d.getFullYear();if(c<0)c=-c;return a==2?Ea(c%100,2):String(c);case "M":a:{c=d.getMonth();switch(a){case 5:a=Im.Sj[c];break a;case 4:a=Im.Rj[c];break a;case 3:a=Im.Wj[c];break a;default:a=Ea(c+1,a)}}return a;case "k":return Ea(e.getHours()||24,a);case "S":return(e.getTime()%1E3/1E3).toFixed(Math.min(3,a)).substr(2)+(a>3?Ea(0,a-3):"");case "E":c=d.getDay();return a>=4?Im.ek[c]:
Im.Yj[c];case "a":a=e.getHours();return Im.Oj[a>=12&&a<24?1:0];case "h":return Ea(e.getHours()%12||12,a);case "K":return Ea(e.getHours()%12,a);case "H":return Ea(e.getHours(),a);case "c":a:{c=d.getDay();switch(a){case 5:a=Im.ak[c];break a;case 4:a=Im.dk[c];break a;case 3:a=Im.ck[c];break a;default:a=Ea(c,1)}}return a;case "L":a:{c=d.getMonth();switch(a){case 5:a=Im.$j[c];break a;case 4:a=Im.Zj[c];break a;case 3:a=Im.bk[c];break a;default:a=Ea(c+1,a)}}return a;case "Q":c=Math.floor(d.getMonth()/3);
return a<4?Im.Xj[c]:Im.Tj[c];case "d":return Ea(d.getDate(),a);case "m":return Ea(e.getMinutes(),a);case "s":return Ea(e.getSeconds(),a);case "v":a=f||Km(c.getTimezoneOffset());return a.Dj;case "z":b=f||Km(c.getTimezoneOffset());return a<4?b.Xh[Lm(b,c)>0?2:0]:b.Xh[Lm(b,c)>0?3:1];case "Z":b=f||Km(c.getTimezoneOffset());if(a<4){a=-(b.Sh-Lm(b,c));c=[a<0?"-":"+"];a=Math.abs(a);c.push(Ea(Math.floor(a/60)%100,2),Ea(a%60,2));a=c.join("")}else{a=b.Sh-Lm(b,c);c=["GMT"];c.push(a<=0?"+":"-");a=Math.abs(a);c.push(Ea(Math.floor(a/
60)%100,2),":",Ea(a%60,2));a=c.join("")}return a;default:return""}};var Rm=3;Rm=3;function Sm(a){if(a.Ub)return 4;if(a.sa==ii)return 1;if(a.sa==2)return 2;if(a.sa==3)return Rm;g(Error("Invalid bond type ["+a+"]"))}function Tm(a){if(a.da==11)return 1;if(a.da==13)return 6;if(a.da==12)return 4;return 0}
function Um(a,b,c,d){switch(a){case 1:switch(b){case 0:return new W(c,d);case 1:return new W(c,d,ii,11);case 4:return new W(c,d,ii,12);case 6:return new W(c,d,ii,13);default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}case 2:return new W(c,d,2);case Rm:return new W(c,d,3);case 4:a=new W(c,d);a.Ub=k;return a;case 5:g(Error("type not implemented ["+a+"]"));case 6:g(Error("type not implemented ["+a+"]"));case 7:g(Error("type not implemented ["+a+"]"));case 8:g(Error("type not implemented ["+
a+"]"));default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}}
function Vm(a){a=a.split(a.indexOf("\r\n")>0?"\r\n":"\n");var b=new U(a[0]),c=wa(a[1].slice(46,52));b.id=c;var d=parseInt(a[3].substr(0,3),10),e=parseInt(a[3].substr(3,3),10);for(c=1;c<=d;c++){var f=a[c+3],h=f.substr(30,4).replace(/(^\s*)|(\s*$)/g,""),i=parseFloat(f.substr(0,10)),j=parseFloat(f.substr(10,10));f=parseInt(f.substr(36,3),10);var m=0;if(f!=0)if(f==1)m=3;else if(f==2)m=2;else if(f==3)m=1;else if(f!=4)if(f==5)m=-1;else if(f==6)m=-2;else if(f==7)m=-3;f=new T(h,i,j,m);oi(b,f)}for(c=1;c<=
e;c++){f=a[c+3+d];f=Um(parseInt(f.substr(6,3),10),parseInt(f.substr(9,3),10),b.e[parseInt(f.substr(0,3),10)-1],b.e[parseInt(f.substr(3,3),10)-1]);li(b,f)}c=4+d+e;d=a.length;for(e=n;;){f=a[c++];if(c==d||f.indexOf("M  END")>=0)break;if(f.indexOf("M  CHG")>=0){if(!e){m=0;for(e=Y(b);m<e;m++)b.e[m].Za=0;e=k}h=parseInt(f.substr(6,3),10);for(i=0;i<h;i++){j=parseInt(f.substr(10+8*i,3),10);m=parseInt(f.substr(14+8*i,3),10);b.e[j-1].Za=m}}}return b}
function Wm(a){var b="",c="",d="",e="";c=new Date;b=a.name+"\n";for(var f=new Mm("MMddyyHHmm"),h=[],i=0;i<f.fg.length;++i){var j=f.fg[i].text;1==f.fg[i].type?h.push(Qm(f,j,c,c,c,void 0)):h.push(j)}c=new Fg("  ","Kemia   ",h.join(""));c.append("2D 0   0.00000     0.00000");c.append((Da(" ",6)+(a.id==l?"":String(a.id))).slice(-6));c.append("\n");b=b+c.toString()+"\n";c=(Da(" ",3)+Y(a)).slice(-3);f=(Da(" ",3)+a.ob()).slice(-3);c=c+f+"  0  0  0  0            999 V2000\n";for(f=0;f<Y(a);f++){var m=a.e[f];
h=(Da(" ",10)+m.a.x.toFixed(4)).slice(-10);i=(Da(" ",10)+m.a.y.toFixed(4)).slice(-10);j=(Da(" ",10)+(0).toFixed(4)).slice(-10);m=(Da(" ",3)+m.Q).slice(-3);d+=h+i+j+m+"\n"}for(f=0;f<a.ob();f++){h=a.g[f];i=Xi(a,h.source)+1;i=(Da(" ",3)+i).slice(-3);j=Xi(a,h.target)+1;j=(Da(" ",3)+j).slice(-3);m=(Da(" ",3)+Sm(h)).slice(-3);h=(Da(" ",3)+Tm(h)).slice(-3);e+=i+j+m+h+"\n"}return b+c+d+e+"M  END\n"};var Xm=RegExp(/\[[^[]+\]|Br|B|Cl|C|N|F|O|P]|S|c|n|o|s|-|=[0-9]|=[0-9]|=|#[0-9]|#[0-9][0-9]|#|\$|%[0-9][0-9]|[0-9]|\(|\)|./g),Ym=RegExp(/^\[([0-9]*)([A-Z][a-z]?|c|n|o|se|s|as)(@|@@)?(H)?([0-9])?([+-][\d]?)?\]$/),Zm=["C","c","N","n","O","o","S","s","P","F","Br","Cl","I","B"],$m=["c","n","o","s","as","se"];
function an(a,b,c){var d=a;if(a=="NONE")d=b.Ub&&c.Ub?":":"-";switch(d){case "-":return new W(b,c,ii);case "=":return new W(b,c,2);case "#":return new W(b,c,3);case ":":a=new W(b,c);a.Ub=k;return a;default:g(Error("invalid bond type ["+a+"]"))}}
function bn(a,b){for(var c=0,d=b.length;c<d;c++){var e=a.e[b[c]];if(e!=undefined){var f=b[++c];++c;var h=[],i=0,j=l;B(a.e,function(o){var p=Zi(a,e,o);if(p!=l&&p!=undefined){if(p.source!=e){p.source=e;p.target=o}i++;a:{o=gj(a);for(var q=0,t=o.length;q<t;q++)for(var v=0,y=o[q].g.length;v<y;v++)if(p==o[q].g[v]){o=k;break a}o=n}o||h.push(p)}});var m=h.length;if((i==3||i==4)&&m>0){j=0;if(i==3&&m>1||i==4&&m>2)j=1;j=h[j];j.da=f=="@"?11:13}if(i==4&&m>1){j=1;if(m==4)j=3;else if(m==4)j=2;j=h[j];j.da=f=="@"?
13:11}}}}
var cn={H:{number:1,name:"Hydrogen"},He:{number:2,name:"Helium"},Li:{number:3,name:"Lithium"},Be:{number:4,name:"Beryllium"},B:{number:5,name:"Boron"},C:{number:6,name:"Carbon"},c:{number:6,name:"Carbon"},N:{number:7,name:"Nitrogen"},n:{number:7,name:"Nitrogen"},O:{number:8,name:"Oxygen"},o:{number:8,name:"Oxygen"},F:{number:9,name:"Fluorine"},Ne:{number:10,name:"Neon"},Na:{number:11,name:"Sodium"},Mg:{number:12,name:"Magnesium"},Al:{number:13,name:"Aluminium"},Si:{number:14,name:"Silicon"},P:{number:15,
name:"Phosphorus"},S:{number:16,name:"Sulfur"},s:{number:16,name:"Sulfur"},Cl:{number:17,name:"Chlorine"},Ar:{number:18,name:"Argon"},K:{number:19,name:"Potassium"},Ca:{number:20,name:"Calcium"},Sc:{number:21,name:"Scandium"},Ti:{number:22,name:"Titanium"},V:{number:23,name:"Vanadium"},Cr:{number:24,name:"Chromium"},Mn:{number:25,name:"Manganese"},Fe:{number:26,name:"Iron"},Co:{number:27,name:"Cobalt"},Ni:{number:28,name:"Nickel"},Cu:{number:29,name:"Copper"},Zn:{number:30,name:"Zinc"},Ga:{number:31,
name:"Gallium"},Ge:{number:32,name:"Germanium"},As:{number:33,name:"Arsenic"},as:{number:33,name:"Arsenic"},Se:{number:34,name:"Selenium"},se:{number:34,name:"Selenium"},Br:{number:35,name:"Bromine"},Kr:{number:36,name:"Krypton"},Rb:{number:37,name:"Rubidium"},Sr:{number:38,name:"Strontium"},Y:{number:39,name:"Yttrium"},Zr:{number:40,name:"Zirconium"},Nb:{number:41,name:"Niobium"},Mo:{number:42,name:"Molybdenum"},Tc:{number:43,name:"Technetium"},Ru:{number:44,name:"Ruthenium"},Rh:{number:45,name:"Rhodium"},
Pd:{number:46,name:"Palladium"},Ag:{number:47,name:"Silver"},Cd:{number:48,name:"Cadmium"},In:{number:49,name:"Indium"},Sn:{number:50,name:"Tin"},Sb:{number:51,name:"Antimony"},Te:{number:52,name:"Tellurium"},I:{number:53,name:"Iodine"},Xe:{number:54,name:"Xenon"},Cs:{number:55,name:"Caesium"},Ba:{number:56,name:"Barium"},La:{number:57,name:"Lanthanum"},Ce:{number:58,name:"Cerium"},Pr:{number:59,name:"Praseodymium"},Nd:{number:60,name:"Neodymium"},Pm:{number:61,name:"Promethium"},Sm:{number:62,name:"Samarium"},
Eu:{number:63,name:"Europium"},Gd:{number:64,name:"Gadolinium"},Tb:{number:65,name:"Terbium"},Dy:{number:66,name:"Dysprosium"},Ho:{number:67,name:"Holmium"},Er:{number:68,name:"Erbium"},Tm:{number:69,name:"Thulium"},Yb:{number:70,name:"Ytterbium"},Lu:{number:71,name:"Lutetium"},Hf:{number:72,name:"Hafnium"},Ta:{number:73,name:"Tantalum"},W:{number:74,name:"Tungsten"},Re:{number:75,name:"Rhenium"},Os:{number:76,name:"Osmium"},Ir:{number:77,name:"Iridium"},Pt:{number:78,name:"Platinum"},Au:{number:79,
name:"Gold"},Hg:{number:80,name:"Mercury"},Tl:{number:81,name:"Thallium"},Pb:{number:82,name:"Lead"},Bi:{number:83,name:"Bismuth"},Po:{number:84,name:"Polonium"},At:{number:85,name:"Astatine"},Rn:{number:86,name:"Radon"},Fr:{number:87,name:"Francium"},Ra:{number:88,name:"Radium"},Ac:{number:89,name:"Actinium"},Th:{number:90,name:"Thorium"},Pa:{number:91,name:"Protactinium"},U:{number:92,name:"Uranium"},Np:{number:93,name:"Neptunium"},Pu:{number:94,name:"Plutonium"},Am:{number:95,name:"Americium"},
Cm:{number:96,name:"Curium"},Bk:{number:97,name:"Berkelium"},Cf:{number:98,name:"Californium"},Es:{number:99,name:"Einsteinium"},Fm:{number:100,name:"Fermium"},Md:{number:101,name:"Mendelevium"},No:{number:102,name:"Nobelium"},Lr:{number:103,name:"Lawrencium"},Rf:{number:104,name:"Rutherfordium"},Db:{number:105,name:"Dubnium"},Sg:{number:106,name:"Seaborgium"},Bh:{number:107,name:"Bohrium"},Hs:{number:108,name:"Hassium"},Mt:{number:109,name:"Meitnerium"},Ds:{number:110,name:"Darmstadtium"},Rg:{number:111,
name:"Roentgenium"},Cn:{number:112,name:"Copernicium"}};function $(a,b){if(arguments.length>0){this.x=a;this.y=b}}u=$.prototype;u.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};u.add=function(a){return new $(this.x+a.x,this.y+a.y)};u.cf=function(a){return new $(this.x-a.x,this.y-a.y)};u.toString=function(){return this.x+","+this.y};u.scale=function(a){this.x*=a;this.y*=a};u.normalize=function(){var a=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=a;this.y*=a};u.sub=function(a){this.x-=a.x;this.y-=a.y};
u.cj=function(a){this.x=-a.x;this.y=-a.y};u.cj=function(){this.x=-this.x;this.y=-this.y};u.mf=function(a){a=(this.x*a.x+this.y*a.y)/(this.length()*a.length());if(a<-1)a=-1;if(a>1)a=1;return Math.acos(a)};function dn(a){var b,c;b=Y(a);for(var d=Array(b),e=0;e<b;++e){d[e]=Array(b);for(var f=0;f<b;f++)d[e][f]=0}e=a.ob();for(f=0;f<e;f++){c=a.g[f];b=Xi(a,c.source);c=Xi(a,c.target);d[b][c]=1;d[c][b]=1}e=d.length;b=Array(e);for(f=0;f<e;++f)b[f]=Array(e);for(f=0;f<e;f++)for(c=0;c<e;c++)b[f][c]=d[f][c]==0?999999:1;for(f=0;f<e;f++)b[f][f]=0;for(d=0;d<e;d++)for(f=0;f<e;f++)for(c=0;c<e;c++)if(b[f][d]+b[d][c]<b[f][c])b[f][c]=b[f][d]+b[d][c];d=0;e=-1;f=a.ob();c=b.length;for(var h=0;h<c;h++)if(en(a.e[h],a,f)==1)for(var i=
0;i<c;i++)if(b[h][i]>d){d=b[h][i];e=h}return fn(a,a.e[e])}function fn(a,b){for(var c=0,d=0,e=0,f=0,h=[],i=Y(a),j=a.ob(),m=0;m<i;m++){a.e[m].lb(1,n);h[m]=new U;oi(h[m],b)}m=[];m.push(b);b.fa[1]=k;gn(a,m,h,j);for(m=0;m<i;m++)if(Y(h[m])>=d){f=h[m];for(var o=0,p=Y(f),q=0;q<p;q++)o+=en(f.e[q],a,j);f=o;if(f>e){e=f;c=m;d=Y(h[m])}}return h[c]}function en(a,b,c){for(var d=0,e=0;e<c;e++)if(b.g[e].source==a||b.g[e].target==a)d++;return d}
function gn(a,b,c,d){for(var e=[],f=b.length,h=0;h<f;h++){var i=b[h];if(!i.fa[2])for(var j=Xi(a,i),m=hj(a,i),o=0;o<m.length;o++){var p=m[o],q=V(p,i);if(!q.fa[1]&&!q.fa[0]){for(var t=Xi(a,q),v=c,y=t,H=c[j],K=new U,na=0,X=Y(H);na<X;na++)oi(K,H.e[na]);v[y]=K;oi(c[t],q);li(c[t],p);en(q,a,d)>1&&e.push(q)}}}if(e.length>0){for(b=0;b<e.length;b++)e[b].lb(1,k);gn(a,e,c,d)}}
function hn(a,b,c){var d=b;for(b=0;b<Y(a)-1;b++){var e=a.e[b],f=a.e[b+1],h=new L(e.a.x,e.a.y);d.normalize();d.scale(c);h.x+=d.x;h.y+=d.y;f.a=h;f.lb(0,k);d=k;if(jn(a)==2)d=n;d=kn(f,e,ln(a),d)}}function jn(a){if(a==l)return 0;var b=n,c=n;B(a.e,function(d){if(d.a==l||d.a.x==0&&d.a.y==0)b=k;else c=k});return!b&&c?2:b&&c?1:0}function ln(a){for(var b=0,c=0,d=0,e=0,f=Y(a);e<f;e++){var h=a.e[e];if(h.fa[0]==k){b+=h.a.x;c+=h.a.y;d++}}return new L(b/d,c/d)}
function mn(a){for(var b=0,c=0,d=0,e=0,f=a.length;e<f;e++){var h=a[e];if(h.fa[0]==k){b+=h.a.x;c+=h.a.y;d++}}return new L(b/d,c/d)}function nn(a,b){var c=0;if(a>=0&&b>=0)c=Math.atan(b/a);else if(a<0&&b>=0)c=Math.PI+Math.atan(b/a);else if(a<0&&b<0)c=Math.PI+Math.atan(b/a);else if(a>=0&&b<0)c=2*Math.PI+Math.atan(b/a);return c}
function kn(a,b,c,d){b=nn(b.a.x-a.a.x,b.a.y-a.a.y);var e=Math.PI*(120/180);d||(e=Math.PI*(60/180));b+=e;d=new $(Math.cos(b),Math.sin(b));var f=wc(new L(a.a.x+d.x,a.a.y+d.y),c);b+=e;b=new $(Math.cos(b),Math.sin(b));return wc(new L(a.a.x+b.x,a.a.y+b.y),c)>f?b:d}function on(a,b){for(var c=0;c<b;c++)if(!a.e[c].fa[0])return n;return k}
function pn(a,b,c,d,e){var f=0,h=0,i=0;i=0;var j=new $(c.x,c.y);f=new $(a.a.x,a.a.y);var m=new $(c.x,c.y);m.sub(f);c=[];var o=Y(b);h=Y(d);if(o==1){for(f=0;f<h;f++)c.push(d.e[f]);i=Math.PI*2/(h+o);d=b.e[0];h=nn(d.a.x-a.a.x,d.a.y-a.a.y);qn(c,new L(a.a.x,a.a.y),h,i,e)}else if(o==0){for(f=0;f<h;f++)c.push(d.e[f]);i=Math.PI*2/h;qn(c,new L(a.a.x,a.a.y),0,i,e)}else{i=[];j.sub(f);f=j;f.normalize();f.scale(e);f.cj();j=new L(a.a.x,a.a.y);j.x+=f.x;j.y+=f.y;for(f=0;f<o;f++)i.push(b.e[f]);do{b=n;f=0;for(o=i.length;f<
o-1;f++){var p=i[f],q=i[f+1];if(wc(j,q.a)<wc(j,p.a)){i[f]=q;i[f+1]=p;b=k}}}while(b);f=new $(i[0].a.x,i[0].a.y);b=new $(i[1].a.x,i[1].a.y);f.sub(new $(a.a.x,a.a.y));b.sub(new $(a.a.x,a.a.y));f=f.mf(m);f+=b.mf(m);b=nn(i[0].a.x-a.a.x,i[0].a.y-a.a.y);j=nn(j.x-a.a.x,j.y-a.a.y);m=l;m=b>j?b-j<Math.PI?i[1]:i[0]:j-b<Math.PI?i[0]:i[1];i=2*Math.PI-f;i=i/(h+1);for(j=0;j<h;j++)c.push(d.e[j]);h=nn(m.a.x-a.a.x,m.a.y-a.a.y);qn(c,new L(a.a.x,a.a.y),h,i,e)}}
function qn(a,b,c,d,e){var f=[];c=c;for(var h=0,i=a.length;h<i;h++){c+=d;if(c>=2*Math.PI)c-=2*Math.PI;var j=a[h];if(j.Q=="H")e*=0.6;f.push(new L(Math.cos(c)*e+b.x,Math.sin(c)*e+b.y))}h=0;for(i=a.length;h<i;h++){j=a[h];j.a=f[h];j.fa[0]=k}}function rn(a,b,c,d){var e=0;B(b.g.M(),function(f){e++;f=V(f,b);f.fa[0]?oi(d,f):oi(c,f)});return e}function sn(a){B(a,function(b){b.lb(0,n)})}function tn(a){B(a,function(b){b.lb(0,k)})};function un(a,b,c){a=Math.sqrt(Math.pow(c/(2*Math.sin(Math.PI/a.e.length)),2)-Math.pow(c/2,2));b=nn(b.x,b.y);b+=Math.PI/2;return new $(Math.cos(b)*a,Math.sin(b)*a)}
function vn(a,b,c,d,e){var f=b.e.length;if(f>2){f=e/(2*Math.sin(Math.PI/a.e.length));d.normalize();d.scale(f);c=new L(c.x+d.x,c.y+d.y);var h=wn(b);e=h[0];h=h[1];var i=new $(e.a.x,e.a.y),j=new $(h.a.x,h.a.y);i.sub(d);j.sub(d);i=i.mf(j);i=(2*Math.PI-i)/(a.e.length-b.e.length+1);var m;a:{if(xc(e.a,h.a).x==0){if(e.a.y>h.a.y){m=e;break a}}else if(e.a.x>h.a.x){m=e;break a}m=h}j=N(Sg(m.a.x,m.a.y,d.x,d.y));a=xn(m,b.g[0],a.g);b=1;h=xc(e.a,h.a);if(h.x==0){if(d.x>e.a.x)b=-1}else if(d.y-e.a.y<(d.x-e.a.x)*h.y/
h.x)b=-1;i*=b;qn(a,c,j,i,f)}else if(f==2){f=e/(2*Math.sin(Math.PI/a.e.length));e=Math.sqrt(Math.pow(f,2)-Math.pow(e/2,2));d.normalize();d.scale(e);d=new L(c.x+d.x,c.y+d.y);h=b.e[0];i=b.e[1];c=new $(h.a.x,h.a.y);e=new $(i.a.x,i.a.y);j=new $(d.x,d.y);c.sub(j);e.sub(j);c=c.mf(e);c=(2*Math.PI-c)/(a.e.length-1);j=d.x;m=d.y;var o=h.a.x-i.a.x,p=h.a.y-i.a.y;e=1;if(o==0){i=h.a.y>i.a.y?h:i;e=j<h.a.x?1:-1}else{i=h.a.x>i.a.x?h:i;e=m-h.a.y>(j-h.a.x)*p/o?1:-1}h=nn(i.a.x-d.x,i.a.y-d.y);i=i;b=b.g[0];j=[];m=0;for(o=
a.g.length-2;m<o;m++){a:{for(p=0;p<a.g.length;p++)if(a.g[p]!=b&&(a.g[p].source==i||a.g[p].target==i)){b=a.g[p];break a}b=l}i=V(b,i);j.push(i)}c*=e;qn(j,d,h,c,f)}else if(f==1){f=e/(2*Math.sin(Math.PI/a.e.length));d.normalize();d.scale(f);d=new L(c.x+d.x,c.y+d.y);c=2*Math.PI/a.e.length;h=b.e[0];e=nn(h.a.x-d.x,h.a.y-d.y);a=xn(h,b.g[0],a.g);qn(a,d,e,c,f)}}
function yn(a,b,c){var d=new U,e=0;B(b,function(f){B(f.e,function(h){var i=new U,j=new U,m=La(b,function(o){return D(o.e,h)});m=ab(C(m,function(o){return o.e}));m=zn(m);e+=rn(a,h,i,j);sn(i.e);B(i.e,function(o){oi(d,o)});i.e.length>0&&pn(h,j,m,i,c)})});return d}function xn(a,b,c){var d=Pa(c,function(e){return V(e,a)});b=La(c,function(e){return e!==d});if(b.length>0){c=V(d,a);return Sa(c,xn(c,d,b))}else return[]}
function wn(a){var b=[];B(a.e,function(c){B(c.g.M(),function(d){D(a.g,d)&&b.push(V(d,c))})});return b}function An(a,b){var c=[];B(b.e,function(d){D(a.e,d)&&c.push(d)});return c}function Bn(a,b){var c=[];B(b.g,function(d){D(a.g,d)&&c.push(d)});return c}function zn(a){var b=Ma(a,function(c,d){return M(c,d.a)},new L(0,0));return new L(b.x/a.length,b.y/a.length)}
function Cn(a,b,c,d){for(var e=Dn(b,a),f=0,h=e.length;f<h;f++){var i=e[f];if(!i.fa[0]){var j={e:An(b,i),g:Bn(b,i)},m=j.e.length;if(m==2&&c=="FUSED"||m==1&&c=="SPIRO"||m>2&&c=="BRIDGED"){m="";for(var o=0;o<j.e.length;o++)m+="\n         "+j.e[o].a+" "+j.e[o].fa[0];m=mn(j.e);o=mn(b.e);var p=new $(m.x,m.y);p=new $(p.x,p.y);p.sub(new $(o.x,o.y));vn(i,j,m,p,d);i.lb(0,k);Cn(a,i,c,d)}}}}function En(a){B(a,function(b){b.Ri||B(b.e,function(c){c.lb(0,n)})})}
function Fn(a){return Pa(a,function(b){return Na([b.source,b.target],function(c){return c.fa[2]&&!c.fa[0]&&V(b,c).fa[0]})})}
function Gn(a,b,c,d){En(c);c=La(b.e,function(p){return p.fa[0]});var e=Fn(b.g);if(e){var f=Pa([e.source,e.target],function(p){return p.fa[2]&&!p.fa[0]});e=V(e,f);d=Pa(d,function(p){return Pa(p,function(q){return D(q.e,f)})});var h=f.a.ka(),i=e.a.ka();Hn(a,d);sn(c);a=yn(b,d,In);tn(c);c=Sa(a.e,ab(C(d,function(p){return p.e})));Xa(c);a=f.a;b=e.a;a=nn(h.x-i.x,h.y-i.y)-nn(a.x-b.x,a.y-b.y);var j=new $(i.x,i.y);j.sub(new $(b.x,b.y));B(c,function(p){p.a.x+=j.x;p.a.y+=j.y});var m=Math.cos(a),o=Math.sin(a);
B(c,function(p){p=p.a;var q=p.x-i.x,t=p.y-i.y;p.x=q*m-t*o+i.x;p.y=q*o+t*m+i.y});B(d,function(p){p.Ri=k})}};function Jn(a){for(var b=[],c=Array(a.length),d=0,e=a.length;d<e;d++)c[d]=n;d=0;for(e=a.length;d<e;d++)if(!c[d]){var f=[];f.push(a[d]);c[d]=k;for(var h=a[d].e.length,i=d+1;i<a.length;i++)if(!c[i]){var j=a[i].e.length,m=0;a:for(;m<f.length;m++){h=f[m].e.length;for(var o=0;o<h;o++)for(var p=0;p<j;p++)if(f[m].e[o]==a[i].e[p]){f.push(a[i]);c[i]=k;i=d;break a}}}b.push(f)}return b}
function Dn(a,b){for(var c=[],d=a.e.length,e=0,f=b.length;e<f;e++)if(a!=b[e]){var h=b[e].e.length,i=0;a:for(;i<d;i++)for(var j=0;j<h;j++)if(a.e[i]==b[e].e[j]){c.push(b[e]);break a}}return c}Jn=function(a){var b=[],c=a;B(a,function(d){if(!D(ab(b),d)){var e=Pa(b,function(h){return D(h,d)});if(e==l){e=[d];c=La(c,function(h){return h!==d})}var f=Dn(d,c);e=Sa(e,f);c=La(c,function(h){D(f,h)});b.push(e)}});return b};
Dn=function(a,b){var c=[];B(b,function(d){Na(d.e,function(e){return d===a?n:D(a.e,e)})&&c.push(d)});return c};function Kn(a){var b=[],c=Ln(a,b);if(c>0){c=0;do{var d=Math.round(Math.random()*b.length);if(d>=b.length)d=b.length-1;var e=b[d];if(e!=undefined){var f=e[0];e=e[1];d=new $(e.a.x-f.a.x,e.a.y-f.a.y);d.normalize();if(isNaN(d.x))d.x=0.01;if(isNaN(d.y))d.y=0.01;d.scale(-1*In/3);if(Math.random()>0.5){e.a.x+=d.x;e.a.y+=d.y}else{f.a.x-=d.x;f.a.y-=d.y}f=Ln(a,b);c++}else alert("problem kemia.layout.OverlapResolver.displace p is "+d+" and len "+b.length+" and "+e)}while(f>0&&!(c>25));c=f}return c}
function Ln(a,b){for(var c=0,d=In/5,e=Y(a),f=0;f<e;f++)for(var h=a.e[f],i=h.a,j=f+1;j<e;j++){var m=a.e[j];if(wc(i,m.a)<d){c+=d;b.push([h,m])}}return c};var In=1.5;function Hn(a,b){var c=Mn(b);if(!c.fa[0]){var d={e:Nn(c.g[0],a),g:[c.g[0]]},e=Ma(d.e,function(f,h){return M(f,h.a)},new L(0,0));vn(c,d,new $(e.x/d.e.length,e.y/d.e.length),un(c,a,In),In);c.lb(0,k)}d=0;do{if(c.fa[0]){Cn(b,c,"FUSED",In);Cn(b,c,"BRIDGED",In);Cn(b,c,"SPIRO",In)}d++;if(d==b.length)d=0;c=b[d]}while(!On(b))}function Nn(a,b){b.normalize();b.scale(In);a.source.a=new L(0,0);a.source.lb(0,k);a.target.a=new L(b.x,b.y);a.target.lb(0,k);return[a.source,a.target]}
function On(a){for(var b=0;b<a.length;b++)if(!a[b].fa[0])return n;return k}function Pn(a,b,c,d){c=new U;b=hj(b,a);for(var e=0,f=b.length;e<f;e++){var h=V(b[e],a);if(d&&h.fa[0])oi(c,h);else!d&&!h.fa[0]&&oi(c,h)}return c}
function Qn(a,b,c){var d=0,e;do{d++;var f=n;a:{for(var h=0;h<b;h++){e=a.g[h];if(e.source.fa[0]&&!e.target.fa[0]){e=e.source;break a}if(!e.source.fa[0]&&e.target.fa[0]){e=e.target;break a}}e=l}var i=l,j=l;if(e!=l){i=Pn(e,a,b,n);j=Pn(e,a,b,k);h=fn(a,e);if(Y(h)>1){if(Y(j)>1){pn(e,j,ln(j),i,c);i=new $(h.e[1].a.x,h.e[1].a.y);j=new $(e.a.x,e.a.y);i.sub(j)}else i=kn(e,j.e[0],ln(a),k);e=1;for(j=Y(h);e<j;e++)h.e[e].fa[0]=n;hn(h,i,c)}else f=k}else f=k}while(!f&&d<=Y(a))}
function Mn(a){for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=0;var d=0,e=0;for(c=0;c<a.length;c++)for(var f=a[c],h=0;h<f.e.length;h++)for(var i=f[h],j=c+1;j<a.length;j++){var m=a[j];if(f!=m)for(var o=0;o<m.e.length;o++)if(i==m[o]){b[c]++;b[j]++;break}}for(c=0;c<b.length;c++)if(b[c]>d){d=b[c];e=c}return a[e]};function Rn(){}Rn.prototype.li=l;function Sn(a){var b;if(!(b=a.li)){b={};if(Tn(a)){b[0]=k;b[1]=k}b=a.li=b}return b};function Un(){return Vn(Wn)}var Wn;function Xn(){}A(Xn,Rn);function Vn(a){return(a=Tn(a))?new ActiveXObject(a):new XMLHttpRequest}Xn.prototype.oh=l;
function Tn(a){if(!a.oh&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{new ActiveXObject(d);return a.oh=d}catch(e){}}g(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.oh}Wn=new Xn;function Yn(){if(G){this.gd={};this.ug={};this.mg=[]}}Yn.prototype.bb=E("goog.net.xhrMonitor");Yn.prototype.Fa=G;Yn.prototype.uc=function(a){this.Fa=G&&a};function Zn(a,b){if(a.Fa){var c=x(b)?b:ma(b)?oa(b):"";a.bb.log(Gb,"Pushing context: "+b+" ("+c+")",void 0);a.mg.push(c)}}function $n(a){if(a.Fa){var b=a.mg.pop();a.bb.log(Gb,"Popping context: "+b,void 0);ao(a,b)}}
function bo(a,b){if(a.Fa){var c=oa(b);Ib(a.bb,"Opening XHR : "+c);for(var d=0;d<a.mg.length;d++){var e=a.mg[d];co(a,a.gd,e,c);co(a,a.ug,c,e)}}}function ao(a,b){var c=a.ug[b],d=a.gd[b];if(c&&d){a.bb.log(Gb,"Updating dependent contexts",void 0);B(c,function(e){B(d,function(f){co(this,this.gd,e,f);co(this,this.ug,f,e)},this)},a)}}function co(a,b,c,d){b[c]||(b[c]=[]);D(b[c],d)||b[c].push(d)}var eo=new Yn;var fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function go(a){this.headers=new nb;this.vg=a||l}A(go,Sd);go.prototype.bb=E("goog.net.XhrIo");var ho=/^https?:?$/i,io=[];function jo(a,b,c,d,e,f){var h=new go;io.push(h);b&&Gd(h,"complete",b);Gd(h,"ready",ua(ko,h));if(f)h.df=Math.max(0,f);h.send(a,c,d,e)}function ko(a){a.$();Qa(io,a)}u=go.prototype;u.Nc=n;u.na=l;u.tg=l;u.Me="";u.Xi="";u.Ke=0;u.Le="";u.Yg=n;u.Nf=n;u.ph=n;u.qd=n;u.df=0;u.Dd=l;
u.send=function(a,b,c,d){if(this.na)g(Error("[goog.net.XhrIo] Object is active with another request"));b=b||"GET";this.Me=a;this.Le="";this.Ke=0;this.Xi=b;this.Yg=n;this.Nc=k;this.na=this.vg?Vn(this.vg):new Un;this.tg=this.vg?Sn(this.vg):Sn(Wn);bo(eo,this.na);this.na.onreadystatechange=ta(this.fj,this);try{Ib(this.bb,lo(this,"Opening Xhr"));this.ph=k;this.na.open(b,a,k);this.ph=n}catch(e){Ib(this.bb,lo(this,"Error opening Xhr: "+e.message));mo(this,5,e);return}a=c||"";var f=this.headers.ka();d&&mb(d,
function(i,j){f.zb(j,i)});b=="POST"&&!pb(f.Va,"Content-Type")&&f.zb("Content-Type","application/x-www-form-urlencoded;charset=utf-8");mb(f,function(i,j){this.na.setRequestHeader(j,i)},this);try{if(this.Dd){lf.clearTimeout(this.Dd);this.Dd=l}if(this.df>0){Ib(this.bb,lo(this,"Will abort after "+this.df+"ms if incomplete"));this.Dd=lf.setTimeout(ta(this.Xl,this),this.df)}Ib(this.bb,lo(this,"Sending request"));this.Nf=k;this.na.send(a);this.Nf=n}catch(h){Ib(this.bb,lo(this,"Send error: "+h.message));
mo(this,5,h)}};u.dispatchEvent=function(a){if(this.na){Zn(eo,this.na);try{return go.h.dispatchEvent.call(this,a)}finally{$n(eo)}}else return go.h.dispatchEvent.call(this,a)};u.Xl=function(){if(typeof ca!="undefined")if(this.na){this.Le="Timed out after "+this.df+"ms, aborting";this.Ke=8;Ib(this.bb,lo(this,this.Le));this.dispatchEvent("timeout");this.abort(8)}};function mo(a,b,c){a.Nc=n;if(a.na){a.qd=k;a.na.abort();a.qd=n}a.Le=c;a.Ke=b;no(a);oo(a)}
function no(a){if(!a.Yg){a.Yg=k;a.dispatchEvent("complete");a.dispatchEvent("error")}}u.abort=function(a){if(this.na&&this.Nc){Ib(this.bb,lo(this,"Aborting"));this.Nc=n;this.qd=k;this.na.abort();this.qd=n;this.Ke=a||7;this.dispatchEvent("complete");this.dispatchEvent("abort");oo(this)}};u.m=function(){if(this.na){if(this.Nc){this.Nc=n;this.qd=k;this.na.abort();this.qd=n}oo(this,k)}go.h.m.call(this)};u.fj=function(){!this.ph&&!this.Nf&&!this.qd?this.yl():po(this)};u.yl=function(){po(this)};
function po(a){if(a.Nc)if(typeof ca!="undefined")if(a.tg[1]&&qo(a)==4&&ro(a)==2)Ib(a.bb,lo(a,"Local request error detected and ignored"));else if(a.Nf&&qo(a)==4)lf.setTimeout(ta(a.fj,a),0);else{a.dispatchEvent("readystatechange");if(qo(a)==4){Ib(a.bb,lo(a,"Request complete"));a.Nc=n;var b;a:switch(ro(a)){case 0:b=(b=x(a.Me)?a.Me.match(fo)[1]||l:a.Me.Lm())?ho.test(b):self.location?ho.test(self.location.protocol):k;b=!b;break a;case 200:case 204:case 304:b=k;break a;default:b=n}if(b){a.dispatchEvent("complete");
a.dispatchEvent("success")}else{a.Ke=6;var c;try{c=qo(a)>2?a.na.statusText:""}catch(d){Ib(a.bb,"Can not get status: "+d.message);c=""}a.Le=c+" ["+ro(a)+"]";no(a)}oo(a)}}}
function oo(a,b){if(a.na){var c=a.na,d=a.tg[0]?fa:l;a.na=l;a.tg=l;if(a.Dd){lf.clearTimeout(a.Dd);a.Dd=l}if(!b){Zn(eo,c);a.dispatchEvent("ready");$n(eo)}if(eo.Fa){var e=oa(c);Ib(eo.bb,"Closing XHR : "+e);delete eo.ug[e];for(var f in eo.gd){Qa(eo.gd[f],e);eo.gd[f].length==0&&delete eo.gd[f]}}try{c.onreadystatechange=d}catch(h){a.bb.log(Bb,"Problem encountered resetting onreadystatechange: "+h.message,void 0)}}}u.ra=function(){return!!this.na};function qo(a){return a.na?a.na.readyState:0}
function ro(a){try{return qo(a)>2?a.na.status:-1}catch(b){a.bb.log(Cb,"Can not get status: "+b.message,void 0);return-1}}function lo(a,b){return b+" ["+a.Xi+" "+a.Me+" "+ro(a)+"]"};/*
 Copyright 2010 Paul Novak (paul@wingu.com).

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
var so={};so.l=function(a,b){jo(a,function(c){c=c.target;c=c.na?Gi(c.na.responseText):void 0;b.apply(this,[c])})};w("goog.dom.getElement",function(a){return x(a)?document.getElementById(a):a},void 0);w("goog.dom.getAncestor",function(a,b,c,d){if(!c)a=a.parentNode;c=d==l;for(var e=0;a&&(c||e<=d);){if(b(a))return a;a=a.parentNode;e++}return l},void 0);w("goog.dom.getElementsByClass",Cc,void 0);w("goog.dom.getElementByClass",function(a,b){var c=b||document,d=l;return(d=Dc(c)?c.querySelector("."+a):Cc(a,b)[0])||l},void 0);w("goog.dom.getFirstElementChild",function(a){return Qc(a.firstChild,k)},void 0);
w("goog.dom.getNextElementSibling",function(a){return Qc(a.nextSibling,k)},void 0);w("goog.array.forEach",B,void 0);w("goog.dom.setTextContent",Sc,void 0);w("goog.ui.Prompt",Rf,void 0);w("goog.ui.Prompt.prototype.setDefaultValue",Rf.prototype.Pl,void 0);w("goog.ui.Prompt.prototype.setVisible",Rf.prototype.Ea,void 0);w("goog.now",va,void 0);w("goog.debug.Console",Sb,void 0);w("goog.debug.Console.prototype.setCapturing",Sb.prototype.Ol,void 0);
w("goog.debug.Logger.getLogger",function(a){return E(a)},void 0);w("goog.ui.Select",Bg,void 0);w("goog.ui.Select.prototype.addItem",Bg.prototype.Cc,void 0);w("goog.ui.Select.prototype.setSelectedIndex",Bg.prototype.$e,void 0);w("goog.ui.Select.prototype.render",Bg.prototype.R,void 0);w("goog.ui.Select.prototype.getValue",Bg.prototype.Ua,void 0);w("goog.ui.MenuItem",jf,void 0);w("goog.ui.Component.EventType.ACTION","action",void 0);w("goog.events.EventType.LOAD","load",void 0);
w("goog.events.listen",Gd,void 0);w("goog.array.filter",La,void 0);w("kemia.io.json.readMolecule",pj,void 0);w("kemia.io.json.writeMolecule",function(a){return Ii(new Ji,qj(a))},void 0);w("kemia.io.json.readReaction",tj,void 0);w("kemia.io.json.writeReaction",function(a){return Ii(new Ji,uj(a))},void 0);w("kemia.io.json.reactionToJson",uj,void 0);w("kemia.io.mdl.readMolfile",Vm,void 0);
w("kemia.io.mdl.readRxnfile",function(a){var b=a.indexOf("\r\n")>0?"\r\n":"\n",c=a.split(b,5);if(c[0].indexOf("$RXN")<0)g("not a RXN file");var d=new zi;d.nh=c[2]+b+c[3];var e=parseInt(c[4].substr(0,3),10);c=parseInt(c[4].substr(3,3),10);a=a.split("$MOL"+b);b=1;for(var f=e;b<=f;b++){var h=Vm(a[b]);d.lf(h)}b=1;for(f=c;b<=f;b++){h=Vm(a[b+e]);d.Cg(h)}return d},void 0);
w("kemia.io.mdl.writeRxnfile",function(a){var b="";b+="$RXN\n\n\n\n";b+=(Da(" ",3)+a.Wc().length).slice(-3);b+=(Da(" ",3)+a.Vc().length).slice(-3);b+="\n";B(a.Wc(),function(c){b+="$MOL\n";b+=Wm(c)});B(a.Vc(),function(c){b+="$MOL\n";b+=Wm(c)});return b},void 0);
w("kemia.io.smiles.SmilesParser.parse",function(a){for(var b=a.match(Xm),c=new U(a),d=0,e,f="NONE",h=[],i=[],j=[],m="",o=[],p=0;p<b.length;p++){var q=b[p];if(q!=".")if(q=="(")h.push(e);else if(q==")")if(h.length)e=h.pop();else m=" Unbalanced parents";else if(q=="-")f="-";else if(q=="=")f="=";else if(q=="#")f="#";else if(q=="$")f="$";else if(q==":")f=":";else if(q[0]=="%"){var t=parseInt(q[1]+q[2],10),v=i[t];if(v){li(c,an(f,e,v));f="NONE";i[t]=l}else i[t]=e}else if(q!="/")if(q!="\\")if(isNaN(t=parseInt(q,
10)))if(q.length>1&&(q.lastIndexOf("=",0)==0||q.lastIndexOf("#",0)==0||q.lastIndexOf("$",0)==0)&&!isNaN(t=parseInt(q.substr(1),10)))if(v=i[t]){li(c,an(j[t],e,v));f="NONE";i[t]=l;j[t]=l}else{i[t]=e;j[t]=q.substr(0,1)}else{t=q;v={Uf:l,symbol:l,da:"NONE",gl:l,Za:l,Ub:n,oi:n};var y=Ym.exec(t);if(y){v.Uf=y[1];if(cn[y[2]])v.Q=y[2];if(y[3]=="@"||y[3]=="@@"){v.da=y[3];if(y[4]=="H")v.oi=k}else v.da="NONE";if(y[4]=="H")v.gl=y[5]?y[5]:1;v.Za=y[6]=="+"?1:y[6]=="-"?-1:parseInt(y[6],10)}else if(D(Zm,t))v.Q=t;if(D($m,
v.Q)){v.Ub=k;v.Q=v.Q.length==1?v.Q.toUpperCase():v.Q[0].toUpperCase()+v.Q[1]}t=v;if(t.Q){d+=1;q=new T(t.Q,0,0,t.Za,t.Ub,t.Uf);if(e){li(c,an(f,e,q));f="NONE"}oi(c,q);if(t.da!="NONE"){o.push(Xi(c,q));o.push(t.da);o.push(t.oi)}e=q}else m=" unknown atom "+q}else if(v=i[t]){li(c,an(f,e,v));f="NONE";i[t]=l}else i[t]=e;if(m)g(Error(a+m))}bn(c,o);if(h.length)g(Error("unbalanced parens"));for(a=0;a<i.length;++a)if(i[a])g(Error("unclosed rings"));if(f!="NONE")g(Error("unpaired bond "+f));return c},void 0);
w("kemia.io.xhr",so,void 0);w("kemia.io.xhr.get",so.l,void 0);
w("kemia.layout.CoordinateGenerator.generate",function(a){for(var b=0,c=new $(0,1),d=Y(a),e=0;e<d;e++){var f=a.e[e];f.lb(0,n);f.lb(1,n);f.lb(2,n);f.lb(ri.lm,n)}if(d==1){a.e[0].coords=new L(0,0);return a}if(a.Td>1)g(Error("Molecule not connected."));e=a.ob();b=e-Y(a)+1;f=gj(a);var h=new Jn(f);if(b>0){B(f,function(i){B(i.e,function(j){j.lb(2,k)})});Ya(h,function(i,j){return Za(i.length,j.length)});b=h[h.length-1];Hn(c,b);yn(a,b,In);B(b,function(i){i.Ri=k})}else{b=dn(a);b.e[0].a=new L(0,0);b.e[0].fa[0]=
k;hn(b,c,In)}b=0;do{b++;Qn(a,e,In);Gn(c,a,f,h)}while(!on(a,d)&&b<=Y(a));Kn(a,f);return a},void 0);w("kemia.model.Reaction",zi,void 0);w("kemia.model.Reaction.prototype.addReactant",zi.prototype.lf,void 0);w("kemia.model.Reaction.prototype.addProduct",zi.prototype.Cg,void 0);w("kemia.model.Reaction.prototype.getReactants",zi.prototype.Wc,void 0);w("kemia.model.Reaction.prototype.getProducts",zi.prototype.Vc,void 0);w("kemia.model.Reaction.prototype.setConditionsText",zi.prototype.ig,void 0);
w("kemia.model.Reaction.prototype.setReagentsText",zi.prototype.kg,void 0);w("kemia.model.Reaction.prototype.getPluses",zi.prototype.Ik,void 0);w("kemia.model.Reaction.prototype.generatePluses",zi.prototype.fh,void 0);w("kemia.controller.ReactionEditor",xm,void 0);w("kemia.controller.ReactionEditor.prototype.setModels",xm.prototype.Mc,void 0);w("kemia.controller.ReactionEditor.prototype.getModels",xm.prototype.Hk,void 0);w("kemia.controller.ReactionEditor.prototype.render",xm.prototype.R,void 0);
w("kemia.controller.ReactionEditor.prototype.registerPlugin",xm.prototype.Kl,void 0);w("kemia.controller.ReactionEditor.EventType.CLEAR",Em,void 0);w("kemia.controller.ToolbarController",Gm,void 0);w("kemia.controller.DefaultToolbar.makeDefaultMoleculeToolbar",fk,void 0);w("kemia.controller.plugins.ArrowPlusEdit",Qh,void 0);w("kemia.controller.DefaultToolbar.makeDefaultMoleculeToolbar",fk,void 0);
w("kemia.controller.DefaultToolbar.makeDefaultReactionToolbar",function(a){var b=bk([]);b=b;var c=yh("editPlus","Plus","","tr-icon tr-plus");c.Jb=k;b.push(c);c=yh("editArrow","Arrow","","tr-icon tr-arrow");c.Jb=k;b.push(c);b.push(new Hg);b=dk(b);b=ek(b);return gk(b,a)},void 0);w("kemia.controller.plugins.AtomEdit",ci,void 0);w("kemia.controller.plugins.BondEdit",wi,void 0);w("kemia.controller.plugins.ClearEditor",Ai,void 0);w("kemia.controller.plugins.Erase",Bi,void 0);
w("kemia.controller.plugins.MoleculeEdit",vj,void 0);w("kemia.controller.plugins.Move",Cj,void 0);w("kemia.controller.plugins.UndoRedo",Rj,void 0);w("kemia.controller.plugins.Zoom",Zj,void 0);})();
