/*
 * Kemia JavaScript Library hudson-kemia-199
 * http://http://kemia.github.com/
 * 
 * Copyright (c) 2010 Paul Novak (paul@wingu.com)
 * 
 * Licensed under the Apache License, Version 2.0 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Date: December 16 2010
 * Revision: hudson-kemia-199
 */
(function(){function g(a){throw a;}var k=true,m=null,n=false;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function r(a){return function(){return this[a]}}function s(a){return function(){return a}}var u,ca=this;function w(a,b,c){a=a.split(".");c=c||ca;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)if(!a.length&&b!==undefined)c[d]=b;else c=c[d]?c[d]:c[d]={}}
function da(a,b){for(var c=a.split("."),d=b||ca,e;e=c.shift();)if(d[e]!=m)d=d[e];else return m;return d}function ea(){}function fa(a){a.oa=function(){return a.gk||(a.gk=new a)}}
function ga(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function ha(a){return ga(a)=="array"}function ja(a){var b=ga(a);return b=="array"||b=="object"&&typeof a.length=="number"}function y(a){return typeof a=="string"}function ka(a){return typeof a=="number"}function la(a){return ga(a)=="function"}function ma(a){a=ga(a);return a=="object"||a=="array"||a=="function"}function na(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),pa=0;function qa(a){return a.call.apply(a.bind,arguments)}function ra(a,b){var c=b||ca;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(c,e)}}else return function(){return a.apply(c,arguments)}}
function sa(){sa=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qa:ra;return sa.apply(m,arguments)}function ta(a){var b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,b);return a.apply(this,c)}}var ua=Date.now||function(){return+new Date};function z(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a}
function A(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c;a.prototype.constructor=a};function va(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function wa(a,b){if(b)return a.replace(xa,"&amp;").replace(ya,"&lt;").replace(za,"&gt;").replace(Aa,"&quot;");else{if(!Ba.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(xa,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(ya,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(za,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(Aa,"&quot;");return a}}var xa=/&/g,ya=/</g,za=/>/g,Aa=/\"/g,Ba=/[&<>\"]/;
function Ca(a,b){for(var c=0,d=va(String(a)).split("."),e=va(String(b)).split("."),f=Math.max(d.length,e.length),h=0;c==0&&h<f;h++){var i=d[h]||"",j=e[h]||"",l=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(i)||["","",""],q=o.exec(j)||["","",""];if(p[0].length==0&&q[0].length==0)break;c=Da(p[1].length==0?0:parseInt(p[1],10),q[1].length==0?0:parseInt(q[1],10))||Da(p[2].length==0,q[2].length==0)||Da(p[2],q[2])}while(c==0)}return c}
function Da(a,b){if(a<b)return-1;else if(a>b)return 1;return 0}var Ea=Math.random()*2147483648|0;function Fa(a){return a};var Ga=Array.prototype,Ha=Ga.indexOf?function(a,b,c){return Ga.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:c<0?Math.max(0,a.length+c):c;if(y(a)){if(!y(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(c=c;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},B=Ga.forEach?function(a,b,c){Ga.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=Ga.filter?function(a,b,c){return Ga.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,
e=[],f=0,h=y(a)?a.split(""):a,i=0;i<d;i++)if(i in h){var j=h[i];if(b.call(c,j,i,a))e[f++]=j}return e},C=Ga.map?function(a,b,c){return Ga.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=y(a)?a.split(""):a,h=0;h<d;h++)if(h in f)e[h]=b.call(c,f[h],h,a);return e};function Ja(a,b,c,d){if(a.reduce)return d?a.reduce(sa(b,d),c):a.reduce(b,c);var e=c;B(a,function(f,h){e=b.call(d,e,f,h,a)});return e}
var Ka=Ga.some?function(a,b,c){return Ga.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return k;return n},La=Ga.every?function(a,b,c){return Ga.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return n;return k};
function Ma(a,b,c){a:{for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a)){b=f;break a}b=-1}return b<0?m:y(a)?a.charAt(b):a[b]}function D(a,b){return Ha(a,b)>=0}function Na(a,b){var c=Ha(a,b),d;if(d=c>=0)Oa(a,c);return d}function Oa(a,b){return Ga.splice.call(a,b,1).length==1}function Pa(){return Ga.concat.apply(Ga,arguments)}function Qa(a){if(ha(a))return Pa(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function Ra(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;if(ha(c)||(d=ja(c))&&c.hasOwnProperty("callee"))a.push.apply(a,c);else if(d)for(var e=a.length,f=c.length,h=0;h<f;h++)a[e+h]=c[h];else a.push(c)}}function Sa(a){return Ga.splice.apply(a,Ta(arguments,1))}function Ta(a,b,c){return arguments.length<=2?Ga.slice.call(a,b):Ga.slice.call(a,b,c)}
function Ua(a,b){for(var c=b||a,d={},e=0,f=0;f<a.length;){var h=a[f++],i=ma(h)?na(h):h;if(!Object.prototype.hasOwnProperty.call(d,i)){d[i]=k;c[e++]=h}}c.length=e}function Va(a,b){Ga.sort.call(a,b||Wa)}function Wa(a,b){return a>b?1:a<b?-1:0}function Xa(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}function Ya(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];ha(c)?a.push.apply(a,Ya.apply(m,c)):a.push(c)}return a};var Za,$a,ab,bb,cb,db,eb;function fb(){return ca.navigator?ca.navigator.userAgent:m}function gb(){return ca.navigator}cb=bb=ab=$a=Za=n;var hb;if(hb=fb()){var ib=gb();Za=hb.indexOf("Opera")==0;$a=!Za&&hb.indexOf("MSIE")!=-1;bb=(ab=!Za&&hb.indexOf("WebKit")!=-1)&&hb.indexOf("Mobile")!=-1;cb=!Za&&!ab&&ib.product=="Gecko"}var jb=Za,E=$a,F=cb,G=ab,kb=bb,lb,mb=gb();lb=mb&&mb.platform||"";db=lb.indexOf("Mac")!=-1;eb=lb.indexOf("Win")!=-1;var nb=!!gb()&&(gb().appVersion||"").indexOf("X11")!=-1,ob;
a:{var pb="",qb;if(jb&&ca.opera){var rb=ca.opera.version;pb=typeof rb=="function"?rb():rb}else{if(F)qb=/rv\:([^\);]+)(\)|;)/;else if(E)qb=/MSIE\s+([^\);]+)(\)|;)/;else if(G)qb=/WebKit\/(\S+)/;if(qb){var sb=qb.exec(fb());pb=sb?sb[1]:""}}if(E){var tb,ub=ca.document;tb=ub?ub.documentMode:undefined;if(tb>parseFloat(pb)){ob=String(tb);break a}}ob=pb}var vb={};function I(a){return vb[a]||(vb[a]=Ca(ob,a)>=0)};var wb,xb=!E||I("9"),yb=E&&!I("9");function zb(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function Ab(a){var b=zb(a),c;c=Ta(arguments,1);for(var d=0,e=0;e<c.length;e++)if(!D(b,c[e])){b.push(c[e]);d++}c=d==c.length;a.className=b.join(" ");return c}function Bb(a){var b=zb(a),c;c=Ta(arguments,1);for(var d=0,e=0;e<b.length;e++)if(D(c,b[e])){Sa(b,e--,1);d++}c=d==c.length;a.className=b.join(" ");return c};function K(a,b){this.x=a!==undefined?a:0;this.y=b!==undefined?b:0}K.prototype.la=function(){return new K(this.x,this.y)};function Cb(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function L(a,b){return new K(a.x-b.x,a.y-b.y)}function M(a,b){return new K(a.x+b.x,a.y+b.y)};function Db(a,b){this.width=a;this.height=b}u=Db.prototype;u.la=function(){return new Db(this.width,this.height)};u.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};u.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};u.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};u.scale=function(a){this.width*=a;this.height*=a;return this};function Eb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Fb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Gb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Hb(a,b){var c;if(c=b in a)delete a[b];return c}function Ib(a,b,c){if(b in a)g(Error('The object already contains the key "'+b+'"'));a[b]=c}function Jb(a){var b={},c;for(c in a)b[a[c]]=c;return b}var Kb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];
function Lb(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Kb.length;e++){b=Kb[e];if(Object.prototype.hasOwnProperty.call(c,b))a[b]=c[b]}}}function Mb(){var a=arguments.length;if(a==1&&ha(arguments[0]))return Mb.apply(m,arguments[0]);if(a%2)g(Error("Uneven number of arguments"));for(var b={},c=0;c<a;c+=2)b[arguments[c]]=arguments[c+1];return b}
function Nb(){var a=arguments.length;if(a==1&&ha(arguments[0]))return Nb.apply(m,arguments[0]);for(var b={},c=0;c<a;c++)b[arguments[c]]=k;return b};function Ob(a){return a?new Pb(Qb(a)):wb||(wb=new Pb)}
function Rb(a,b,c,d){a=d||a;b=b&&b!="*"?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(!G||Sb(document)||I("528"))&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)if(b==h.nodeName)d[e++]=h;d.length=e;return d}else return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++){b=h.className;if(typeof b.split=="function"&&D(b.split(/\s+/),c))d[e++]=h}d.length=e;return d}else return a}
function Tb(a,b){Eb(b,function(c,d){if(d=="style")a.style.cssText=c;else if(d=="class")a.className=c;else if(d=="for")a.htmlFor=c;else if(d in Ub)a.setAttribute(Ub[d],c);else a[d]=c})}var Ub={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};
function Vb(a){var b=a.document;if(G&&!I("500")&&!kb){if(typeof a.innerHeight=="undefined")a=window;b=a.innerHeight;var c=a.document.documentElement.scrollHeight;if(a==a.top)if(c<b)b-=15;return new Db(a.innerWidth,b)}a=Sb(b);if(jb&&!I("9.50"))a=n;a=a?b.documentElement:b.body;return new Db(a.clientWidth,a.clientHeight)}function Wb(a){return a.parentWindow||a.defaultView}function Xb(){return Yb(document,arguments)}
function Yb(a,b){var c=b[0],d=b[1];if(!xb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',wa(d.name),'"');if(d.type){c.push(' type="',wa(d.type),'"');var e={};Lb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)if(y(d))c.className=d;else ha(d)?Ab.apply(m,[c].concat(d)):Tb(c,d);b.length>2&&Zb(a,c,b,2);return c}
function Zb(a,b,c,d){function e(h){if(h)b.appendChild(y(h)?a.createTextNode(h):h)}for(d=d;d<c.length;d++){var f=c[d];ja(f)&&!(ma(f)&&f.nodeType>0)?B($b(f)?Qa(f):f,e):e(f)}}function Sb(a){return a.compatMode=="CSS1Compat"}function ac(a){for(var b;b=a.firstChild;)a.removeChild(b)}function bc(a){return a&&a.parentNode?a.parentNode.removeChild(a):m}
function cc(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Qb(a){return a.nodeType==9?a:a.ownerDocument||a.document}
function dc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==3){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{ac(a);a.appendChild(Qb(a).createTextNode(b))}}var ec={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},fc={IMG:" ",BR:"\n"};function gc(a){var b=a.getAttributeNode("tabindex");if(b&&b.specified){a=a.tabIndex;return ka(a)&&a>=0}return n}
function hc(a){if(yb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];ic(a,b,k);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");E||(a=a.replace(/ +/g," "));if(a!=" ")a=a.replace(/^\s*/,"");return a}function ic(a,b,c){if(!(a.nodeName in ec))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in fc)b.push(fc[a.nodeName]);else for(a=a.firstChild;a;){ic(a,b,c);a=a.nextSibling}}
function $b(a){if(a&&typeof a.length=="number")if(ma(a))return typeof a.item=="function"||typeof a.item=="string";else if(la(a))return typeof a.item=="function";return n}function Pb(a){this.ba=a||ca.document||document}u=Pb.prototype;u.Z=Ob;function jc(a){return a.ba}u.f=function(a){return y(a)?this.ba.getElementById(a):a};u.i=function(){return Yb(this.ba,arguments)};u.createElement=function(a){return this.ba.createElement(a)};u.createTextNode=function(a){return this.ba.createTextNode(a)};
u.Ih=function(a,b,c){var d=this.ba,e=!!c;c=["<tr>"];for(var f=0;f<b;f++)c.push(e?"<td>&nbsp;</td>":"<td></td>");c.push("</tr>");c=c.join("");b=["<table>"];for(f=0;f<a;f++)b.push(c);b.push("</table>");a=d.createElement("DIV");a.innerHTML=b.join("");return a.removeChild(a.firstChild)};function kc(a){a=!G&&Sb(a.ba)?a.ba.documentElement:a.ba.body;return new K(a.scrollLeft,a.scrollTop)}u.appendChild=function(a,b){a.appendChild(b)};u.contains=cc;function lc(){}lc.prototype.qg=n;lc.prototype.aa=function(){if(!this.qg){this.qg=k;this.p()}};lc.prototype.p=aa();var mc,nc=!E||I("9"),oc=E&&!I("8");function pc(a,b){this.type=a;this.currentTarget=this.target=b}A(pc,lc);u=pc.prototype;u.p=function(){delete this.type;delete this.target;delete this.currentTarget};u.qd=n;u.Ie=k;u.stopPropagation=function(){this.qd=k};u.preventDefault=function(){this.Ie=n};function qc(a){a.preventDefault()};var rc=new Function("a","return a");function sc(a,b){a&&this.xe(a,b)}A(sc,pc);var tc=[1,4,2];u=sc.prototype;u.target=m;u.relatedTarget=m;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=n;u.altKey=n;u.shiftKey=n;u.metaKey=n;u.zk=n;u.oc=m;
u.xe=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(F)try{rc(d.nodeName)}catch(e){d=m}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=
a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.zk=db?a.metaKey:a.ctrlKey;this.state=a.state;this.oc=a;delete this.Ie;delete this.qd};function uc(a,b){return nc?a.oc.button==b:a.type=="click"?b==0:!!(a.oc.button&tc[b])}
u.stopPropagation=function(){sc.h.stopPropagation.call(this);if(this.oc.stopPropagation)this.oc.stopPropagation();else this.oc.cancelBubble=k};u.preventDefault=function(){sc.h.preventDefault.call(this);var a=this.oc;if(a.preventDefault)a.preventDefault();else{a.returnValue=n;if(oc)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}}};u.p=function(){sc.h.p.call(this);this.relatedTarget=this.currentTarget=this.target=this.oc=m};function vc(){}var wc=0;u=vc.prototype;u.key=0;u.$d=n;u.Dh=n;u.xe=function(a,b,c,d,e,f){if(la(a))this.ei=k;else if(a&&a.handleEvent&&la(a.handleEvent))this.ei=n;else g(Error("Invalid listener argument"));this.Yd=a;this.ti=b;this.src=c;this.type=d;this.capture=!!e;this.vf=f;this.Dh=n;this.key=++wc;this.$d=n};u.handleEvent=function(a){if(this.ei)return this.Yd.call(this.vf||this.src,a);return this.Yd.handleEvent.call(this.Yd,a)};function xc(a,b){this.ki=b;this.dd=[];if(a>this.ki)g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.dd.push(this.yc?this.yc():{})}A(xc,lc);xc.prototype.yc=m;xc.prototype.Lh=m;function yc(a){if(a.dd.length)return a.dd.pop();return a.yc?a.yc():{}}function zc(a,b){a.dd.length<a.ki?a.dd.push(b):Ac(a,b)}function Ac(a,b){if(a.Lh)a.Lh(b);else if(ma(b))if(la(b.aa))b.aa();else for(var c in b)delete b[c]}
xc.prototype.p=function(){xc.h.p.call(this);for(var a=this.dd;a.length;)Ac(this,a.pop());delete this.dd};var Bc;var Cc=(Bc="ScriptEngine"in ca&&ca.ScriptEngine()=="JScript")?ca.ScriptEngineMajorVersion()+"."+ca.ScriptEngineMinorVersion()+"."+ca.ScriptEngineBuildVersion():"0";var Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc;
(function(){function a(){return{da:0,gc:0}}function b(){return[]}function c(){function q(t){return h.call(q.src,q.key,t)}return q}function d(){return new vc}function e(){return new sc}var f=Bc&&!(Ca(Cc,"5.7")>=0),h;Ic=function(q){h=q};if(f){Dc=function(){return yc(i)};Ec=function(q){zc(i,q)};Fc=function(){return yc(j)};Gc=function(q){zc(j,q)};Hc=function(){return yc(l)};Jc=function(){zc(l,c())};Kc=function(){return yc(o)};Lc=function(q){zc(o,q)};Mc=function(){return yc(p)};Nc=function(q){zc(p,q)};
var i=new xc(0,600);i.yc=a;var j=new xc(0,600);j.yc=b;var l=new xc(0,600);l.yc=c;var o=new xc(0,600);o.yc=d;var p=new xc(0,600);p.yc=e}else{Dc=a;Ec=ea;Fc=b;Gc=ea;Hc=c;Jc=ea;Kc=d;Lc=ea;Mc=e;Nc=ea}})();var Oc={},Pc={},Qc={},Rc={};
function Sc(a,b,c,d,e){if(b)if(ha(b)){for(var f=0;f<b.length;f++)Sc(a,b[f],c,d,e);return m}else{d=!!d;var h=Pc;b in h||(h[b]=Dc());h=h[b];if(!(d in h)){h[d]=Dc();h.da++}h=h[d];var i=na(a),j;h.gc++;if(h[i]){j=h[i];for(f=0;f<j.length;f++){h=j[f];if(h.Yd==c&&h.vf==e){if(h.$d)break;return j[f].key}}}else{j=h[i]=Fc();h.da++}f=Hc();f.src=a;h=Kc();h.xe(c,f,a,b,d,e);c=h.key;f.key=c;j.push(h);Oc[c]=h;Qc[i]||(Qc[i]=Fc());Qc[i].push(h);if(a.addEventListener){if(a==ca||!a.ng)a.addEventListener(b,f,d)}else a.attachEvent(Tc(b),
f);return c}else g(Error("Invalid event type"))}function Uc(a,b,c,d,e){if(ha(b)){for(var f=0;f<b.length;f++)Uc(a,b[f],c,d,e);return m}d=!!d;a=Vc(a,b,d);if(!a)return n;for(f=0;f<a.length;f++)if(a[f].Yd==c&&a[f].capture==d&&a[f].vf==e)return Wc(a[f].key);return n}
function Wc(a){if(!Oc[a])return n;var b=Oc[a];if(b.$d)return n;var c=b.src,d=b.type,e=b.ti,f=b.capture;if(c.removeEventListener){if(c==ca||!c.ng)c.removeEventListener(d,e,f)}else c.detachEvent&&c.detachEvent(Tc(d),e);c=na(c);e=Pc[d][f][c];if(Qc[c]){var h=Qc[c];Na(h,b);h.length==0&&delete Qc[c]}b.$d=k;e.oi=k;Xc(d,f,c,e);delete Oc[a];return k}
function Xc(a,b,c,d){if(!d.Jf)if(d.oi){for(var e=0,f=0;e<d.length;e++)if(d[e].$d){var h=d[e].ti;h.src=m;Jc(h);Lc(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.oi=n;if(f==0){Gc(d);delete Pc[a][b][c];Pc[a][b].da--;if(Pc[a][b].da==0){Ec(Pc[a][b]);delete Pc[a][b];Pc[a].da--}if(Pc[a].da==0){Ec(Pc[a]);delete Pc[a]}}}}
function Yc(a,b,c){var d=0,e=b==m,f=c==m;c=!!c;if(a==m)Eb(Qc,function(j){for(var l=j.length-1;l>=0;l--){var o=j[l];if((e||b==o.type)&&(f||c==o.capture)){Wc(o.key);d++}}});else{a=na(a);if(Qc[a]){a=Qc[a];for(var h=a.length-1;h>=0;h--){var i=a[h];if((e||b==i.type)&&(f||c==i.capture)){Wc(i.key);d++}}}}return d}function Vc(a,b,c){var d=Pc;if(b in d){d=d[b];if(c in d){d=d[c];a=na(a);if(d[a])return d[a]}}return m}function Tc(a){if(a in Rc)return Rc[a];return Rc[a]="on"+a}
function Zc(a,b,c,d,e){var f=1;b=na(b);if(a[b]){a.gc--;a=a[b];if(a.Jf)a.Jf++;else a.Jf=1;try{for(var h=a.length,i=0;i<h;i++){var j=a[i];if(j&&!j.$d)f&=$c(j,e)!==n}}finally{a.Jf--;Xc(c,d,b,a)}}return Boolean(f)}function $c(a,b){var c=a.handleEvent(b);a.Dh&&Wc(a.key);return c}
Ic(function(a,b){if(!Oc[a])return k;var c=Oc[a],d=c.type,e=Pc;if(!(d in e))return k;e=e[d];var f,h;if(mc===undefined)mc=E&&!ca.addEventListener;if(mc){f=b||da("window.event");var i=k in e,j=n in e;if(i){if(f.keyCode<0||f.returnValue!=undefined)return k;a:{var l=n;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(o){l=k}if(l||f.returnValue==undefined)f.returnValue=k}}l=Mc();l.xe(f,this);f=k;try{if(i){for(var p=Fc(),q=l.currentTarget;q;q=q.parentNode)p.push(q);h=e[k];h.gc=h.da;for(var t=p.length-1;!l.qd&&
t>=0&&h.gc;t--){l.currentTarget=p[t];f&=Zc(h,p[t],d,k,l)}if(j){h=e[n];h.gc=h.da;for(t=0;!l.qd&&t<p.length&&h.gc;t++){l.currentTarget=p[t];f&=Zc(h,p[t],d,n,l)}}}else f=$c(c,l)}finally{if(p){p.length=0;Gc(p)}l.aa();Nc(l)}return f}d=new sc(b,this);try{f=$c(c,d)}finally{d.aa()}return f});function ad(){}A(ad,lc);u=ad.prototype;u.ng=k;u.Pf=m;u.hh=ba("Pf");u.addEventListener=function(a,b,c,d){Sc(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
u.dispatchEvent=function(a){a=a;if(y(a))a=new pc(a,this);else if(a instanceof pc)a.target=a.target||this;else{var b=a;a=new pc(a.type,this);Lb(a,b)}b=1;var c,d=a.type,e=Pc;if(d in e){e=e[d];d=k in e;var f;if(d){c=[];for(f=this;f;f=f.Pf)c.push(f);f=e[k];f.gc=f.da;for(var h=c.length-1;!a.qd&&h>=0&&f.gc;h--){a.currentTarget=c[h];b&=Zc(f,c[h],a.type,k,a)&&a.Ie!=n}}if(n in e){f=e[n];f.gc=f.da;if(d)for(h=0;!a.qd&&h<c.length&&f.gc;h++){a.currentTarget=c[h];b&=Zc(f,c[h],a.type,n,a)&&a.Ie!=n}else for(c=this;!a.qd&&
c&&f.gc;c=c.Pf){a.currentTarget=c;b&=Zc(f,c,a.type,n,a)&&a.Ie!=n}}a=Boolean(b)}else a=k;return a};u.p=function(){ad.h.p.call(this);Yc(this);this.Pf=m};function bd(a,b){this.zf=a||1;this.Qe=b||cd;this.gg=sa(this.Pk,this);this.Tg=ua()}A(bd,ad);bd.prototype.enabled=n;var cd=ca.window;u=bd.prototype;u.Xb=m;u.Pk=function(){if(this.enabled){var a=ua()-this.Tg;if(a>0&&a<this.zf*0.8)this.Xb=this.Qe.setTimeout(this.gg,this.zf-a);else{this.dispatchEvent(dd);if(this.enabled){this.Xb=this.Qe.setTimeout(this.gg,this.zf);this.Tg=ua()}}}};u.start=function(){this.enabled=k;if(!this.Xb){this.Xb=this.Qe.setTimeout(this.gg,this.zf);this.Tg=ua()}};
u.stop=function(){this.enabled=n;if(this.Xb){this.Qe.clearTimeout(this.Xb);this.Xb=m}};u.p=function(){bd.h.p.call(this);this.stop();delete this.Qe};var dd="tick";function ed(a,b,c){if(la(a)){if(c)a=sa(a,c)}else if(a&&typeof a.handleEvent=="function")a=sa(a.handleEvent,a);else g(Error("Invalid listener argument"));return b>2147483647?-1:cd.setTimeout(a,b||0)};function fd(a){this.Cb=a}A(fd,lc);var gd=new xc(0,100);u=fd.prototype;u.u=function(a,b,c,d,e){if(ha(b))for(var f=0;f<b.length;f++)this.u(a,b[f],c,d,e);else{a=Sc(a,b,c||this,d||n,e||this.Cb||this);if(this.ga)this.ga[a]=k;else if(this.Wc){this.ga=yc(gd);this.ga[this.Wc]=k;this.Wc=m;this.ga[a]=k}else this.Wc=a}return this};
u.jb=function(a,b,c,d,e){if(this.Wc||this.ga)if(ha(b))for(var f=0;f<b.length;f++)this.jb(a,b[f],c,d,e);else{a:{c=c||this;e=e||this.Cb||this;d=!!d;if(a=Vc(a,b,d))for(b=0;b<a.length;b++)if(a[b].Yd==c&&a[b].capture==d&&a[b].vf==e){a=a[b];break a}a=m}if(a){a=a.key;Wc(a);if(this.ga)Hb(this.ga,a);else if(this.Wc==a)this.Wc=m}}return this};u.Ee=function(){if(this.ga){for(var a in this.ga){Wc(a);delete this.ga[a]}zc(gd,this.ga);this.ga=m}else this.Wc&&Wc(this.Wc)};u.p=function(){fd.h.p.call(this);this.Ee()};
u.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function hd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}function id(){for(var a=new hd(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),b=1;b<arguments.length;b++){var c=arguments[b];a.top=Math.min(a.top,c.y);a.right=Math.max(a.right,c.x);a.bottom=Math.max(a.bottom,c.y);a.left=Math.min(a.left,c.x)}return a}hd.prototype.la=function(){return new hd(this.top,this.right,this.bottom,this.left)};
hd.prototype.contains=function(a){a=!this||!a?n:a instanceof hd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom;return a};hd.prototype.expand=function(a,b,c,d){if(ma(a)){this.top-=a.top;this.right+=a.right;this.bottom+=a.bottom;this.left-=a.left}else{this.top-=a;this.right+=b;this.bottom+=c;this.left-=d}return this};function jd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}jd.prototype.la=function(){return new jd(this.left,this.top,this.width,this.height)};function kd(a){return new jd(a.left,a.top,a.right-a.left,a.bottom-a.top)}jd.prototype.bi=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a){this.left=b;this.top=d;this.width=c-b;this.height=a-d;return k}}return n};
jd.prototype.contains=function(a){return a instanceof jd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};jd.prototype.fd=function(){return new Db(this.width,this.height)};function ld(a,b){var c=Qb(a);if(c.defaultView&&c.defaultView.getComputedStyle)if(c=c.defaultView.getComputedStyle(a,m))return c[b]||c.getPropertyValue(b);return""}function md(a,b){return ld(a,b)||(a.currentStyle?a.currentStyle[b]:m)||a.style[b]}function nd(a){return md(a,"position")}function od(a,b,c){var d,e=F&&(db||nb)&&I("1.9");if(b instanceof K){d=b.x;b=b.y}else{d=b;b=c}a.style.left=pd(d,e);a.style.top=pd(b,e)}
function qd(a){var b=a.getBoundingClientRect();if(E){a=a.ownerDocument;b.left-=a.documentElement.clientLeft+a.body.clientLeft;b.top-=a.documentElement.clientTop+a.body.clientTop}return b}
function rd(a){if(E)return a.offsetParent;var b=Qb(a),c=md(a,"position"),d=c=="fixed"||c=="absolute";for(a=a.parentNode;a&&a!=b;a=a.parentNode){c=md(a,"position");d=d&&c=="static"&&a!=b.documentElement&&a!=b.body;if(!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||c=="fixed"||c=="absolute"))return a}return m}
function sd(a){var b=new hd(0,Infinity,Infinity,0),c=Ob(a),d=c.ba.body,e=!G&&Sb(c.ba)?c.ba.documentElement:c.ba.body,f;for(a=a;a=rd(a);)if((!E||a.clientWidth!=0)&&(!G||a.clientHeight!=0||a!=d)&&(a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)&&md(a,"overflow")!="visible"){var h=td(a),i;i=a;if(F&&!I("1.9")){var j=parseFloat(ld(i,"borderLeftWidth"));if(ud(i)){var l=i.offsetWidth-i.clientWidth-j-parseFloat(ld(i,"borderRightWidth"));j+=l}i=new K(j,parseFloat(ld(i,"borderTopWidth")))}else i=
new K(i.clientLeft,i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x);f=f||a!=e}d=e.scrollLeft;e=e.scrollTop;if(G){b.left+=d;b.top+=e}else{b.left=Math.max(b.left,d);b.top=Math.max(b.top,e)}if(!f||G){b.right+=d;b.bottom+=e}c=Vb(Wb(c.ba)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,e+c.height);return b.top>=0&&b.left>=0&&b.bottom>b.top&&b.right>b.left?
b:m}
function td(a){var b,c=Qb(a),d=md(a,"position"),e=F&&c.getBoxObjectFor&&!a.getBoundingClientRect&&d=="absolute"&&(b=c.getBoxObjectFor(a))&&(b.screenX<0||b.screenY<0),f=new K(0,0),h;b=c?c.nodeType==9?c:Qb(c):document;if(h=E){h=Ob(b);h=!Sb(h.ba)}h=h?b.body:b.documentElement;if(a==h)return f;if(a.getBoundingClientRect){b=qd(a);a=kc(Ob(c));f.x=b.left+a.x;f.y=b.top+a.y}else if(c.getBoxObjectFor&&!e){b=c.getBoxObjectFor(a);a=c.getBoxObjectFor(h);f.x=b.screenX-a.screenX;f.y=b.screenY-a.screenY}else{e=a;
do{f.x+=e.offsetLeft;f.y+=e.offsetTop;if(e!=a){f.x+=e.clientLeft||0;f.y+=e.clientTop||0}if(G&&nd(e)=="fixed"){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}e=e.offsetParent}while(e&&e!=a);if(jb||G&&d=="absolute")f.y-=c.body.offsetTop;for(e=a;(e=rd(e))&&e!=c.body&&e!=h;){f.x-=e.scrollLeft;if(!jb||e.tagName!="TR")f.y-=e.scrollTop}}return f}
function vd(a,b,c){if(b instanceof Db){c=b.height;b=b.width}else{if(c==undefined)g(Error("missing height argument"));c=c}a.style.width=pd(b,k);a.style.height=pd(c,k)}function pd(a,b){if(typeof a=="number")a=(b?Math.round(a):a)+"px";return a}
function wd(a){var b=jb&&!I("10");if(md(a,"display")!="none")return b?new Db(a.offsetWidth||a.clientWidth,a.offsetHeight||a.clientHeight):new Db(a.offsetWidth,a.offsetHeight);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";if(b){b=a.offsetWidth||a.clientWidth;a=a.offsetHeight||a.clientHeight}else{b=a.offsetWidth;a=a.offsetHeight}c.display=d;c.position=f;c.visibility=e;return new Db(b,a)}
function xd(a){var b=td(a);a=wd(a);return new jd(b.x,b.y,a.width,a.height)}var yd={};function zd(a){return yd[a]||(yd[a]=String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()}))}function Ad(a,b){var c=a.style;if("opacity"in c)c.opacity=b;else if("MozOpacity"in c)c.MozOpacity=b;else if("filter"in c)c.filter=b===""?"":"alpha(opacity="+b*100+")"}function Bd(a,b){a.style.display=b?"":"none"}function Cd(a,b){if(E)a.cssText=b;else a[G?"innerText":"innerHTML"]=b}
function ud(a){return"rtl"==md(a,"direction")}var Dd=F?"MozUserSelect":G?"WebkitUserSelect":m;function Ed(a,b,c){c=!c?a.getElementsByTagName("*"):m;if(Dd){b=b?"none":"";a.style[Dd]=b;if(c){a=0;for(var d;d=c[a];a++)d.style[Dd]=b}}else if(E||jb){b=b?"on":"";a.setAttribute("unselectable",b);if(c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}};function Fd(){}fa(Fd);Fd.prototype.sk=0;Fd.oa();function Gd(a){this.Ab=a||Ob();this.Je=Hd}A(Gd,ad);Gd.prototype.ek=Fd.oa();var Hd=m;function Id(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}g(Error("Invalid component state"))}u=Gd.prototype;u.Eb=m;u.$=n;u.q=m;u.Je=m;u.Vg=m;u.ya=m;u.na=m;u.bc=m;u.Sk=n;
function Jd(a){return a.Eb||(a.Eb=":"+(a.ek.sk++).toString(36))}function Kd(a,b){if(a.ya&&a.ya.bc){Hb(a.ya.bc,a.Eb);Ib(a.ya.bc,b,a)}a.Eb=b}u.f=r("q");u.ab=function(){return this.Qd||(this.Qd=new fd(this))};function Ld(a,b){if(a==b)g(Error("Unable to set parent component"));if(b&&a.ya&&a.Eb&&Md(a.ya,a.Eb)&&a.ya!=b)g(Error("Unable to set parent component"));a.ya=b;Gd.h.hh.call(a,b)}u.hh=function(a){if(this.ya&&this.ya!=a)g(Error("Method not supported"));Gd.h.hh.call(this,a)};u.Z=r("Ab");
u.i=function(){this.q=this.Ab.createElement("div")};u.R=function(a){Nd(this,a)};function Nd(a,b,c){if(a.$)g(Error("Component already rendered"));a.q||a.i();b?b.insertBefore(a.q,c||m):a.Ab.ba.body.appendChild(a.q);if(!a.ya||a.ya.$)a.qa()}u.qa=function(){this.$=k;Od(this,function(a){!a.$&&a.f()&&a.qa()})};u.ub=function(){Od(this,function(a){a.$&&a.ub()});this.Qd&&this.Qd.Ee();this.$=n};
u.p=function(){Gd.h.p.call(this);this.$&&this.ub();if(this.Qd){this.Qd.aa();delete this.Qd}Od(this,function(a){a.aa()});!this.Sk&&this.q&&bc(this.q);this.ya=this.Vg=this.q=this.bc=this.na=m};u.pa=function(a,b){this.he(a,Pd(this),b)};
u.he=function(a,b,c){if(a.$&&(c||!this.$))g(Error("Component already rendered"));if(b<0||b>Pd(this))g(Error("Child component index out of bounds"));if(!this.bc||!this.na){this.bc={};this.na=[]}if(a.ya==this){this.bc[Jd(a)]=a;Na(this.na,a)}else Ib(this.bc,Jd(a),a);Ld(a,this);Sa(this.na,b,0,a);if(a.$&&this.$&&a.ya==this){c=this.wa();c.insertBefore(a.f(),c.childNodes[b]||m)}else if(c){this.q||this.i();b=Qd(this,b+1);Nd(a,this.wa(),b?b.q:m)}else this.$&&!a.$&&a.q&&a.qa()};u.wa=r("q");
function Rd(a){if(a.Je==m)a.Je=ud(a.$?a.q:a.Ab.ba.body);return a.Je}u.Zc=function(a){if(this.$)g(Error("Component already rendered"));this.Je=a};function Pd(a){return a.na?a.na.length:0}function Md(a,b){var c;if(a.bc&&b){c=a.bc;c=b in c?c[b]:void 0;c=c||m}else c=m;return c}function Qd(a,b){return a.na?a.na[b]||m:m}function Od(a,b,c){a.na&&B(a.na,b,c)}function Sd(a,b){return a.na&&b?Ha(a.na,b):-1}
u.removeChild=function(a,b){if(a){var c=y(a)?a:Jd(a);a=Md(this,c);if(c&&a){Hb(this.bc,c);Na(this.na,a);if(b){a.ub();a.q&&bc(a.q)}Ld(a,m)}}if(!a)g(Error("Child is not in parent component"));return a};function Td(a,b){a.setAttribute("role",b);a.dm=b}function Ud(a,b,c){a.setAttribute("aria-"+b,c)};function Vd(a){this.q=a;a=E?"focusout":"blur";this.jk=Sc(this.q,E?"focusin":"focus",this,!E);this.kk=Sc(this.q,a,this,!E)}A(Vd,ad);Vd.prototype.handleEvent=function(a){var b=new sc(a.oc);b.type=a.type=="focusin"||a.type=="focus"?"focusin":"focusout";try{this.dispatchEvent(b)}finally{b.aa()}};Vd.prototype.p=function(){Vd.h.p.call(this);Wc(this.jk);Wc(this.kk);delete this.q};function Wd(a,b,c,d,e){if(!E&&!(G&&I("525")))return k;if(db&&e)return Xd(a);if(e&&!d)return n;if(!c&&(b==17||b==18))return n;if(E&&d&&b==a)return n;switch(a){case 13:return k;case 27:return!G}return Xd(a)}
function Xd(a){if(a>=48&&a<=57)return k;if(a>=96&&a<=106)return k;if(a>=65&&a<=90)return k;if(G&&a==0)return k;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return k;default:return n}};function Yd(a,b,c){this.target=a;this.handle=b||a;this.Ug=c||new jd(NaN,NaN,NaN,NaN);this.ba=Qb(a);this.nc=new fd(this);Sc(this.handle,"mousedown",this.vc,n,this)}A(Yd,ad);var Zd=E||F&&I("1.9.3");u=Yd.prototype;u.screenX=0;u.screenY=0;u.Mi=0;u.Oi=0;u.sb=0;u.tb=0;u.mb=k;u.Oc=n;u.$h=0;u.pk=0;u.fk=n;u.ab=r("nc");u.Ic=ba("mb");u.p=function(){Yd.h.p.call(this);Uc(this.handle,"mousedown",this.vc,n,this);this.nc.aa();delete this.target;delete this.handle;delete this.nc};
u.vc=function(a){if(this.mb&&!this.Oc&&(a.type!="mousedown"||uc(a,0))){if(this.$h==0){$d(this,a);if(this.Oc)a.preventDefault();else return}else a.preventDefault();var b=this.ba,c=b.documentElement,d=!Zd;this.nc.u(b,"mousemove",this.qk,d);this.nc.u(b,"mouseup",this.kf,d);if(Zd){c.setCapture(n);this.nc.u(c,"losecapture",this.kf)}else this.nc.u(b?Wb(b):window,"blur",this.kf);E&&this.fk&&this.nc.u(b,"dragstart",qc);this.Gk&&this.nc.u(this.Gk,"scroll",this.uk,d);this.screenX=this.Mi=a.screenX;this.screenY=
this.Oi=a.screenY;this.sb=this.target.offsetLeft;this.tb=this.target.offsetTop;this.Ae=kc(Ob(this.ba));this.pk=ua()}};function $d(a,b){if(a.dispatchEvent(new ae("start",a,b.clientX,b.clientY,b))!==n)a.Oc=k}u.kf=function(a,b){this.nc.Ee();Zd&&this.ba.releaseCapture();if(this.Oc){this.Oc=n;this.dispatchEvent(new ae("end",this,a.clientX,a.clientY,a,be(this,this.sb),ce(this,this.tb),b))}};
u.qk=function(a){if(this.mb){var b=a.screenX-this.screenX,c=a.screenY-this.screenY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Oc){var d=this.Mi-this.screenX,e=this.Oi-this.screenY;if(d*d+e*e>this.$h){$d(this,a);if(!this.Oc){this.kf(a);return}}}c=de(this,b,c);b=c.x;c=c.y;if(this.Oc)if(this.dispatchEvent(new ae("beforedrag",this,a.clientX,a.clientY,a,b,c))!==n){ee(this,a,b,c,n);a.preventDefault()}}};
function de(a,b,c){var d=kc(Ob(a.ba));b+=d.x-a.Ae.x;c+=d.y-a.Ae.y;a.Ae=d;a.sb+=b;a.tb+=c;return new K(be(a,a.sb),ce(a,a.tb))}u.uk=function(a){var b=de(this,0,0);a.clientX=this.Ae.x-this.screenX;a.clientY=this.Ae.x-this.screenY;ee(this,a,b.x,b.y,k)};function ee(a,b,c,d){a.target.style.left=c+"px";a.target.style.top=d+"px";a.dispatchEvent(new ae("drag",a,b.clientX,b.clientY,b,c,d))}
function be(a,b){var c=a.Ug,d=!isNaN(c.left)?c.left:m;c=!isNaN(c.width)?c.width:0;return Math.min(d!=m?d+c:Infinity,Math.max(d!=m?d:-Infinity,b))}function ce(a,b){var c=a.Ug,d=!isNaN(c.top)?c.top:m;c=!isNaN(c.height)?c.height:0;return Math.min(d!=m?d+c:Infinity,Math.max(d!=m?d:-Infinity,b))}function ae(a,b,c,d,e,f,h,i){pc.call(this,a);this.clientX=c;this.clientY=d;this.ll=e;this.left=f!==undefined?f:b.sb;this.top=h!==undefined?h:b.tb;this.tl=b;this.sl=!!i}A(ae,pc);function fe(a){if(typeof a.L=="function")return a.L();if(y(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fb(a)}function ge(a,b,c){if(typeof a.forEach=="function")a.forEach(b,c);else if(ja(a)||y(a))B(a,b,c);else{var d;if(typeof a.zg=="function")d=a.zg();else if(typeof a.L!="function")if(ja(a)||y(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f);d=d}else d=Gb(a);else d=void 0;e=fe(a);f=e.length;for(var h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};function he(a){this.Ya={};this.ga=[];var b=arguments.length;if(b>1){if(b%2)g(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.hc(arguments[c],arguments[c+1])}else a&&this.zd(a)}u=he.prototype;u.da=0;u.sh=0;u.of=r("da");u.L=function(){ie(this);for(var a=[],b=0;b<this.ga.length;b++)a.push(this.Ya[this.ga[b]]);return a};u.zg=function(){ie(this);return this.ga.concat()};u.clear=function(){this.Ya={};this.sh=this.da=this.ga.length=0};
u.remove=function(a){if(je(this.Ya,a)){delete this.Ya[a];this.da--;this.sh++;this.ga.length>2*this.da&&ie(this);return k}return n};function ie(a){if(a.da!=a.ga.length){for(var b=0,c=0;b<a.ga.length;){var d=a.ga[b];if(je(a.Ya,d))a.ga[c++]=d;b++}a.ga.length=c}if(a.da!=a.ga.length){var e={};for(c=b=0;b<a.ga.length;){d=a.ga[b];if(!je(e,d)){a.ga[c++]=d;e[d]=1}b++}a.ga.length=c}}u.m=function(a,b){if(je(this.Ya,a))return this.Ya[a];return b};
u.hc=function(a,b){if(!je(this.Ya,a)){this.da++;this.ga.push(a);this.sh++}this.Ya[a]=b};u.zd=function(a){var b;if(a instanceof he){b=a.zg();a=a.L()}else{b=Gb(a);a=Fb(a)}for(var c=0;c<b.length;c++)this.hc(b[c],a[c])};u.la=function(){return new he(this)};function je(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function ke(a,b,c){Gd.call(this,c);this.Mb=a||"modal-dialog";this.qh=!!b;this.Lb=le()}A(ke,Gd);u=ke.prototype;u.mf=m;u.Aj=k;u.Yh=k;u.qh=n;u.Kf=k;u.Oh=k;u.uj=0.5;u.Wi="";u.Ka="";u.Lb=m;u.Hd=m;u.kb=n;u.zj=n;u.Ja=m;u.Fa=m;u.Vf=m;u.Ue=m;u.Vi=m;u.Uf=m;u.je=m;u.jc=m;u.ic=function(a){this.Ka=a;if(this.je)this.je.innerHTML=a};u.wa=function(){this.f()||this.R();return this.je};
u.i=function(){if(this.qh&&this.Kf&&!this.Fa){this.Fa=this.Z().i("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});this.Fa.className=this.Mb+"-bg";Bd(this.Fa,n);Ad(this.Fa,0)}else if((!this.qh||!this.Kf)&&this.Fa){bc(this.Fa);this.Fa=m}if(this.Kf&&!this.Ja){this.Ja=this.Z().i("div",this.Mb+"-bg");Ad(this.Ja,this.uj);Bd(this.Ja,n)}else if(!this.Kf&&this.Ja){bc(this.Ja);this.Ja=m}var a=this.Z();this.q=a.i("div",{className:this.Mb,tabIndex:0},this.Vf=a.i("div",{className:this.Mb+
"-title",id:Jd(this)},this.Ue=a.i("span",this.Mb+"-title-text",this.Wi),this.Uf=a.i("span",this.Mb+"-title-close")),this.je=a.i("div",this.Mb+"-content"),this.jc=a.i("div",this.Mb+"-buttons"),this.Pi=a.i("span",{tabIndex:0}));this.Vi=this.Vf.id;Td(this.f(),"dialog");Ud(this.f(),"labelledby",this.Vi||"");if(this.Ka)this.je.innerHTML=this.Ka;Bd(this.Uf,this.Yh);Bd(this.f(),n);if(this.Lb){a=this.Lb;a.q=this.jc;a.R()}};
u.R=function(a){if(this.$)g(Error("Component already rendered"));this.f()||this.i();a=a||jc(this.Z()).body;this.Fa&&a.appendChild(this.Fa);this.Ja&&a.appendChild(this.Ja);ke.h.R.call(this,a)};u.qa=function(){ke.h.qa.call(this);this.mf=new Vd(jc(this.Z()));if(this.Oh&&!this.Hd){var a=new Yd(this.f(),this.Vf);Ab(this.Vf,this.Mb+"-title-draggable");this.Hd=a}this.ab().u(this.Uf,"click",this.wk).u(this.mf,"focusin",this.tk);Td(this.f(),"dialog");this.Ue.id!==""&&Ud(this.f(),"labelledby",this.Ue.id)};
u.ub=function(){this.Xa()&&this.za(n);this.mf.aa();this.mf=m;if(this.Hd){this.Hd.aa();this.Hd=m}ke.h.ub.call(this)};
u.za=function(a){if(a!=this.kb){var b=jc(this.Z()),c=(b?Wb(b):window)||window;this.$||this.R(b.body);if(a){me(this);this.rd();this.ab().u(this.f(),"keydown",this.Nf).u(this.f(),"keypress",this.Nf).u(c,"resize",this.si)}else this.ab().jb(this.f(),"keydown",this.Nf).jb(this.f(),"keypress",this.Nf).jb(c,"resize",this.si);this.Fa&&Bd(this.Fa,a);this.Ja&&Bd(this.Ja,a);Bd(this.f(),a);a&&this.focus();if(this.kb=a)this.ab().u(this.jc,"click",this.qi);else{this.ab().jb(this.jc,"click",this.qi);this.dispatchEvent(ne);
this.zj&&this.aa()}}};u.Xa=r("kb");u.focus=function(){try{this.f().focus()}catch(a){}if(this.Lb){var b=this.Lb.me;if(b)for(var c=jc(this.Z()),d=this.jc.getElementsByTagName("button"),e=0,f;f=d[e];e++)if(f.name==b){try{if(G||jb){var h=c.createElement("input");h.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.f().appendChild(h);h.focus();this.f().removeChild(h)}f.focus()}catch(i){}break}}};
function me(a){a.Fa&&Bd(a.Fa,n);a.Ja&&Bd(a.Ja,n);var b=jc(a.Z()),c=Vb((b?Wb(b):window)||window||window),d=Math.max(b.body.scrollWidth,c.width);b=Math.max(b.body.scrollHeight,c.height);if(a.Fa){Bd(a.Fa,k);vd(a.Fa,d,b)}if(a.Ja){Bd(a.Ja,k);vd(a.Ja,d,b)}if(a.Oh){c=wd(a.f());a.Hd.Ug=new jd(0,0,d-c.width,b-c.height)}}
u.rd=function(){var a=jc(this.Z()),b=(a?Wb(a):window)||window;if(nd(this.f())=="fixed")var c=a=0;else{c=kc(this.Z());a=c.x;c=c.y}var d=wd(this.f());b=Vb(b||window);a=Math.max(a+b.width/2-d.width/2,0);c=Math.max(c+b.height/2-d.height/2,0);od(this.f(),a,c)};u.wk=function(){if(this.Yh){var a=this.Lb,b=a&&a.ig;if(b){a=a.m(b);this.dispatchEvent(new oe(b,a))&&this.za(n)}else this.za(n)}};
u.p=function(){ke.h.p.call(this);if(this.Ja){bc(this.Ja);this.Ja=m}if(this.Fa){bc(this.Fa);this.Fa=m}this.Pi=this.jc=this.Uf=m};u.qi=function(a){a:{for(a=a.target;a!=m&&a!=this.jc;){if(a.tagName=="BUTTON"){a=a;break a}a=a.parentNode}a=m}if(a&&!a.disabled){a=a.name;var b=this.Lb.m(a);this.dispatchEvent(new oe(a,b))&&this.za(n)}};
u.Nf=function(a){var b=n,c=n,d=this.Lb,e=a.target;if(a.type=="keydown")if(this.Aj&&a.keyCode==27){var f=d&&d.ig;e=e.tagName=="SELECT"&&!e.disabled;if(f&&!e){c=k;b=d.m(f);b=this.dispatchEvent(new oe(f,b))}else e||(b=k)}else{if(a.keyCode==9&&a.shiftKey&&e==this.f())c=k}else if(a.keyCode==13){if(e.tagName=="BUTTON")f=e.name;else if(d){var h=d.me,i;if(i=h)a:{i=d.q.getElementsByTagName("BUTTON");for(var j=0,l;l=i[j];j++)if(l.name==h||l.id==h){i=l;break a}i=m}i=i;e=(e.tagName=="TEXTAREA"||e.tagName=="SELECT")&&
!e.disabled;if(i&&!i.disabled&&!e)f=h}if(f){c=k;b=this.dispatchEvent(new oe(f,String(d.m(f))))}}if(b||c){a.stopPropagation();a.preventDefault()}b&&this.za(n)};u.si=function(){me(this)};u.tk=function(a){this.Pi==a.target&&ed(this.Bj,0,this)};u.Bj=function(){E&&jc(this.Z()).body.focus();this.f().focus()};function oe(a,b){this.type=pe;this.key=a;this.caption=b}A(oe,pc);var pe="dialogselect",ne="afterhide";function qe(a){this.Ab=a||Ob();he.call(this)}A(qe,he);u=qe.prototype;u.Mb="goog-buttonset";
u.me=m;u.q=m;u.ig=m;u.hc=function(a,b,c,d){he.prototype.hc.call(this,a,b);if(c)this.me=a;if(d)this.ig=a;return this};function re(a,b,c,d){return a.hc(b.key,b.caption,c,d)}u.R=function(){if(this.q){this.q.innerHTML="";var a=Ob(this.q);ge(this,function(b,c){var d=a.i("button",{name:c},b);if(c==this.me)d.className=this.Mb+"-default";this.q.appendChild(d)},this)}};
var se=z("OK"),te=z("Cancel"),ue=z("Yes"),ve=z("No"),we=z("Save"),xe=z("Continue"),ye={key:"ok",caption:se},ze={key:"cancel",caption:te},Ae={key:"yes",caption:ue},Be={key:"no",caption:ve},Ce={key:"save",caption:we},De={key:"continue",caption:xe};function le(){return re(re(new qe,ye,k),ze,n,k)}re(new qe,ye,k,k);le();re(re(new qe,Ae,k),Be,n,k);re(re(re(new qe,Ae),Be,k),ze,n,k);re(re(re(new qe,De),Ce),ze,k,k);function Ee(a,b,c,d,e,f,h){ke.call(this,e,f,h);this.Wi=a;this.Ue&&dc(this.Ue,a);this.ic(b+"<br><br>");this.hg=c;this.ff=d!==undefined?d:"";Sc(this,pe,this.ri);a=z("OK");b=z("Cancel");h=new qe(h);h.hc("ok",a,k);h.hc("cancel",b,n,k);this.Lb=h;if(this.jc)if(this.Lb){h=this.Lb;h.q=this.jc;h.R()}else this.jc.innerHTML=""}A(Ee,ke);u=Ee.prototype;u.hg=ea;u.ff="";u.Jb=m;u.Ig=n;u.$g=1;u.df=0;
u.i=function(){Ee.h.i.call(this);var a={className:this.Mb+"-userInput",value:this.ff};if(this.$g==1){this.Jb=this.Z().i("input",a);this.Jb.type="text";if(this.df)this.Jb.size=this.df}else{this.Jb=this.Z().i("textarea",a);this.Jb.rows=this.$g;if(this.df)this.Jb.cols=this.df}this.wa().appendChild(this.Z().i("div",{style:"overflow: auto"},this.Jb));if(this.$g>1)this.Lb.me=m};u.za=function(a){ke.prototype.za.call(this,a);if(a){this.Ig=n;this.Jb.value=this.ff;this.focus()}};
u.focus=function(){jb&&this.Jb.focus();this.Jb.select()};u.Jk=ba("ff");u.ri=function(a){if(!this.Ig){this.Ig=k;a.key=="ok"?ed(sa(this.hg,this,this.Jb.value),1):ed(sa(this.hg,this,m),1)}};u.p=function(){bc(this.Jb);Uc(this,pe,this.ri,k,this);Ee.h.p.call(this);this.Jb=this.rl=m};function Fe(a,b){a&&Ge(this,a,b)}A(Fe,ad);u=Fe.prototype;u.q=m;u.Ff=m;u.Pg=m;u.Gf=m;u.Xc=-1;u.Vc=-1;
var He={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Ie={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Je={61:187,
59:186},Ke=E||G&&I("525");u=Fe.prototype;u.hd=function(a){if(G&&(this.Xc==17&&!a.ctrlKey||this.Xc==18&&!a.altKey))this.Vc=this.Xc=-1;if(Ke&&!Wd(a.keyCode,this.Xc,a.shiftKey,a.ctrlKey,a.altKey))this.handleEvent(a);else this.Vc=F&&a.keyCode in Je?Je[a.keyCode]:a.keyCode};u.Xj=function(){this.Vc=this.Xc=-1};
u.handleEvent=function(a){var b=a.oc,c,d;if(E&&a.type=="keypress"){c=this.Vc;d=c!=13&&c!=27?b.keyCode:0}else if(G&&a.type=="keypress"){c=this.Vc;d=b.charCode>=0&&b.charCode<63232&&Xd(c)?b.charCode:0}else if(jb){c=this.Vc;d=Xd(c)?b.keyCode:0}else{c=b.keyCode||this.Vc;d=b.charCode||0;if(db&&d==63&&!c)c=191}var e=c,f=b.keyIdentifier;if(c)if(c>=63232&&c in He)e=He[c];else{if(c==25&&a.shiftKey)e=9}else if(f&&f in Ie)e=Ie[f];a=e==this.Xc;this.Xc=e;b=new Le(e,d,a,b);try{this.dispatchEvent(b)}finally{b.aa()}};
u.f=r("q");function Ge(a,b,c){a.Gf&&a.detach();a.q=b;a.Ff=Sc(a.q,"keypress",a,c);a.Pg=Sc(a.q,"keydown",a.hd,c,a);a.Gf=Sc(a.q,"keyup",a.Xj,c,a)}u.detach=function(){if(this.Ff){Wc(this.Ff);Wc(this.Pg);Wc(this.Gf);this.Gf=this.Pg=this.Ff=m}this.q=m;this.Vc=this.Xc=-1};u.p=function(){Fe.h.p.call(this);this.detach()};function Le(a,b,c,d){d&&this.xe(d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}A(Le,sc);function Me(a,b,c,d,e,f,h,i){var j,l=c.offsetParent;if(l){var o=l.tagName=="HTML"||l.tagName=="BODY";if(!o||nd(l)!="static"){j=td(l);o||(j=L(j,new K(l.scrollLeft,l.scrollTop)))}}l=xd(a);(o=sd(a))&&l.bi(kd(o));o=Ob(a);var p=Ob(c);if(o.ba!=p.ba){var q=o.ba.body;p=Wb(p.ba);var t=new K(0,0),v=Qb(q)?Wb(Qb(q)):window,x=q;do{var H;if(v==p)H=td(x);else{var J=x;H=new K;if(J.nodeType==1)if(J.getBoundingClientRect){var ia=qd(J);H.x=ia.left;H.y=ia.top}else{ia=kc(Ob(J));J=td(J);H.x=J.x-ia.x;H.y=J.y-ia.y}else{H.x=
J.clientX;H.y=J.clientY}H=H}H=H;t.x+=H.x;t.y+=H.y}while(v&&v!=p&&(x=v.frameElement)&&(v=v.parent));q=L(t,td(q));if(E&&!Sb(o.ba))q=L(q,kc(o));l.left+=q.x;l.top+=q.y}a=(b&4&&ud(a)?b^2:b)&-5;b=new K(a&2?l.left+l.width:l.left,a&1?l.top+l.height:l.top);if(j)b=L(b,j);if(e){b.x+=(a&2?-1:1)*e.x;b.y+=(a&1?-1:1)*e.y}var W;if(h)if((W=sd(c))&&j){W.top=Math.max(0,W.top-j.y);W.right-=j.x;W.bottom-=j.y;W.left=Math.max(0,W.left-j.x)}a:{j=W;e=b.la();W=0;a=(d&4&&ud(c)?d^2:d)&-5;d=wd(c);i=i?i.la():d;if(f||a!=0){if(a&
2)e.x-=i.width+(f?f.right:0);else if(f)e.x+=f.left;if(a&1)e.y-=i.height+(f?f.bottom:0);else if(f)e.y+=f.top}if(h){if(j){f=e;W=0;if(f.x<j.left&&h&1){f.x=j.left;W|=1}if(f.x<j.left&&f.x+i.width>j.right&&h&16){i.width-=f.x+i.width-j.right;W|=4}if(f.x+i.width>j.right&&h&1){f.x=Math.max(j.right-i.width,j.left);W|=1}if(h&2)W|=(f.x<j.left?16:0)|(f.x+i.width>j.right?32:0);if(f.y<j.top&&h&4){f.y=j.top;W|=2}if(f.y>=j.top&&f.y+i.height>j.bottom&&h&32){i.height-=f.y+i.height-j.bottom;W|=8}if(f.y+i.height>j.bottom&&
h&4){f.y=Math.max(j.bottom-i.height,j.top);W|=2}if(h&8)W|=(f.y<j.top?64:0)|(f.y+i.height>j.bottom?128:0);h=W}else h=256;W=h;if(W&496){c=W;break a}}od(c,e);h=d==i?k:!d||!i?n:d.width==i.width&&d.height==i.height;h||vd(c,i);c=W}return c};function Ne(){}Ne.prototype.rd=aa();function Oe(a,b){this.element=a;this.Fd=b}A(Oe,Ne);Oe.prototype.rd=function(a,b,c){Me(this.element,this.Fd,a,b,undefined,c)};function Pe(a,b,c){Oe.call(this,a,b);this.kj=c}A(Pe,Oe);Pe.prototype.rd=function(a,b,c,d){var e=Me(this.element,this.Fd,a,b,m,c,10,d);if(e&496){var f=this.Fd,h=b;if(e&48){f^=2;h^=2}if(e&192){f^=1;h^=1}e=Me(this.element,f,a,h,m,c,10,d);if(e&496)this.kj?Me(this.element,this.Fd,a,b,m,c,5,d):Me(this.element,this.Fd,a,b,m,c,0,d)}};function Qe(a,b,c,d){Pe.call(this,a,b,c);this.Fk=d}A(Qe,Pe);Qe.prototype.rd=function(a,b,c,d){this.Fk?Me(this.element,this.Fd,a,b,m,c,33,d):Qe.h.rd.call(this,a,b,c,d)};function Re(){}var Se;fa(Re);u=Re.prototype;u.ec=aa();u.i=function(a){return a.Z().i("div",this.Bc(a).join(" "),a.Ka)};u.wa=function(a){return a};u.oe=function(a,b,c){if(a=a.f?a.f():a)if(E&&!I("7")){var d=Te(this,zb(a),b);d.push(b);ta(c?Ab:Bb,a).apply(m,d)}else c?Ab(a,b):Bb(a,b)};u.rc=function(a){Rd(a)&&this.Zc(a.f(),k);a.ka()&&this.sc(a,a.Xa())};u.Sf=function(a,b){Ed(a,!b,!E&&!jb)};u.Zc=function(a,b){this.oe(a,this.t()+"-rtl",b)};u.Uc=function(a){var b;if(a.cb&32&&(b=a.Ma()))return gc(b);return n};
u.sc=function(a,b){var c;if(a.cb&32&&(c=a.Ma())){if(!b&&a.Ia&32){try{c.blur()}catch(d){}a.Ia&32&&a.Rc(m)}if(gc(c)!=b){c=c;if(b)c.tabIndex=0;else c.removeAttribute("tabIndex")}}};u.za=function(a,b){Bd(a,b)};u.Hb=function(a,b,c){var d=a.f();if(d){var e=this.nf(b);e&&this.oe(a,e,c);this.Ve(d,b,c)}};u.Ve=function(a,b,c){Se||(Se=Mb(1,"disabled",4,"pressed",8,"selected",16,"checked",64,"expanded"));(b=Se[b])&&Ud(a,b,c)};
u.ic=function(a,b){var c=this.wa(a);if(c){ac(c);if(b)if(y(b))dc(c,b);else{var d=function(e){if(e){var f=Qb(c);c.appendChild(y(e)?f.createTextNode(e):e)}};if(ha(b))B(b,d);else ja(b)&&!("nodeType"in b)?B(Qa(b),d):d(b)}}};u.Ma=function(a){return a.f()};u.t=s("goog-control");u.Bc=function(a){var b=this.t(),c=[b],d=this.t();d!=b&&c.push(d);b=a.Ia;for(d=[];b;){var e=b&-b;d.push(this.nf(e));b&=~e}c.push.apply(c,d);(a=a.pc)&&c.push.apply(c,a);E&&!I("7")&&c.push.apply(c,Te(this,c));return c};
function Te(a,b,c){var d=[];if(c)b=b.concat([c]);B([],function(e){if(La(e,ta(D,b))&&(!c||D(e,c)))d.push(e.join("_"))});return d}u.nf=function(a){if(!this.Gh){var b=this.t();this.Gh=Mb(1,b+"-disabled",2,b+"-hover",4,b+"-active",8,b+"-selected",16,b+"-checked",32,b+"-focused",64,b+"-open")}return this.Gh[a]};function Ue(){}A(Ue,Re);fa(Ue);u=Ue.prototype;u.ec=s("button");u.Ve=function(a,b,c){b==16?Ud(a,"pressed",c):Ue.h.Ve.call(this,a,b,c)};u.i=function(a){var b=Ue.h.i.call(this,a),c=a.Od();c&&this.Me(b,c);(c=a.Oa())&&this.Ea(b,c);a.cb&16&&this.Ve(b,16,n);return b};u.Oa=ea;u.Ea=ea;u.Od=function(a){return a.title};u.Me=function(a,b){if(a)a.title=b||""};u.t=s("goog-button");function Ve(a,b){if(!a)g(Error("Invalid class name "+a));if(!la(b))g(Error("Invalid decorator function "+b))}var We={};function Xe(a,b,c){Gd.call(this,c);if(!(b=b)){b=this.constructor;for(var d;b;){d=na(b);if(d=We[d])break;b=b.h?b.h.constructor:m}b=d?la(d.oa)?d.oa():new d:m}this.J=b;this.Tf(a)}A(Xe,Gd);u=Xe.prototype;u.Ka=m;u.Ia=0;u.cb=39;u.Ah=255;u.nh=0;u.kb=k;u.pc=m;u.Fg=k;u.eg=n;function Ye(a,b){a.$&&b!=a.Fg&&Ze(a,b);a.Fg=b}u.Ma=function(){return this.J.Ma(this)};u.qf=function(){return this.Ub||(this.Ub=new Fe)};u.cg=function(a){if(a){if(this.pc)D(this.pc,a)||this.pc.push(a);else this.pc=[a];this.J.oe(this,a,k)}};
u.oe=function(a,b){if(b)this.cg(a);else if(a&&this.pc){Na(this.pc,a);if(this.pc.length==0)this.pc=m;this.J.oe(this,a,n)}};u.i=function(){var a=this.J.i(this);this.q=a;var b=this.J.ec();b&&Td(a,b);this.eg||this.J.Sf(a,n);this.Xa()||this.J.za(a,n)};u.wa=function(){return this.J.wa(this.f())};u.qa=function(){Xe.h.qa.call(this);this.J.rc(this);if(this.cb&-2){this.Fg&&Ze(this,k);if(this.cb&32){var a=this.Ma();if(a){var b=this.qf();Ge(b,a);this.ab().u(b,"key",this.qc).u(a,"focus",this.sf).u(a,"blur",this.Rc)}}}};
function Ze(a,b){var c=a.ab(),d=a.f();if(b){c.u(d,"mouseover",a.Td).u(d,"mousedown",a.fb).u(d,"mouseup",a.jd).u(d,"mouseout",a.Sd);E&&c.u(d,"dblclick",a.Sh)}else{c.jb(d,"mouseover",a.Td).jb(d,"mousedown",a.fb).jb(d,"mouseup",a.jd).jb(d,"mouseout",a.Sd);E&&c.jb(d,"dblclick",a.Sh)}}u.ub=function(){Xe.h.ub.call(this);this.Ub&&this.Ub.detach();this.Xa()&&this.ka()&&this.J.sc(this,n)};u.p=function(){Xe.h.p.call(this);if(this.Ub){this.Ub.aa();delete this.Ub}delete this.J;this.pc=this.Ka=m};
u.ic=function(a){this.J.ic(this.f(),a);this.Tf(a)};u.Tf=ba("Ka");function $e(a,b){var c=a.Ka;if(!c||y(c))return c;return(c=ha(c)?C(c,b).join(""):hc(c))&&va(c)}u.pe=function(){return $e(this,hc)};u.Zc=function(a){Xe.h.Zc.call(this,a);var b=this.f();b&&this.J.Zc(b,a)};u.Sf=function(a){this.eg=a;var b=this.f();b&&this.J.Sf(b,a)};u.Xa=r("kb");u.za=function(a,b){if(b||this.kb!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.f();c&&this.J.za(c,a);this.ka()&&this.J.sc(this,a);this.kb=a;return k}return n};
u.ka=function(){return!(this.Ia&1)};u.Ic=function(a){var b=this.ya;if(!(b&&typeof b.ka=="function"&&!b.ka())&&af(this,1,!a)){if(!a){this.setActive(n);this.tc(n)}this.Xa()&&this.J.sc(this,a);this.Hb(1,!a)}};u.tc=function(a){af(this,2,a)&&this.Hb(2,a)};u.ra=function(){return!!(this.Ia&4)};u.setActive=function(a){af(this,4,a)&&this.Hb(4,a)};u.lh=function(a){af(this,8,a)&&this.Hb(8,a)};u.Af=function(){return!!(this.Ia&16)};function bf(a,b){af(a,16,b)&&a.Hb(16,b)}
u.ta=function(a){af(this,64,a)&&this.Hb(64,a)};u.Hb=function(a,b){if(this.cb&a&&b!=!!(this.Ia&a)){this.J.Hb(this,a,b);this.Ia=b?this.Ia|a:this.Ia&~a}};function cf(a,b,c){if(a.$&&a.Ia&b&&!c)g(Error("Component already rendered"));!c&&a.Ia&b&&a.Hb(b,n);a.cb=c?a.cb|b:a.cb&~b}function df(a,b){return!!(a.Ah&b)&&!!(a.cb&b)}function af(a,b,c){return!!(a.cb&b)&&!!(a.Ia&b)!=c&&(!(a.nh&b)||a.dispatchEvent(Id(b,c)))&&!a.qg}
u.Td=function(a){!ef(a,this.f())&&this.dispatchEvent("enter")&&this.ka()&&df(this,2)&&this.tc(k)};u.Sd=function(a){if(!ef(a,this.f())&&this.dispatchEvent("leave")){df(this,4)&&this.setActive(n);df(this,2)&&this.tc(n)}};function ef(a,b){return!!a.relatedTarget&&cc(b,a.relatedTarget)}u.fb=function(a){if(this.ka()){df(this,2)&&this.tc(k);if(uc(a,0)){df(this,4)&&this.setActive(k);this.J.Uc(this)&&this.Ma().focus()}}!this.eg&&uc(a,0)&&a.preventDefault()};
u.jd=function(a){if(this.ka()){df(this,2)&&this.tc(k);this.ra()&&this.Gc(a)&&df(this,4)&&this.setActive(n)}};u.Sh=function(a){this.ka()&&this.Gc(a)};u.Gc=function(a){df(this,16)&&bf(this,!this.Af());df(this,8)&&this.lh(k);df(this,64)&&this.ta(!(this.Ia&64));var b=new pc("action",this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,e=0;d=c[e];e++)b[d]=a[d];return this.dispatchEvent(b)};u.sf=function(){df(this,32)&&af(this,32,k)&&this.Hb(32,k)};
u.Rc=function(){df(this,4)&&this.setActive(n);df(this,32)&&af(this,32,n)&&this.Hb(32,n)};u.qc=function(a){if(this.Xa()&&this.ka()&&this.Rd(a)){a.preventDefault();a.stopPropagation();return k}return n};u.Rd=function(a){return a.keyCode==13&&this.Gc(a)};if(!la(Xe))g(Error("Invalid component class "+Xe));if(!la(Re))g(Error("Invalid renderer class "+Re));var ff=na(Xe);We[ff]=Re;Ve("goog-control",function(){return new Xe(m)});function gf(){}A(gf,Ue);fa(gf);u=gf.prototype;u.ec=aa();u.i=function(a){Ye(a,n);a.Ah&=-256;cf(a,32,n);return a.Z().i("button",{"class":this.Bc(a).join(" "),disabled:!a.ka(),title:a.Od()||"",value:a.Oa()||""},a.pe()||"")};u.rc=function(a){a.ab().u(a.f(),"click",a.Gc)};u.Sf=ea;u.Zc=ea;u.Uc=function(a){return a.ka()};u.sc=ea;u.Hb=function(a,b,c){gf.h.Hb.call(this,a,b,c);if((a=a.f())&&b==1)a.disabled=c};u.Oa=function(a){return a.value};u.Ea=function(a,b){if(a)a.value=b};u.Ve=ea;function hf(a,b,c){Xe.call(this,a,b||gf.oa(),c)}A(hf,Xe);u=hf.prototype;u.Oa=r("Zi");u.Ea=function(a){this.Zi=a;this.J.Ea(this.f(),a)};u.Od=r("Xi");u.Me=function(a){this.Xi=a;this.J.Me(this.f(),a)};u.p=function(){hf.h.p.call(this);delete this.Zi;delete this.Xi};u.qa=function(){hf.h.qa.call(this);if(this.cb&32){var a=this.Ma();a&&this.ab().u(a,"keyup",this.Rd)}};u.Rd=function(a){if(a.keyCode==13&&a.type=="key"||a.keyCode==32&&a.type=="keyup")return this.Gc(a);return a.keyCode==32};
Ve("goog-button",function(){return new hf(m)});function jf(){}A(jf,Re);fa(jf);jf.prototype.i=function(a){return a.Z().i("div",this.t())};jf.prototype.ic=aa();jf.prototype.t=s("goog-menuseparator");function kf(a,b){Xe.call(this,m,a||jf.oa(),b);cf(this,1,n);cf(this,2,n);cf(this,4,n);cf(this,32,n);this.Ia=1}A(kf,Xe);kf.prototype.qa=function(){kf.h.qa.call(this);Td(this.f(),"separator")};Ve("goog-menuseparator",function(){return new kf});function lf(){}fa(lf);u=lf.prototype;u.ec=aa();function mf(a,b,c){if(b)b.tabIndex=c?0:-1}u.i=function(a){return a.Z().i("div",this.Bc(a).join(" "))};u.wa=function(a){return a};u.rc=function(a){a=a.f();Ed(a,k,F);if(E)a.hideFocus=k;var b=this.ec();b&&Td(a,b)};u.Ma=function(a){return a.f()};u.t=s("goog-container");u.Bc=function(a){var b=this.t(),c=[b,a.rf()==nf?b+"-horizontal":b+"-vertical"];a.ka()||c.push(b+"-disabled");return c};u.Qh=function(){return of};function pf(a,b,c){Gd.call(this,c);this.J=b||lf.oa();this.Zd=a||this.J.Qh()}A(pf,Gd);var nf="horizontal",of="vertical";u=pf.prototype;u.ji=m;u.Ub=m;u.J=m;u.Zd=m;u.kb=k;u.mb=k;u.xg=k;u.ma=-1;u.Qa=m;u.Fc=n;u.nj=n;u.xk=k;u.Mc=m;u.Ma=function(){return this.ji||this.J.Ma(this)};u.qf=function(){return this.Ub||(this.Ub=new Fe(this.Ma()))};u.i=function(){this.q=this.J.i(this)};u.wa=function(){return this.J.wa(this.f())};
u.qa=function(){pf.h.qa.call(this);Od(this,function(b){b.$&&qf(this,b)},this);var a=this.f();this.J.rc(this);this.za(this.kb,k);this.ab().u(this,"enter",this.Dg).u(this,"highlight",this.Eg).u(this,"unhighlight",this.Gg).u(this,"open",this.ak).u(this,"close",this.Sj).u(a,"mousedown",this.fb).u(Qb(a),"mouseup",this.Uj).u(a,["mousedown","mouseup","mouseover","mouseout"],this.Rj);this.Uc()&&rf(this,k)};
function rf(a,b){var c=a.ab(),d=a.Ma();b?c.u(d,"focus",a.sf).u(d,"blur",a.Rc).u(a.qf(),"key",a.qc):c.jb(d,"focus",a.sf).jb(d,"blur",a.Rc).jb(a.qf(),"key",a.qc)}u.ub=function(){this.nb(-1);this.Qa&&this.Qa.ta(n);this.Fc=n;pf.h.ub.call(this)};u.p=function(){pf.h.p.call(this);if(this.Ub){this.Ub.aa();this.Ub=m}this.J=this.Qa=this.Mc=m};u.Dg=s(k);
u.Eg=function(a){var b=Sd(this,a.target);if(b>-1&&b!=this.ma){var c=Qd(this,this.ma);c&&c.tc(n);this.ma=b;c=Qd(this,this.ma);this.Fc&&c.setActive(k);if(this.xk&&this.Qa&&c!=this.Qa)c.cb&64?c.ta(k):this.Qa.ta(n)}Ud(this.f(),"activedescendant",a.target.f().id)};u.Gg=function(a){if(a.target==Qd(this,this.ma))this.ma=-1;Ud(this.f(),"activedescendant","")};u.ak=function(a){if((a=a.target)&&a!=this.Qa&&a.ya==this){this.Qa&&this.Qa.ta(n);this.Qa=a}};u.Sj=function(a){if(a.target==this.Qa)this.Qa=m};
u.fb=function(a){if(this.mb)this.Fc=k;var b=this.Ma();b&&gc(b)?b.focus():a.preventDefault()};u.Uj=function(){this.Fc=n};u.Rj=function(a){var b;a:{b=a.target;if(this.Mc)for(var c=this.f();b&&b!==c;){var d=b.id;if(d in this.Mc){b=this.Mc[d];break a}b=b.parentNode}b=m}if(b)switch(a.type){case "mousedown":b.fb(a);break;case "mouseup":b.jd(a);break;case "mouseover":b.Td(a);break;case "mouseout":b.Sd(a)}};u.sf=aa();u.Rc=function(){this.nb(-1);this.Fc=n;this.Qa&&this.Qa.ta(n)};
u.qc=function(a){if(this.ka()&&this.Xa()&&(Pd(this)!=0||this.ji)&&this.Rd(a)){a.preventDefault();a.stopPropagation();return k}return n};
u.Rd=function(a){var b=Qd(this,this.ma);if(b&&typeof b.qc=="function"&&b.qc(a))return k;if(this.Qa&&this.Qa!=b&&typeof this.Qa.qc=="function"&&this.Qa.qc(a))return k;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return n;switch(a.keyCode){case 27:if(this.Uc())this.Ma().blur();else return n;break;case 36:sf(this);break;case 35:tf(this);break;case 38:if(this.Zd==of)uf(this);else return n;break;case 37:if(this.Zd==nf)Rd(this)?vf(this):uf(this);else return n;break;case 40:if(this.Zd==of)vf(this);else return n;
break;case 39:if(this.Zd==nf)Rd(this)?uf(this):vf(this);else return n;break;default:return n}return k};function qf(a,b){var c=b.f();c=c.id||(c.id=Jd(b));if(!a.Mc)a.Mc={};a.Mc[c]=b}u.pa=function(a,b){pf.h.pa.call(this,a,b)};u.he=function(a,b,c){a.nh|=2;a.nh|=64;if(this.Uc()||!this.nj)cf(a,32,n);Ye(a,n);pf.h.he.call(this,a,b,c);c&&this.$&&qf(this,a);b<=this.ma&&this.ma++};
u.removeChild=function(a,b){if(a=y(a)?Md(this,a):a){var c=Sd(this,a);if(c!=-1)if(c==this.ma)a.tc(n);else c<this.ma&&this.ma--;(c=a.f())&&c.id&&Hb(this.Mc,c.id)}a=pf.h.removeChild.call(this,a,b);Ye(a,k);return a};u.rf=r("Zd");u.Xa=r("kb");u.za=function(a,b){if(b||this.kb!=a&&this.dispatchEvent(a?"show":"hide")){this.kb=a;var c=this.f();if(c){Bd(c,a);this.Uc()&&mf(this.J,this.Ma(),this.mb&&this.kb);b||this.dispatchEvent(this.kb?"aftershow":"afterhide")}return k}return n};u.ka=r("mb");
u.Ic=function(a){if(this.mb!=a&&this.dispatchEvent(a?"enable":"disable")){if(a){this.mb=k;Od(this,function(b){if(b.aj)delete b.aj;else b.Ic(k)})}else{Od(this,function(b){if(b.ka())b.Ic(n);else b.aj=k});this.Fc=this.mb=n}this.Uc()&&mf(this.J,this.Ma(),a&&this.kb)}};u.Uc=r("xg");u.sc=function(a){a!=this.xg&&this.$&&rf(this,a);this.xg=a;this.mb&&this.kb&&mf(this.J,this.Ma(),a)};u.nb=function(a){if(a=Qd(this,a))a.tc(k);else this.ma>-1&&Qd(this,this.ma).tc(n)};u.tc=function(a){this.nb(Sd(this,a))};
function sf(a){wf(a,function(b,c){return(b+1)%c},Pd(a)-1)}function tf(a){wf(a,function(b,c){b--;return b<0?c-1:b},0)}function vf(a){wf(a,function(b,c){return(b+1)%c},a.ma)}function uf(a){wf(a,function(b,c){b--;return b<0?c-1:b},a.ma)}function wf(a,b,c){c=c<0?Sd(a,a.Qa):c;var d=Pd(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=Qd(a,c);if(f&&a.Eh(f)){a.nb(c);return k}e++;c=b.call(a,c,d)}return n}u.Eh=function(a){return a.Xa()&&a.ka()&&!!(a.cb&2)};function xf(){}A(xf,Re);fa(xf);xf.prototype.t=s("goog-menuheader");function yf(a,b,c){Xe.call(this,a,c||xf.oa(),b);cf(this,1,n);cf(this,2,n);cf(this,4,n);cf(this,32,n);this.Ia=1}A(yf,Xe);Ve("goog-menuheader",function(){return new yf(m)});function zf(){this.Hh=[]}A(zf,Re);fa(zf);function Af(a,b){var c=a.Hh[b];if(!c){switch(b){case 0:c=a.t()+"-highlight";break;case 1:c=a.t()+"-checkbox";break;case 2:c=a.t()+"-content"}a.Hh[b]=c}return c}u=zf.prototype;u.ec=s("menuitem");u.i=function(a){var b=a.Z().i("div",this.Bc(a).join(" "),Bf(this,a.Ka,a.Z()));Cf(this,a,b,!!(a.cb&8)||!!(a.cb&16));return b};u.wa=function(a){return a&&a.firstChild};
u.ic=function(a,b){var c=this.wa(a),d=Df(this,a)?c.firstChild:m;zf.h.ic.call(this,a,b);if(d&&!Df(this,a))c.insertBefore(d,c.firstChild||m)};function Bf(a,b,c){a=Af(a,2);return c.i("div",a,b)}u.kh=function(a,b,c){if(b){Td(b,c?"menuitemradio":this.ec());Cf(this,a,b,c)}};function Df(a,b){var c=a.wa(b);if(c){c=c.firstChild;var d=Af(a,1);return!!c&&!!c.className&&c.className.indexOf(d)!=-1}return n}
function Cf(a,b,c,d){if(d!=Df(a,c)){d?Ab(c,"goog-option"):Bb(c,"goog-option");c=a.wa(c);if(d){a=Af(a,1);c.insertBefore(b.Z().i("div",a),c.firstChild||m)}else c.removeChild(c.firstChild)}}u.nf=function(a){switch(a){case 2:return Af(this,0);case 16:case 8:return"goog-option-selected";default:return zf.h.nf.call(this,a)}};u.t=s("goog-menuitem");function Ef(a,b,c,d){Xe.call(this,a,d||zf.oa(),c);this.Ea(b)}A(Ef,Xe);Ef.prototype.Oa=function(){var a=this.Vg;return a!=m?a:this.pe()};Ef.prototype.Ea=ba("Vg");Ef.prototype.kh=function(a){cf(this,8,a);this.Af()&&!a&&bf(this,n);var b=this.f();b&&this.J.kh(this,b,a)};Ef.prototype.pe=function(){return $e(this,function(a){return D(zb(a),"goog-menuitem-accel")?"":hc(a)})};Ve("goog-menuitem",function(){return new Ef(m)});function Ff(){}A(Ff,lf);fa(Ff);Ff.prototype.ec=s("menu");Ff.prototype.ad=function(a,b){return cc(a.f(),b)};Ff.prototype.t=s("goog-menu");Ff.prototype.rc=function(a){Ff.h.rc.call(this,a);a=a.f();Ud(a,"haspopup","true")};function Gf(a){kf.call(this,jf.oa(),a)}A(Gf,kf);Ve("goog-menuseparator",function(){return new kf});function Hf(a,b){pf.call(this,of,b||Ff.oa(),a);this.sc(n)}A(Hf,pf);u=Hf.prototype;u.dg=k;u.oj=n;u.t=function(){return this.J.t()};u.ad=function(a){if(this.J.ad(this,a))return k;for(var b=0,c=Pd(this);b<c;b++){var d=Qd(this,b);if(typeof d.ad=="function"&&d.ad(a))return k}return n};u.Lc=function(a){this.pa(a,k)};u.Ad=function(a,b){this.he(a,b,k)};u.Kd=function(a){return Qd(this,a)};u.pf=function(){return Pd(this)};
u.za=function(a,b){var c=Hf.h.za.call(this,a,b);c&&a&&this.$&&this.dg&&this.Ma().focus();return c};u.Dg=function(a){this.dg&&this.Ma().focus();return Hf.h.Dg.call(this,a)};u.Eh=function(a){return(this.oj||a.ka())&&a.Xa()&&!!(a.cb&2)};function If(){}A(If,Ue);fa(If);u=If.prototype;u.i=function(a){var b={"class":"goog-inline-block "+this.Bc(a).join(" "),title:a.Od()||""};return a.Z().i("div",b,this.kg(a.Ka,a.Z()))};u.ec=s("button");u.wa=function(a){return a&&a.firstChild.firstChild};u.kg=function(a,b){return b.i("div","goog-inline-block "+(this.t()+"-outer-box"),b.i("div","goog-inline-block "+(this.t()+"-inner-box"),a))};u.t=s("goog-custom-button");function Jf(){}A(Jf,If);fa(Jf);if(F)Jf.prototype.ic=function(a,b){var c=Jf.h.wa.call(this,a&&a.firstChild);if(c){var d=this.createCaption(b,Ob(a)),e=c.parentNode;e&&e.replaceChild(d,c)}};u=Jf.prototype;u.wa=function(a){a=Jf.h.wa.call(this,a&&a.firstChild);if(F&&a&&a.__goog_wrapper_div)a=a.firstChild;return a};u.kg=function(a,b){return Jf.h.kg.call(this,[this.createCaption(a,b),this.lg(b)],b)};u.createCaption=function(a,b){return Kf(a,this.t(),b)};
function Kf(a,b,c){return c.i("div","goog-inline-block "+(b+"-caption"),a)}u.lg=function(a){return a.i("div","goog-inline-block "+(this.t()+"-dropdown"),"")};u.t=s("goog-menu-button");function Lf(a,b,c,d){hf.call(this,a,c||Jf.oa(),d);cf(this,64,k);b&&this.Jc(b);this.Xb=new bd(500)}A(Lf,hf);u=Lf.prototype;u.zh=k;u.ah=n;u.Kg=n;u.qa=function(){Lf.h.qa.call(this);this.G&&Mf(this,this.G,k);Ud(this.f(),"haspopup","true")};u.ub=function(){Lf.h.ub.call(this);if(this.G){this.ta(n);this.G.ub();Mf(this,this.G,n);var a=this.G.f();a&&bc(a)}};u.p=function(){Lf.h.p.call(this);if(this.G){this.G.aa();delete this.G}delete this.Ak;this.Xb.aa()};
u.fb=function(a){Lf.h.fb.call(this,a);if(this.ra()){this.ta(!(this.Ia&64));if(this.G)this.G.Fc=!!(this.Ia&64)}};u.jd=function(a){Lf.h.jd.call(this,a);if(this.G&&!this.ra())this.G.Fc=n};u.Gc=function(){this.setActive(n);return k};u.Tj=function(a){this.G&&this.G.Xa()&&!this.ad(a.target)&&this.ta(n)};u.ad=function(a){return a&&cc(this.f(),a)||this.G&&this.G.ad(a)||n};
u.Rd=function(a){if(a.keyCode==32){a.preventDefault();if(a.type!="keyup")return n}else if(a.type!="key")return n;if(this.G&&this.G.Xa()){var b=this.G.qc(a);if(a.keyCode==27){this.ta(n);return k}return b}if(a.keyCode==40||a.keyCode==38||a.keyCode==32){this.ta(k);return k}return n};u.te=function(){this.ta(n)};u.Yj=function(){this.ra()||this.ta(n)};u.Rc=function(a){this.Kg||this.ta(n);Lf.h.Rc.call(this,a)};function Nf(a){a.G||a.Jc(new Hf(a.Z()));return a.G||m}
u.Jc=function(a){var b=this.G;if(a!=b){if(b){this.ta(n);this.$&&Mf(this,b,n);delete this.G}if(a){this.G=a;Ld(a,this);a.za(n);var c=this.Kg;(a.dg=c)&&a.sc(k);this.$&&Mf(this,a,k)}}return b};u.Lc=function(a){Nf(this).pa(a,k)};u.Ad=function(a,b){Nf(this).he(a,b,k)};u.Kd=function(a){return this.G?Qd(this.G,a):m};u.pf=function(){return this.G?Pd(this.G):0};u.za=function(a,b){var c=Lf.h.za.call(this,a,b);c&&!this.Xa()&&this.ta(n);return c};u.Ic=function(a){Lf.h.Ic.call(this,a);this.ka()||this.ta(n)};
u.ta=function(a){Lf.h.ta.call(this,a);if(this.G&&!!(this.Ia&64)==a){if(a){this.G.$||this.G.R();this.$i=sd(this.f());this.Ch=xd(this.f());Of(this);this.G.nb(-1)}else{this.setActive(n);this.G.Fc=n;if(this.Of!=m){this.Of=undefined;var b=this.G.f();b&&vd(b,"","")}}this.G.za(a);b=this.ab();var c=a?b.u:b.jb;c.call(b,jc(this.Z()),"mousedown",this.Tj,k);this.Kg&&c.call(b,this.G,"blur",this.Yj);c.call(b,this.Xb,dd,this.vk);a?this.Xb.start():this.Xb.stop()}};
function Of(a){if(a.G.$){var b=a.Ak||a.f();b=new Qe(b,a.zh?5:7,!a.ah,a.ah);var c=a.G.f();if(!a.G.Xa()){c.style.visibility="hidden";Bd(c,k)}if(!a.Of&&a.ah)a.Of=wd(c);b.rd(c,a.zh?4:6,m,a.Of);if(!a.G.Xa()){Bd(c,n);c.style.visibility="visible"}}}
u.vk=function(){var a=xd(this.f()),b=sd(this.f()),c;c=this.Ch;c=c==a?k:!c||!a?n:c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height;if(!(c=!c)){c=this.$i;c=c==b?k:!c||!b?n:c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left;c=!c}if(c){this.Ch=a;this.$i=b;Of(this)}};function Mf(a,b,c){var d=a.ab();c=c?d.u:d.jb;c.call(d,b,"action",a.te);c.call(d,b,"highlight",a.Eg);c.call(d,b,"unhighlight",a.Gg)}u.Eg=function(a){Ud(this.f(),"activedescendant",a.target.f().id)};
u.Gg=function(){Qd(this.G,this.G.ma)||Ud(this.f(),"activedescendant","")};Ve("goog-menu-button",function(){return new Lf(m)});function Pf(a){this.ld=[];Qf(this,a)}A(Pf,ad);u=Pf.prototype;u.Yc=m;u.bh=m;u.pf=function(){return this.ld.length};u.Kd=function(a){return this.ld[a]||m};function Qf(a,b){if(b){B(b,function(c){this.ae(c,n)},a);Ra(a.ld,b)}}u.Lc=function(a){this.Ad(a,this.pf())};u.Ad=function(a,b){if(a){this.ae(a,n);Sa(this.ld,b,0,a)}};u.ed=r("Yc");u.uc=function(a){if(a!=this.Yc){this.ae(this.Yc,n);this.Yc=a;this.ae(a,k)}this.dispatchEvent("select")};u.Ld=function(){return this.Yc?Ha(this.ld,this.Yc):-1};u.Le=function(a){this.uc(this.Kd(a))};
u.clear=function(){var a=this.ld;if(!ha(a))for(var b=a.length-1;b>=0;b--)delete a[b];a.length=0;this.Yc=m};u.p=function(){Pf.h.p.call(this);delete this.ld;this.Yc=m};u.ae=function(a,b){if(a)if(typeof this.bh=="function")this.bh(a,b);else typeof a.lh=="function"&&a.lh(b)};function Rf(a,b,c,d){Lf.call(this,a,b,c,d);this.ef=a;Sf(this)}A(Rf,Lf);u=Rf.prototype;u.A=m;u.ef=m;u.qa=function(){Rf.h.qa.call(this);Sf(this);Tf(this)};u.p=function(){Rf.h.p.call(this);if(this.A){this.A.aa();this.A=m}this.ef=m};u.te=function(a){this.uc(a.target);Rf.h.te.call(this,a);a.stopPropagation();this.dispatchEvent("action")};u.uf=function(){var a=this.ed();Rf.h.Ea.call(this,a&&a.Oa());Sf(this)};
u.Jc=function(a){var b=Rf.h.Jc.call(this,a);if(a!=b){this.A&&this.A.clear();if(a)this.A?Od(a,function(c){this.A.Lc(c)},this):Uf(this,a)}return b};u.Lc=function(a){Rf.h.Lc.call(this,a);this.A?this.A.Lc(a):Uf(this,Nf(this))};u.Ad=function(a,b){Rf.h.Ad.call(this,a,b);this.A?this.A.Ad(a,b):Uf(this,Nf(this))};u.uc=function(a){this.A&&this.A.uc(a)};u.Le=function(a){this.A&&this.uc(this.A.Kd(a))};
u.Ea=function(a){if(a!=m&&this.A)for(var b=0,c;c=this.A.Kd(b);b++)if(c&&typeof c.Oa=="function"&&c.Oa()==a){this.uc(c);return}this.uc(m)};u.ed=function(){return this.A?this.A.ed():m};u.Ld=function(){return this.A?this.A.Ld():-1};function Uf(a,b){a.A=new Pf;b&&Od(b,function(c){this.A.Lc(c)},a);Tf(a)}function Tf(a){a.A&&a.ab().u(a.A,"select",a.uf)}function Sf(a){var b=a.ed();a.ic(b?b.pe():a.ef)}u.ta=function(a){Rf.h.ta.call(this,a);this.Ia&64&&Nf(this).nb(this.Ld())};Ve("goog-select",function(){return new Rf(m)});function Vf(a,b,c){Ef.call(this,a,b,c);this.kh(k)}A(Vf,Ef);Vf.prototype.Gc=function(){return this.dispatchEvent("action")};Ve("goog-option",function(){return new Vf(m)});function Wf(){}A(Wf,jf);fa(Wf);Wf.prototype.i=function(a){return a.Z().i("div",this.t()+" goog-inline-block","")};Wf.prototype.t=s("goog-toolbar-separator");function Xf(){}A(Xf,lf);fa(Xf);Xf.prototype.ec=s("toolbar");Xf.prototype.t=s("goog-toolbar");Xf.prototype.Qh=function(){return nf};function Yf(a,b,c){pf.call(this,b,a||Xf.oa(),c)}A(Yf,pf);function Zf(){}A(Zf,If);fa(Zf);Zf.prototype.t=s("goog-toolbar-button");function $f(a,b,c){hf.call(this,a,b||Zf.oa(),c)}A($f,hf);Ve("goog-toolbar-button",function(){return new $f(m)});var ag={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function bg(a){a=a%360;return a*360<0?a+360:a}function N(a){return a*Math.PI/180}function cg(a,b,c,d){return bg(Math.atan2(d-b,c-a)*180/Math.PI)}function dg(a,b){var c=bg(b)-bg(a);if(c>180)c-=360;else if(c<=-180)c=360+c;return c};function eg(a){var b={};a=String(a);var c=a.charAt(0)=="#"?a:"#"+a;if(fg.test(c)){b.wf=gg(c);b.type="hex";return b}else{a:{var d=a.match(hg);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(c>=0&&c<=255&&e>=0&&e<=255&&d>=0&&d<=255){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(isNaN(e)||e<0||e>255||isNaN(a)||a<0||a>255||isNaN(c)||c<0||c>255)g(Error('"('+e+","+a+","+c+'") is not a valid RGB color'));e=ig(e.toString(16));a=ig(a.toString(16));
c=ig(c.toString(16));b.wf="#"+e+a+c;b.type="rgb";return b}else if(ag)if(c=ag[a.toLowerCase()]){b.wf=c;b.type="named";return b}}g(Error(a+" is not a valid color string"))}var jg=/#(.)(.)(.)/;function gg(a){if(!fg.test(a))g(Error("'"+a+"' is not a valid hex color"));if(a.length==4)a=a.replace(jg,"#$1$1$2$2$3$3");return a.toLowerCase()}var fg=/^#(?:[0-9a-f]{3}){1,2}$/i,hg=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function ig(a){return a.length==1?"0"+a:a};function kg(){}A(kg,Jf);fa(kg);kg.prototype.createCaption=function(a,b){return kg.h.createCaption.call(this,lg(a,b),b)};function lg(a,b){return b.i("div","goog-color-menu-button-indicator",a)}kg.prototype.Ea=function(a,b){a&&mg(this.wa(a),b)};function mg(a,b){if(a&&a.firstChild){var c;try{c=eg(b).wf}catch(d){c=m}a.firstChild.style.borderBottomColor=c||(E?"":"transparent")}}kg.prototype.rc=function(a){this.Ea(a.f(),a.Oa());Ab(a.f(),"goog-color-menu-button");kg.h.rc.call(this,a)};function ng(){}A(ng,Re);fa(ng);var og=0;ng.prototype.i=function(a){var b=this.Bc(a);return a.Z().i("div",b?b.join(" "):m,pg(this,a.Ka,a.fd(),a.Z()))};function pg(a,b,c,d){for(var e=[],f=0,h=0;f<c.height;f++){for(var i=[],j=0;j<c.width;j++){var l=b&&b[h++];i.push(qg(a,l,d))}e.push(d.i("tr",a.t()+"-row",i))}return a.Ih(e,d)}ng.prototype.Ih=function(a,b){var c=b.i("table",this.t()+"-table",b.i("tbody",this.t()+"-body",a));c.cellSpacing=0;c.cellPadding=0;Td(c,"grid");return c};
function qg(a,b,c){a=c.i("td",{"class":a.t()+"-cell",id:a.t()+"-cell-"+og++},b);Td(a,"gridcell");return a}
ng.prototype.ic=function(a,b){if(a){var c=Rb(document,"tbody",this.t()+"-body",a)[0];if(c){var d=0;B(c.rows,function(j){B(j.cells,function(l){ac(l);if(b){var o=b[d++];o&&l.appendChild(o)}})});if(d<b.length){for(var e=[],f=Ob(a),h=c.rows[0].cells.length;d<b.length;){var i=b[d++];e.push(qg(this,i,f));if(e.length==h){i=f.i("tr",this.t()+"-row",e);c.appendChild(i);e.length=0}}if(e.length>0){for(;e.length<h;)e.push(qg(this,"",f));i=f.i("tr",this.t()+"-row",e);c.appendChild(i)}}}Ed(a,k,F)}};
function rg(a,b,c){for(b=b.f();c&&c.nodeType==1&&c!=b;){if(c.tagName=="TD"&&D(zb(c),a.t()+"-cell"))return c.firstChild;c=c.parentNode}return m}function sg(a,b,c,d){if(c){c=c.parentNode;a=a.t()+"-cell-hover";d?Ab(c,a):Bb(c,a);b=b.f().firstChild;Ud(b,"activedescendent",c.id)}}ng.prototype.t=s("goog-palette");function tg(a,b,c){Xe.call(this,a,b||ng.oa(),c)}A(tg,Xe);u=tg.prototype;u.Wb=m;u.ma=-1;u.A=m;u.p=function(){tg.h.p.call(this);if(this.A){this.A.aa();this.A=m}this.Wb=m};u.Tf=function(a){tg.h.Tf.call(this,a);ug(this);if(this.A){this.A.clear();Qf(this.A,a)}else{this.A=new Pf(a);this.A.bh=sa(this.ae,this);this.ab().u(this.A,"select",this.uf)}this.ma=-1};u.pe=s(m);
u.Td=function(a){tg.h.Td.call(this,a);var b=rg(this.J,this,a.target);if(!(b&&a.relatedTarget&&cc(b,a.relatedTarget)))if(b!=vg(this)){a=this.Ka;this.nb(a?Ha(a,b):-1)}};u.Sd=function(a){tg.h.Sd.call(this,a);var b=rg(this.J,this,a.target);b&&a.relatedTarget&&cc(b,a.relatedTarget)||b==vg(this)&&sg(this.J,this,b,n)};u.fb=function(a){tg.h.fb.call(this,a);if(this.ra()){a=rg(this.J,this,a.target);if(a!=vg(this)){var b=this.Ka;this.nb(b?Ha(b,a):-1)}}};u.Gc=function(){var a=vg(this);if(a){this.uc(a);return this.dispatchEvent("action")}return n};
u.qc=function(a){var b=this.Ka;b=b?b.length:0;var c=this.Wb.width;if(b==0||!this.ka())return n;if(a.keyCode==13||a.keyCode==32)return this.Gc(a);if(a.keyCode==36){this.nb(0);return k}else if(a.keyCode==35){this.nb(b-1);return k}var d=this.ma<0?this.Ld():this.ma;switch(a.keyCode){case 37:if(d==-1)d=b;if(d>0){this.nb(d-1);a.preventDefault();return k}break;case 39:if(d<b-1){this.nb(d+1);a.preventDefault();return k}break;case 38:if(d==-1)d=b+c-1;if(d>=c){this.nb(d-c);a.preventDefault();return k}break;
case 40:if(d==-1)d=-c;if(d<b-c){this.nb(d+c);a.preventDefault();return k}}return n};u.uf=aa();u.fd=r("Wb");u.Gb=function(a,b){if(this.f())g(Error("Component already rendered"));this.Wb=ka(a)?new Db(a,b):a;ug(this)};function vg(a){var b=a.Ka;return b&&b[a.ma]}u.nb=function(a){if(a!=this.ma){wg(this,this.ma,n);this.ma=a;wg(this,a,k)}};u.Ld=function(){return this.A?this.A.Ld():-1};u.ed=function(){return this.A?this.A.ed():m};u.Le=function(a){this.A&&this.A.Le(a)};u.uc=function(a){this.A&&this.A.uc(a)};
function wg(a,b,c){if(a.f()){var d=a.Ka;d&&b>=0&&b<d.length&&sg(a.J,a,d[b],c)}}u.ae=function(a,b){if(this.f())if(a){var c=a.parentNode,d=this.J.t()+"-cell-selected";b?Ab(c,d):Bb(c,d)}};function ug(a){var b=a.Ka;if(b)if(a.Wb&&a.Wb.width){b=Math.ceil(b.length/a.Wb.width);if(!ka(a.Wb.height)||a.Wb.height<b)a.Wb.height=b}else{b=Math.ceil(Math.sqrt(b.length));a.Wb=new Db(b,b)}else a.Wb=new Db(0,0)};function xg(a,b,c){this.cf=a||[];tg.call(this,m,b||ng.oa(),c);this.cf=this.cf;this.Mf=m;this.ic(yg(this))}A(xg,tg);xg.prototype.Mf=m;xg.prototype.Bg=function(){var a=this.ed();if(a){a=a.style[zd("background-color")]||"";return zg(a)}else return m};xg.prototype.mh=function(a){a=zg(a);if(!this.Mf)this.Mf=C(this.cf,function(b){return zg(b)});this.Le(a?Ha(this.Mf,a):-1)};
function yg(a){return C(a.cf,function(b){var c=this.Z().i("div",{"class":this.J.t()+"-colorswatch",style:"background-color:"+b});if(b.charAt(0)=="#"){b=gg(b);b="RGB ("+[parseInt(b.substr(1,2),16),parseInt(b.substr(3,2),16),parseInt(b.substr(5,2),16)].join(", ")+")"}else b=b;c.title=b;return c},a)}function zg(a){if(a)try{return eg(a).wf}catch(b){}return m};function Ag(a,b,c,d){Lf.call(this,a,b,c||kg.oa(),d)}A(Ag,Lf);
var Bg={al:["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],gl:["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],dl:["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79","#990000","#b45f06","#bf9000","#38761d","#134f5c",
"#0b5394","#351c75","#741b47","#660000","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]};function Cg(a,b){var c=new Hf(b);a&&B(a,function(d){c.pa(d,k)});Eb(Bg,function(d){d=new xg(d,m,b);d.Gb(8);c.pa(d,k)});return c}u=Ag.prototype;u.Bg=function(){return this.Oa()};u.mh=function(a){this.Ea(a)};u.Ea=function(a){for(var b=0,c;c=this.Kd(b);b++)typeof c.mh=="function"&&c.mh(a);Ag.h.Ea.call(this,a)};
u.te=function(a){if(typeof a.target.Bg=="function")this.Ea(a.target.Bg());else a.target.Oa()=="none"&&this.Ea(m);Ag.h.te.call(this,a);a.stopPropagation();this.dispatchEvent("action")};u.ta=function(a){if(a&&this.pf()==0){this.Jc(Cg(m,this.Z()));this.Ea(this.Oa())}Ag.h.ta.call(this,a)};Ve("goog-color-menu-button",function(){return new Ag(m)});function Dg(){}A(Dg,Jf);fa(Dg);Dg.prototype.t=s("goog-toolbar-menu-button");function Eg(){}A(Eg,Dg);fa(Eg);Eg.prototype.createCaption=function(a,b){return Kf(lg(a,b),this.t(),b)};Eg.prototype.Ea=function(a,b){a&&mg(this.wa(a),b)};Eg.prototype.rc=function(a){this.Ea(a.f(),a.Oa());Ab(a.f(),"goog-toolbar-color-menu-button");Eg.h.rc.call(this,a)};function Fg(a,b,c,d){Ag.call(this,a,b,c||Eg.oa(),d)}A(Fg,Ag);Ve("goog-toolbar-color-menu-button",function(){return new Fg(m)});function Gg(a,b,c,d){Lf.call(this,a,b,c||Dg.oa(),d)}A(Gg,Lf);Ve("goog-toolbar-menu-button",function(){return new Gg(m)});function Hg(a,b,c,d){Rf.call(this,a,b,c||Dg.oa(),d)}A(Hg,Rf);Ve("goog-toolbar-select",function(){return new Hg(m)});function Ig(a,b,c,d,e,f){c=c;if((!c||c=="")&&F&&!I("1.9a"))c="";d=(f||Ob()).i("DIV",d?{"class":d}:m,c);e=new $f(d,e,f);Kd(e,a);e.Me(b);return e}function Jg(a,b,c,d,e,f){a=Ig(a,b,c,d,e,f);cf(a,16,k);return a}function Kg(a,b,c,d,e,f){e=new Hg(m,m,e,f);d&&B(d.split(/\s+/),e.cg,e);e.cg("goog-toolbar-select");e.ef=c;Sf(e);Kd(e,a);e.Me(b);return e};var Lg={};function Mg(a){return function(){return a}}var Ng=Mg(n);function Og(a){this.Ya=new he;a&&this.zd(a)}function Pg(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+na(a):b.substr(0,1)+a}u=Og.prototype;u.of=function(){return this.Ya.of()};u.add=function(a){this.Ya.hc(Pg(a),a)};u.zd=function(a){a=fe(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};u.Ee=function(a){a=fe(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};u.remove=function(a){return this.Ya.remove(Pg(a))};u.clear=function(){this.Ya.clear()};
u.contains=function(a){a=Pg(a);return je(this.Ya.Ya,a)};u.bi=function(a){var b=new Og;a=fe(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};u.L=function(){return this.Ya.L()};u.la=function(){return new Og(this)};function Qg(a){return Rg(a||arguments.callee.caller,[])}
function Rg(a,b){var c=[];if(D(b,a))c.push("[...circular reference...]");else if(a&&b.length<50){c.push(Sg(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":f=f;break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Sg(f))?f:"[fn]";break;default:f=typeof f}if(f.length>40)f=f.substr(0,40)+"...";c.push(f)}b.push(a);c.push(")\n");try{c.push(Rg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Sg(a){a=String(a);if(!Tg[a]){var b=/function ([^\(]+)/.exec(a);Tg[a]=b?b[1]:"[Anonymous]"}return Tg[a]}var Tg={};function Ug(a,b,c,d,e){this.reset(a,b,c,d,e)}Ug.prototype.Hk=0;Ug.prototype.ug=m;Ug.prototype.tg=m;var Vg=0;Ug.prototype.reset=function(a,b,c,d,e){this.Hk=typeof e=="number"?e:Vg++;this.Ui=d||ua();this.md=a;this.ni=b;this.mk=c;delete this.ug;delete this.tg};Ug.prototype.Ai=ba("md");function Wg(a){this.rk=a}Wg.prototype.ya=m;Wg.prototype.md=m;Wg.prototype.na=m;Wg.prototype.Ud=m;function Xg(a,b){this.name=a;this.value=b}Xg.prototype.toString=r("name");var Yg=new Xg("SHOUT",1200),Zg=new Xg("SEVERE",1E3),$g=new Xg("WARNING",900),ah=new Xg("INFO",800),bh=new Xg("CONFIG",700),ch=new Xg("FINE",500);u=Wg.prototype;u.Ai=ba("md");function dh(a){if(a.md)return a.md;if(a.ya)return dh(a.ya);return m}
u.log=function(a,b,c){if(a.value>=dh(this).value){a=this.Fj(a,b,c);ca.console&&ca.console.markTimeline&&ca.console.markTimeline("log:"+a.ni);for(b=this;b;){c=b;var d=a;if(c.Ud)for(var e=0,f=void 0;f=c.Ud[e];e++)f(d);b=b.ya}}};
u.Fj=function(a,b,c){var d=new Ug(a,String(b),this.rk);if(c){d.ug=c;var e;var f=arguments.callee.caller;try{var h,i=da("window.location.href");h=typeof c=="string"?{message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"}:!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:c.lineNumber||c.Xl||"Not available",fileName:c.fileName||c.filename||c.sourceURL||i,stack:c.stack||"Not available"}:c;e="Message: "+wa(h.message)+'\nUrl: <a href="view-source:'+
h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+wa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+wa(Qg(f)+"-> ")}catch(j){e="Exception trying to expose exception! You win, we lose. "+j}d.tg=e}return d};u.info=function(a,b){this.log(ah,a,b)};u.j=function(a,b){this.log(bh,a,b)};var eh={},fh=m;function gh(){if(!fh){fh=new Wg("");eh[""]=fh;fh.Ai(bh)}}
function hh(a){gh();var b;if(!(b=eh[a])){b=new Wg(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=hh(a.substr(0,c));if(!c.na)c.na={};c.na[d]=b;b.ya=c;b=eh[a]=b}return b};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function O(){this.mb=this.ij()}A(O,ad);u=O.prototype;u.ij=Ng;function ih(a,b){a.b=b;B(a.re(),function(c){b.Zg(c.id,c.key)})}u.re=function(){return[]};u.jf=function(a){if(this.b==a)this.mb=k;else this.M.log(Zg,"Trying to enable an unregistered field with this plugin.",void 0)};u.pg=function(a){this.M.info("disable");if(this.b==a)this.mb=n;else this.M.log(Zg,"Trying to disable an unregistered field with this plugin.",void 0)};u.M=hh("kemia.controller.Plugin");
u.ka=function(a){return this.b==a?this.mb:n};u.p=function(){if(this.b)if(this.b){this.pg(this.b);this.b=m}O.h.p.call(this)};u.tj=k;var jh={};O.prototype.yh=Ng;var kh=Jb({Ml:1,Nl:2,Pl:3,uf:4,tf:5,execCommand:6,queryCommandValue:7,fb:8,jd:9,Td:10,Sd:11,ue:12,Hl:13,Gl:14,Fl:15,Kl:16,Jl:17,Il:18,El:19,Dl:20,Bl:21,Vl:22,Ul:23,Sl:24,Rl:25,Ll:26});O.prototype.execCommand=function(a){var b=this.ii(a);try{lh(this.b);var c=this.Qc.apply(this,arguments)}finally{if(!b){P(this.b);this.b.dispatchEvent(mh)}}return c};
O.prototype.ii=Ng;O.prototype.Qb=s(n);/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function nh(){O.call(this);this.ra={};this.ra[oh]=k;this.Jg=n}A(nh,O);var oh="move",ph=Jb({cl:oh,fl:"rotate"});u=nh.prototype;u.Qb=function(a){return a in ph};u.Cc=Mg("move");u.sd=function(){this.ra[oh]=n;this.ra.rotate=n};u.Qc=function(a,b,c){this.ra[a]=c};
u.ue=function(a){if((this.ra[oh]||this.ra.rotate)&&!this.Jg){var b=qh(this.b,a);this.b.selected.length=0;this.b.X.style.cursor="default";a.currentTarget.l&&a.currentTarget.l.clear();if(this.ra.rotate){if(b instanceof Q){rh(this.b,b);this.b.X.style.cursor='url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';a.currentTarget.l=a.currentTarget.l?this.kd(b,a.currentTarget.l):this.kd(b);return k}}else if(b instanceof R){rh(this.b,b);this.b.X.style.cursor="move";a.currentTarget.l=a.currentTarget.l?
this.wb(b,a.currentTarget.l):this.wb(b);return k}else if(b instanceof S){if(b.source.g.L().length==1||b.target.g.L().length==1){rh(this.b,b);this.b.X.style.cursor="move";a.currentTarget.l=a.currentTarget.l?this.fc(b,a.currentTarget.l):this.fc(b)}return k}else if(b instanceof Q){rh(this.b,b);this.b.X.style.cursor="move";a.currentTarget.l=a.currentTarget.l?this.kd(b,a.currentTarget.l):this.kd(b);return k}else if(b instanceof sh){rh(this.b,b);if(!a.shiftKey){this.b.X.style.cursor="move";a.currentTarget.l=
a.currentTarget.l?this.ve(b,a.currentTarget.l):this.ve(b);return k}}else if(b instanceof th){rh(this.b,b);if(!a.shiftKey){this.b.X.style.cursor="move";a.currentTarget.l=a.currentTarget.l?this.we(b,a.currentTarget.l):this.we(b);return k}}else if(!b){this.b.X.style.cursor="all-scroll";return k}return n}};
u.fb=function(a){if(this.ra[oh]||this.ra.rotate){a.currentTarget.l&&a.currentTarget.l.clear();a.currentTarget.l=undefined;this.Jg=k;var b=qh(this.b,a);if(this.ra.rotate)if(b instanceof Q){T(this.b);this.b.X.style.cursor='url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';uh(this,a,b);P(this.b);return k}if(this.ra[oh]){if(b instanceof R){T(this.b);vh(this,a,b);P(this.b);return k}if(b instanceof S){T(this.b);wh(this,a,b);P(this.b);return k}if(b instanceof Q){T(this.b);if(a.shiftKey){this.b.X.style.cursor=
'url("../../elements/images/rotate-cursor-32.png") 16 16,  pointer';uh(this,a,b)}else xh(this,a,b);P(this.b);return k}if(b instanceof th){T(this.b);yh(this,a,b);P(this.b);return k}if(b instanceof sh){T(this.b);zh(this,a,b);P(this.b);return k}if(!b){T(this.b);Ah(this,a);P(this.b);return k}}}return n};
u.jd=function(a){try{this.Jg=n;var b=Ia(Bh(this.b,a),function(e){return e instanceof R&&e!==this.rg},this),c=b.length>0?b[0]:undefined;if(this.rg&&c instanceof R){T(this.b);Q.$l(this.rg,c);this.rg=undefined;U(this.b,this.b.r);P(this.b);return k}}catch(d){this.M.log(Zg,d,void 0)}};u.wb=function(a,b){return this.b.k.ca.xb.ja(a,"#3366ff",b)};u.fc=function(a,b){return this.b.k.ca.Bd.m(a).ja(a,"#3366ff",b)};u.kd=function(a,b){var c="#3366ff";if(a.Ha&&a.Ha.Lg(a))c="purple";return this.b.k.ca.ja(a,c,b)};
u.ve=function(a,b){return this.b.k.af.ja(a,"#3366ff",b)};u.we=function(a,b){return this.b.k.Qf.ja(a,"#3366ff",b)};u.queryCommandValue=function(a){return this.ra[a]};
function Ch(a,b){var c=a.v,d=b.v;B(b.g.L(),function(h){var i=h.la();b==i.source?i.source=a:i.target=a;Dh(d,i);Eh(d,h)});Fh(d,b);if(c!==d){B(c.e,function(h){Gh(d,h)});B(c.g,function(h){h=h.la();h.v=undefined;Dh(d,h)});B(c.e,function(h){Fh(c,h)});B(c.g,function(h){Eh(c,h)});Hh(c.Ha,c);delete c}var e=d.la(),f=d.Ha;Hh(f,d);Ih(f,e);return e}
function Jh(a,b){var c=b.v;B(b.g.L(),function(f){var h=f.la();b==h.source?h.source=a:h.target=a;Dh(c,h);Eh(c,f)});Fh(c,b);var d=c.la();B(d.g,aa());var e=c.Ha;Hh(e,c);Ih(e,d);return d}
function vh(a,b,c){var d=new Yd(a.b.X);d.Zb=b.clientX;d.$b=b.clientY;d.fg=c;d.w=a.b;d.addEventListener("drag",function(e){d.pb&&B(d.pb,function(h){h.clear()});d.pb=[];d.fg.v.bb&&d.fg.v.bb.clear();new Kh(e.clientX-d.Zb,e.clientY-d.$b);var f=Lh(d.w.k.transform?d.w.k.transform.lb():d.w.k.ca.transform.lb(),[new K(e.clientX,e.clientY),new K(d.Zb,d.$b)]);c.a=M(c.a,L(f[0],f[1]));d.Zb=e.clientX;d.$b=e.clientY;d.bg=Pa(c,C(c.g.L(),function(h){var i=V(h,c);return Pa(i,C(i.g.L(),function(j){return V(j,i)}))}));
e=this.b.wg([c],d.bg);d.db=Ta(e,0,1);B(e,function(h){d.pb.push(d.w.k.ca.xb.ja(h[0]));d.pb.push(d.w.k.ca.xb.ja(h[1]))});d.w.k.ca.R(d.fg.v,d.w.k.ca.transform)},undefined,a);d.addEventListener("end",function(){try{B(d.db,function(f){f[0].v==f[1].v?Jh(f[0],f[1]):Ch(f[0],f[1])},this);U(d.w,d.w.r);d.db=[];d.aa()}catch(e){this.M.log(Zg,e,void 0)}},undefined,a);d.vc(b)}
function wh(a,b,c){var d,e;if(c.source.g.L().length==1){d=c.target;e=c.source}else if(c.target.g.L().length==1){d=c.source;e=c.target}if(d){var f=new Yd(a.b.X),h=d.a;f.xc=X(a.b.k.transform?a.b.k.transform:a.b.k.ca.transform,[h])[0];f.eb=Mh(b);f.ge=cg(f.xc.x,f.xc.y,f.eb.x,f.eb.y);f.db=[];f.bf=c;f.w=a.b;f.addEventListener("drag",function(i){try{f.pb&&B(f.pb,function(x){x.clear()});f.pb=[];f.qb=f.qb||f.sb;f.rb=f.rb||f.tb;var j=f.sb-f.qb,l=f.tb-f.rb,o=cg(f.xc.x,f.xc.y,f.eb.x+j,f.eb.y+l)-f.ge;o-=o%30;
f.ge+=o;var p=Lh(Nh(new Oh,-N(o),h.x,h.y),[f.bf.source.a,f.bf.target.a]);f.bf.source.a=p[0];f.bf.target.a=p[1];U(f.w,f.w.r);var q=qh(f.w,i,new K(f.eb.x+j,f.eb.y+l));if(q instanceof R&&q.v==e.v){var t=Pa(d,C(d.g.L(),function(x){return V(x,d)}));if(!D(t,q)){f.db=[[q,e]];f.pb.push(f.w.k.ca.xb.ja(e));f.pb.push(f.w.k.ca.xb.ja(q))}}}catch(v){this.M.log(Zg,v,void 0)}},undefined,a);f.addEventListener("end",function(){try{B(f.db,function(j){j[0].v==j[1].v&&Jh(j[0],j[1])},this);U(f.w,f.w.r);f.db=[];f.aa()}catch(i){this.M.log(Zg,
i,void 0)}finally{this.ag=n}},undefined,a);a.ag=k;f.vc(b)}}function yh(a,b,c){var d=new Yd(a.b.X);d.Zb=b.clientX;d.$b=b.clientY;d.Wg=c;d.w=a.b;d.addEventListener("drag",function(e){new Kh(e.clientX-d.Zb,e.clientY-d.$b);var f=Lh(d.w.k.transform.lb(),[new K(e.clientX,e.clientY),new K(d.Zb,d.$b)]);d.Wg.a=M(c.a,L(f[0],f[1]));d.Wg.bb.clear();d.w.k.Qf.R(d.Wg,d.w.k.transform);d.Zb=e.clientX;d.$b=e.clientY});d.addEventListener("end",function(){U(d.w,d.w.r);d.aa()});d.vc(b)}
function zh(a,b,c){var d=new Yd(a.b.X);d.Zb=b.clientX;d.$b=b.clientY;d.kl=c;d.w=a.b;d.addEventListener("drag",function(e){new Kh(e.clientX-d.Zb,e.clientY-d.$b);var f=Lh(d.w.k.transform.lb(),[new K(e.clientX,e.clientY),new K(d.Zb,d.$b)]);f=L(f[0],f[1]);c.source=M(c.source,f);c.target=M(c.target,f);c.bb.clear();d.w.k.af.R(c,d.w.k.transform);d.Zb=e.clientX;d.$b=e.clientY});d.addEventListener("end",function(){U(d.w,d.w.r);d.aa()});d.vc(b)}
function xh(a,b,c){var d=new Yd(a.b.X);d.ob=Ph(a.b,c.va());d.qb=m;d.rb=m;d.wh=0;d.xh=0;d.db=[];d.v=c;d.w=a.b;d.addEventListener("drag",function(){d.pb&&B(d.pb,function(j){j.clear()});d.pb=[];d.db=[];d.qb=d.qb||d.sb;d.rb=d.rb||d.tb;var e=d.sb-d.qb,f=d.tb-d.rb,h=e-d.wh,i=f-d.xh;Qh(d.v.bb,e,f,0,0,0);e=d.w.k.transform?d.w.k.transform:d.w.k.ca.transform;d.v.translate(new Rh(h/e.ha,i/e.sa));d.wh=d.sb-d.qb;d.xh=d.tb-d.rb;d.bg=c.e;h=this.b.wg(c.e,d.bg);if(h.length>1)d.db=Ta(h,0,2);B(d.db,function(j){d.pb.push(d.w.k.ca.xb.ja(j[0]));
d.pb.push(d.w.k.ca.xb.ja(j[1]))})},undefined,a);d.addEventListener("end",function(){try{if(d.db.length==2){var e=d.db[0][1],f=d.db[1][1],h=Ma(e.g.L(),function(p){return V(p,e)==f}),i=d.db[0][0],j=d.db[1][0],l=Ma(i.g.L(),function(p){return V(p,i)==j});h&&l&&Sh(i.v,e.v,h,l,e,i)}U(d.w,d.w.r);d.db=[];d.aa()}catch(o){this.M.log(Zg,o,void 0)}},undefined,a);d.vc(b)}
function Ah(a,b){var c=new Yd(a.b.X);c.addEventListener("drag",function(){var d=this.b.k.transform,e=c.screenX-c.hk,f=c.screenY-c.ik;if(e||f){var h=new Rh(e/d.ha,f/d.sa);B(this.b.r,function(i){i instanceof Th&&i.translate(h)});U(this.b,this.b.r)}c.hk=c.screenX;c.ik=c.screenY},undefined,a);c.addEventListener("end",function(){U(this.b,this.b.r);c.aa()},undefined,a);c.vc(b)}
function uh(a,b,c){var d=new Yd(a.b.X);d.ob=Lh(a.b.k.transform?a.b.k.transform:a.b.k.ca.transform,[c.va()])[0];d.eb=Mh(b);d.hj=cg(d.ob.x,d.ob.y,d.eb.x,d.eb.y);d.qb=m;d.rb=m;d.bb=c.bb;d.v=c;d.w=a.b;d.addEventListener("drag",function(){d.qb=d.qb||d.sb;d.rb=d.rb||d.tb;d.vh=cg(d.ob.x,d.ob.y,d.eb.x+(d.sb-d.qb),d.eb.y+(d.tb-d.rb))-d.hj;Qh(d.bb,0,0,d.vh,d.ob.x,d.ob.y)});d.addEventListener("end",function(){d.v.rotate(-d.vh,d.v.va());U(d.w,d.w.r);d.aa()});d.vc(b)}u.M=hh("kemia.controller.plugins.Move");/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Uh(){O.call(this)}A(Uh,O);u=Uh.prototype;u.Qb=function(a){return a=="erase"};u.Cc=Mg("erase");u.M=hh("kemia.controller.plugins.Erase");u.Qc=function(a,b,c){this.ra=c};
u.ue=function(a){if(this.ra){var b=qh(this.b,a);this.b.X.style.cursor="default";a.currentTarget.l&&a.currentTarget.l.clear();if(b instanceof R){this.b.X.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.l=a.currentTarget.l?this.wb(b,a.currentTarget.l):this.wb(b);return k}else if(b instanceof S){this.b.X.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.l=a.currentTarget.l?this.fc(b,a.currentTarget.l):this.fc(b);return k}else if(b instanceof
Q){this.b.X.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.l=a.currentTarget.l?this.kd(b,a.currentTarget.l):this.kd(b);return k}else if(b instanceof th){this.b.X.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';a.currentTarget.l=a.currentTarget.l?this.we(b,a.currentTarget.l):this.we(b);return k}else if(b instanceof sh){this.b.X.style.cursor='url("../../elements/images/erase-cursor-32.png") 0 32,  hand';if(a.currentTarget.dk)a.currentTarget.l=
this.ve(b,a.currentTarget.l);else a.currentTarget.dk=this.ve(b)}else{a.currentTarget.l=undefined;return n}}return n};u.fb=function(a){var b=n;if(this.ra){T(this.b);a=qh(this.b,a);if(a instanceof R){Vh(this,a);b=k}if(a instanceof S){Wh(this,a);b=k}if(a instanceof Q){(b=a.Ha)?Hh(b,a):Na(this.b.r,a);U(this.b,this.b.r);b=k}if(a instanceof th){Na(a.Ha.Vb,a);a.Ha=undefined;U(this.b,this.b.r);b=k}if(a instanceof sh){Na(a.Ha.ia,a);a.Ha=undefined;U(this.b,this.b.r);b=k}P(this.b)}return b};
function Vh(a,b){var c=b.v;B(b.g.L(),function(d){Eh(c,d)});Fh(c,b);c.e.length==0&&Hh(c.Ha,c);U(a.b,a.b.r)}function Wh(a,b){var c=a.b.r,d=b.v;Eh(d,b);var e=Xh(d);a.M.log(ch,"fragements.length: "+e.length,void 0);var f=d.Ha;if(f){Hh(f,d);B(e,function(h){Ih(f,h)})}U(a.b,c)}u.sd=function(){this.ra=n;this.b.X.style.cursor="default"};u.queryCommandValue=function(a){var b=m;if(a=="erase")b=this.ra;return b};u.wb=function(a,b){return this.b.k.ca.xb.ja(a,"#ff6666",b)};
u.fc=function(a,b){return this.b.k.ca.Bd.m(a).ja(a,"#ff6666",b)};u.we=function(a,b){return this.b.k.Qf.ja(a,"#ff6666",b)};u.ve=function(a,b){return this.b.k.af.ja(a,"#ff6666",b)};u.kd=function(a,b){return this.b.k.ca.ja(a,"#ff6666",b)};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Yh(){O.call(this)}A(Yh,O);Yh.prototype.Cc=Mg("clearEditor");Yh.prototype.Qb=function(a){return a=="clearEditor"};Yh.prototype.Qc=function(){try{T(this.b);this.b.clear()}catch(a){this.M.info(a)}};Yh.prototype.ii=Ng;/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Zh(){O.call(this)}A(Zh,O);var $h={il:"zoomIn",jl:"zoomOut"},ai=Jb($h);Zh.prototype.Cc=Mg($h);Zh.prototype.Qb=function(a){return a in ai};Zh.prototype.execCommand=function(a){try{var b=this.b.k.Ke;if(a=="zoomIn")this.b.be(b*1.1);else a=="zoomOut"&&this.b.be(b*0.9);U(this.b,this.b.r)}catch(c){this.M.info(c)}};Zh.prototype.M=hh("kemia.controller.plugins.Zoom");var bi={};var ci={C:4,Si:4,N:3,P:3,O:2,S:2,H:1,Br:1,Cl:1,I:1,F:1};function R(a,b,c,d,e,f){this.T=a!==undefined?a:"C";this.a=new K(b?b:0,c?c:0);this.g=new Og;this.Va=d?d:0;this.Df=f?f:0;this.ac=e!==undefined?e:n;this.Wl=m;this.ea=Array(3)}R.prototype.zb=function(){return this.g.of()};function di(a){var b=ci[a.T],c=a.g.L();c=Ja(c,function(e,f){return e+f.Da},0);var d=0;if(b)d=b-c+a.Va;return d}function ei(a){for(var b=a.g.L(),c=[],d=0,e=b.length;d<e;d++)c.push(V(b[d],a));return c}
function fi(a){var b=a.g.L(),c;if(b.length==0)c=0;else if(b.length==1){var d=V(b[0],a),e=cg(a.a.x,a.a.y,d.a.x,d.a.y);b=C(d.g.L(),function(f){f=V(f,d);if(f!=a)return dg(e,cg(d.a.x,d.a.y,f.a.x,f.a.y))});Va(b);c=b[0]>0?e-120:e+120}else if(b.length==2){b=C(b,function(f){f=V(f,a);return cg(a.a.x,a.a.y,f.a.x,f.a.y)});c=dg(b[0],b[1]);if(Math.abs(c)<180)c=180+c/2;else c/=2;c=b[0]+c}else if(b.length==3){Va(b,function(f,h){return Wa(V(f,a).g.L().length,V(h,a).g.L().length)});b=Ta(b,0,2);b=C(b,function(f){f=
V(f,a);return cg(a.a.x,a.a.y,f.a.x,f.a.y)});c=b[0]+dg(b[0],b[1])/2}return c}R.prototype.la=function(){return new R(this.T,this.a.x,this.a.y,this.Va,this.ac,this.Df)};R.prototype.ib=function(a,b){this.ea[a]=b};R.prototype.toString=function(){return"kemia.model.Atom ["+this.T+"] "+this.a.toString()};function S(a,b,c,d,e,f){this.source=a;this.target=b;this.Da=c!==undefined?c:gi;this.fa=d!==undefined?d:hi;this.ac=e!==undefined?e:n;this.v=f!==undefined?f:m}function V(a,b){if(b===a.source)return a.target;if(b===a.target)return a.source;return m}S.prototype.la=function(){return new S(this.source,this.target,this.Da,this.fa,this.ac,this.v)};var gi=1,hi=10;
S.prototype.toString=function(){return"kemia.model.Bond["+this.Da+", "+this.fa+"]  "+this.source.toString()+" -- "+this.target.toString()+" mol: "+(this.v?this.v.name:"no molecule")};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function ii(){O.call(this);this.ag=n}A(ii,O);ii.prototype.Qb=function(a){return a=="selectBond"};ii.prototype.Cc=Mg("selectBond");ii.prototype.Qc=function(a,b){this.Ua=b};var ji=[{id:"1",key:"1"},{id:"2",key:"2"},{id:"3",key:"3"},{id:"4",key:"4"},{id:"5",key:"5"},{id:"6",key:"6"},{id:"7",key:"7"},{id:"8",key:"8"},{id:"9",key:"9"}];ii.prototype.re=function(){return ji};
var ki=[{caption:"Single",Da:gi,fa:hi},{caption:"Double",Da:2,fa:hi},{caption:"Triple",Da:3,fa:hi},{caption:"Quadruple",Da:4,fa:hi},{caption:"Single Up",Da:gi,fa:11},{caption:"Single Down",Da:gi,fa:13},{caption:"Single Up or Down",Da:gi,fa:12}];u=ii.prototype;u.M=hh("kemia.controller.plugins.BondEdit");
u.tf=function(a){var b=Ma(ji,function(c){return c.id==a.identifier});b&&B(this.b.selected,function(c){var d=parseInt(b.id);if(c instanceof R){c=c;T(this.b);for(var e=0;e<d;e++){var f=li(c.v,c,gi,hi);if(f)c=V(f,c)}U(this.b,this.b.r);P(this.b);return k}return k},this)};
u.ue=function(a){if(this.Ua&&!this.ag){var b=qh(this.b,a);this.b.selected.length=0;this.b.X.style.cursor="default";a.currentTarget.l&&a.currentTarget.l.clear();a.currentTarget.l=undefined;if(b instanceof R){rh(this.b,b);this.b.X.style.cursor="pointer";a.currentTarget.l=a.currentTarget.l?this.wb(b,a.currentTarget.l):this.wb(b);return k}else if(b instanceof S){rh(this.b,b);this.b.X.style.cursor="pointer";a.currentTarget.l=a.currentTarget.l?this.fc(b,a.currentTarget.l):this.fc(b);return k}}return n};
u.fb=function(a){try{var b=this.b.selected;if(b.length)B(b,function(d){if(d instanceof R)if(this.Ua){T(this.b);d=li(d.v,d,this.Ua.Da,this.Ua.fa);this.b.selected.length=0;rh(this.b,d);U(this.b,this.b.r);P(this.b);return k}if(d instanceof S)if(this.Ua)if(this.Ua.Da!=d.Da||this.Ua.fa!=d.fa||d.fa!=hi){T(this.b);var e=this.Ua.fa!=hi&&d.fa==this.Ua.fa?new S(d.target,d.source,this.Ua.Da,this.Ua.fa):new S(d.source,d.target,this.Ua.Da,this.Ua.fa),f=d.v;Eh(f,d);Dh(f,e);U(this.b,this.b.r);P(this.b);return k}},
this);else if(this.Ua){T(this.b);this.le(Mh(a));U(this.b,this.b.r);P(this.b);return k}}catch(c){this.M.log(Zg,c,void 0)}};u.le=function(a){a=Lh((this.b.k.transform?this.b.k.transform:this.b.k.ca.transform).lb(),[a])[0];var b=new R("C",a.x,a.y);a=new Q;Gh(a,b);li(a,b,this.Ua.Da,this.Ua.fa);if(this.b.r.length>0){b=this.b.r[0];b instanceof Th&&Ih(b,a)}else this.b.Kc([a])};u.wb=function(a,b){return this.b.k.ca.xb.ja(a,"green",b)};u.fc=function(a,b){return this.b.k.ca.Bd.m(a).ja(a,"green",b)};
u.sd=function(){this.Ua=undefined};u.queryCommandValue=function(a){if(a=="selectBond")return this.Ua};var mi={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",96:"num-0",
97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};function ni(a){this.Oe={};this.Ec={ud:[],Ri:0};this.Oj=Nb(oi);this.pj=k;this.mj=this.qj=n;this.ok=k;this.Dc=a;Sc(this.Dc,"keydown",this.hd,n,this);db&&F&&I("1.8")&&Sc(this.Dc,"keyup",this.Uh,n,this);if(eb&&!F){Sc(this.Dc,"keypress",this.Wh,n,this);Sc(this.Dc,"keyup",this.Xh,n,this)}}var pi;A(ni,ad);var oi=[27,112,113,114,115,116,117,118,119,120,121,122,123,19],qi={ej:"shortcut",dj:"shortcut_"};u=ni.prototype;
u.Zg=function(a){var b=ri,c=this.Oe,d=arguments;if(y(d[1])){d=d[1];d=d.replace(/[ +]*\+[ +]*/g,"+").replace(/[ ]+/g," ").toLowerCase();d=d.split(" ");for(var e=[],f,h=0;f=d[h];h++){var i=f.split("+"),j;f=0;for(var l,o=0;l=i[o];o++){switch(l){case "shift":f|=1;continue;case "ctrl":f|=2;continue;case "alt":f|=4;continue;case "meta":f|=8;continue}j=l;if(!pi){i={};l=void 0;for(l in mi)i[mi[l]]=l;pi=i}j=pi[j];break}e.push({keyCode:j,mi:f})}d=e}else{e=d;h=1;if(ha(d[1])){e=d[1];h=0}for(d=[];h<e.length;h+=
2)d.push({keyCode:e[h],mi:e[h+1]})}b(c,d,a)};u.p=function(){ni.h.p.call(this);this.Oe={};Uc(this.Dc,"keydown",this.hd,n,this);db&&F&&I("1.8")&&Uc(this.Dc,"keyup",this.Uh,n,this);if(eb&&!F){Uc(this.Dc,"keypress",this.Wh,n,this);Uc(this.Dc,"keyup",this.Xh,n,this)}this.Dc=m};u.Uh=function(a){if(a.keyCode==224){this.li=k;ed(function(){this.li=n},400,this)}else{var b=a.metaKey||this.li;if((a.keyCode==67||a.keyCode==88||a.keyCode==86)&&b){a.metaKey=b;this.hd(a)}}};
function si(a,b){return eb&&!F&&b.ctrlKey&&b.altKey&&!b.shiftKey}u.Wh=function(a){if(a.keyCode>32&&si(this,a))this.hi=k};u.Xh=function(a){!this.hi&&si(this,a)&&this.hd(a)};function ri(a,b,c){var d=b.shift();d=d.keyCode&255|d.mi<<8;var e=a[d];if(e&&c&&(b.length==0||y(e)))g(Error("Keyboard shortcut conflicts with existing shortcut"));if(b.length){e||(e=a[d]={});ri(e,b,c)}else a[d]=c}function ti(a,b,c,d){c=c||0;if((d=(d||a.Oe)[b[c]])&&!y(d)&&b.length-c>1)return ti(a,b,c+1,d);return d}
u.hd=function(a){if(ui(this,a))if(a.type=="keydown"&&si(this,a))this.hi=n;else{var b=a.keyCode&255|((a.shiftKey?1:0)|(a.ctrlKey?2:0)|(a.altKey?4:0)|(a.metaKey?8:0))<<8,c,d,e=ua();if(this.Ec.ud.length&&e-this.Ec.Ri<=1500)c=ti(this,this.Ec.ud);else this.Ec.ud.length=0;c=c?c[b]:this.Oe[b];if(!c){c=this.Oe[b];this.Ec.ud=[]}if(c&&y(c))d=c;else if(c){this.Ec.ud.push(b);this.Ec.Ri=e;F&&a.preventDefault()}else this.Ec.ud.length=0;if(d){this.pj&&a.preventDefault();this.qj&&a.stopPropagation();b=this.dispatchEvent(new vi(qi.ej,
d,a.target));b&=this.dispatchEvent(new vi(qi.dj+d,d,a.target));b||a.preventDefault();this.Ec.ud.length=0}}};
function ui(a,b){var c=b.keyCode;if(c==16||c==17||c==18)return n;var d=b.target,e=d.tagName=="TEXTAREA"||d.tagName=="INPUT"||d.tagName=="BUTTON"||d.tagName=="SELECT",f=!e&&(d.isContentEditable||d.ownerDocument&&d.ownerDocument.designMode=="on");if(!e&&!f)return k;if(a.Oj[c]||a.mj)return k;if(f)return n;if(a.ok&&(b.altKey||b.ctrlKey||b.metaKey))return k;if(d.tagName=="INPUT"&&(d.type=="text"||d.type=="password"))return c==13;if(d.tagName=="INPUT"||d.tagName=="BUTTON")return c!=32;return n}
function vi(a,b,c){pc.call(this,a,c);this.identifier=b}A(vi,pc);/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function wi(){O.call(this)}A(wi,O);wi.prototype.Qb=function(a){return a=="selectSymbol"};wi.prototype.Cc=Mg("selectSymbol");var xi=[{id:"H",key:"h"},{id:"C",key:"c"},{id:"N",key:"n"},{id:"S",key:"s"},{id:"P",key:"p"},{id:"O",key:"o"},{id:"F",key:"f"},{id:"I",key:"i"},{id:"+",key:[187,1]},{id:"-",key:189}];u=wi.prototype;u.re=function(){return xi};u.sd=function(){this.T=undefined};u.Qc=function(a,b){this.T=b};u.M=hh("kemia.controller.plugins.AtomEdit");
u.tf=function(a){try{var b=a.identifier,c=Ma(xi,function(e){return e.id==b});if(c){B(this.b.selected,function(e){if(e instanceof R)if("+"==c.id){T(this.b);e.Va++;this.b.Kc(this.b.r);P(this.b)}else if("-"==c.id){T(this.b);e.Va--;this.b.Kc(this.b.r);P(this.b)}else{var f=c.id;if(f!=e.T){T(this.b);yi(this,f,e);this.b.Kc(this.b.r);P(this.b);return k}}},this);return k}}catch(d){this.M.info(d)}};
u.ue=function(a){if(this.T){this.b.selected.length=0;this.b.X.style.cursor="default";var b=qh(this.b,a);a.currentTarget.l&&a.currentTarget.l.clear();if(b instanceof R){rh(this.b,b);this.b.X.style.cursor="pointer";a.currentTarget.l=a.currentTarget.l?this.wb(b,a.currentTarget.l):this.wb(b);return k}}return n};
u.fb=function(a){if(this.T){var b=this.b.selected;if(b.length)if(b.length==1&&a.shiftKey){a=b[0];li(a.v,a,gi,hi,this.T);this.b.Kc(this.b.r);P(this.b);return k}else B(b,function(c){if(c instanceof R)if(this.T&&this.T!=c.T){T(this.b);yi(this,this.T,c);this.b.Kc(this.b.r);P(this.b);return k}},this);else{this.le(Mh(a));this.b.Kc(this.b.r);P(this.b);return k}}return n};u.wb=function(a,b){return this.b.k.ca.xb.ja(a,"purple",b)};
function yi(a,b,c){var d=new R(b,c.a.x,c.a.y),e=c.v;B(c.g.L(),function(f){var h=f.la();h.v=undefined;c==h.source?h.source=d:h.target=d;Dh(e,h);Eh(e,f)});Fh(e,c);Gh(e,d)}u.le=function(a){a=Lh(this.b.k.transform.lb(),[a])[0];var b=new R(this.T,a.x,a.y);a=new Q;Gh(a,b);if(this.b.r.length>0){b=this.b.r[0];Ih(b,a)}};u.queryCommandValue=function(a){if(a=="selectSymbol")return this.T};function zi(a){a=String(a);var b;b=/^\s*$/.test(a)?n:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}g(Error("Invalid JSON string: "+a))}function Ai(a){return Bi(new Ci,a)}function Ci(){}function Bi(a,b){var c=[];Di(a,b,c);return c.join("")}
function Di(a,b,c){switch(typeof b){case "string":Ei(a,b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==m){c.push("null");break}if(ha(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++){c.push(e);Di(a,b[f],c);e=","}c.push("]");break}c.push("{");d="";for(e in b)if(b.hasOwnProperty(e)){f=b[e];if(typeof f!="function"){c.push(d);Ei(a,e,c);c.push(":");Di(a,f,c);d=","}}c.push("}");break;case "function":break;
default:g(Error("Unknown type: "+typeof b))}}var Fi={'"':'\\"',"\\":"\\\\","/":"\\/","":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","":"\\u000b"},Gi=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Ei(a,b,c){c.push('"',b.replace(Gi,function(d){if(d in Fi)return Fi[d];var e=d.charCodeAt(0),f="\\u";if(e<16)f+="000";else if(e<256)f+="00";else if(e<4096)f+="0";return Fi[d]=f+e.toString(16)}),'"')};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Hi(){O.call(this);this.nk=100;this.wd=[];this.De=[];this.mg=[]}A(Hi,O);var Ii=[{id:"undo",key:27}];Hi.prototype.re=function(){return Ii};Hi.prototype.tf=aa();var Ji=Jb({hl:"undo",el:"redo"});u=Hi.prototype;u.Cc=s("UndoRedo");u.Qb=function(a){return a in Ji};u.Qc=function(a){try{if(a=="undo")Ki(this,this.wd,this.De);else a=="redo"&&Ki(this,this.De,this.wd)}catch(b){this.M.info(b)}};
u.Qj=function(a){try{var b=Li(this,a.target);if(this.mg!=b){this.wd.push(b);if(this.wd.length>this.nk){this.wd.shift();var c=this.De.length;this.De.length=0;this.dispatchEvent({type:Mi,state:b});if(this.wd.length==1||c)this.dispatchEvent(Ni)}}this.mg=b}catch(d){this.M.info(d)}};function Li(a,b){var c=b.r,d="[]";if(c)d=C(c,function(e){if(e instanceof Th)return Oi(e);else if(e instanceof Q)return Pi(e)});return d}
function Ki(a,b,c){if(b.length){var d=b.pop();c.push(d);U(a.b,C(d,function(e){return e.e?Qi(e):Ri(e,k)}));if(b.length==0||c.length==1)a.dispatchEvent(Ni)}}u.jf=function(a){Hi.h.jf.call(this,a);this.lf=new fd(this);this.lf.u(a,Si,this.Qj)};u.pg=function(a){a.nl();this.lf.aa();this.mg=this.lf=m};u.p=function(){Hi.h.p.call(this);this.lf.aa();this.b=m};var Ni="state_change",Mi="state_added";Hi.prototype.M=hh("kemia.controller.plugins.UndoRedo");
Hi.prototype.queryCommandValue=function(a){var b=n;if(a=="undo")b=this.wd.length>0;else if(a=="redo")b=this.De.length>0;return b};function Ti(a,b){this.source=a;this.target=b}function Ui(a,b,c){return((a.target.x-a.source.x)*(b.y-a.source.y)-(b.x-a.source.x)*(a.target.y-a.source.y))*((a.target.x-a.source.x)*(c.y-a.source.y)-(c.x-a.source.x)*(a.target.y-a.source.y))>0};function Rh(a,b){this.x=Number(a)||0;this.y=Number(b)||0}A(Rh,K);function Vi(a){return new Rh(a.x,a.y)}u=Rh.prototype;u.la=function(){return new Rh(this.x,this.y)};u.scale=function(a){this.x*=a;this.y*=a;return this};u.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y))};u.add=function(a){this.x+=a.x;this.y+=a.y;return this};u.Pe=function(a){this.x-=a.x;this.y-=a.y;return this};function sh(a,b,c,d,e){this.source=a!==undefined?a:new K(10,0);this.target=b!==undefined?b:M(this.source,new K(2,0));this.style=c!==undefined?c:Wi;this.Yg=d!==undefined?d:"";this.jg=e!==undefined?e:""}u=sh.prototype;u.translate=function(a){this.source=M(this.source,a);this.target=M(this.target,a)};u.va=function(){var a=Vi(this.source);return a.add(Vi(this.target).Pe(a).scale(0.5))};
u.rf=function(a){var b=new K((this.source.x+this.target.x)/2,(this.source.y+this.target.y)/2),c=new Vi(L(this.source,this.target));return Ui(new Ti(b,M(b,new Rh(-c.y,c.x))),a,this.target)?Xi:Yi};u.jh=function(a){this.Yg=a?a:""};u.dh=function(a){this.jg=a?a:""};u.toString=function(){return"kemia.model.Arrow "+this.source.toString()+" "+this.target.toString()};var Wi=1,Xi=1,Yi=2;function th(a){this.a=a!==undefined?a:new K(0,0)}th.prototype.translate=function(a){this.a=M(this.a,a)};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Zi(){this.yd={};O.call(this)}A(Zi,O);var $i=Jb({Zk:"editArrow",$k:"editPlus"});u=Zi.prototype;u.Qb=function(a){return a in $i};u.Cc=Mg("ArrowPlusEdit");u.Qc=function(a,b,c){this.yd[a]=c};u.M=hh("kemia.controller.plugins.ArrowPlusEdit");
u.fb=function(a){if(this.yd.editArrow){T(this.b);var b=this.b.k.ca.transform.lb();b=X(b,[new K(a.offsetX,a.offsetY)]);aj(this.b.r[0],new sh(b[0]));U(this.b,this.b.r);P(this.b)}else if(this.yd.editPlus){T(this.b);b=this.b.k.ca.transform.lb();b=X(b,[new K(a.offsetX,a.offsetY)]);a=this.b.r[0];b=new th(b[0]);a.Vb.push(b);b.Ha=a;U(this.b,this.b.r);P(this.b)}};u.sd=function(){this.yd.editArrow=n;this.yd.editPlus=n};u.queryCommandValue=function(a){var b=m;if(this.Qb(a))b=this.yd[a];return b};function bj(a,b){this.e=a;this.g=b;this.ea=Array(3);this.ob=m}bj.prototype.ib=function(a,b){this.ea[a]=b};bj.prototype.va=function(){if(!this.ob){for(var a=0,b=0,c=0,d=this.e.length;c<d;c++){a+=this.e[c].a.x;b+=this.e[c].a.y}this.ob=new K(a/this.e.length,b/this.e.length)}return this.ob};bj.prototype.toString=function(){return"kemia.ring.Ring \n\t"+C(this.e,function(a){return" "+a.toString()},this).join("\n\t")+"\n\t"+C(this.g,function(a){return" "+a.toString()},this).join("\n\t")+"\n\t"};function cj(a){this.e=a}function dj(a){var b=a.e.length-1;return a.e.length>2&&a.e[0]==a.e[b]}
cj.prototype.splice=function(a){var b;var c=a.e,d=this.e.length-1,e=c.length-1;if(this.e[d]==c[0]||this.e[d]==c[e])b=this.e[d];else if(this.e[0]==c[0]||this.e[0]==c[e])b=this.e[0];else g("Couldn't splice - no intersection");c=[];d=0;for(e=this.e.length;d<e;d++)c.push(this.e[d]);this.e[0]==b&&c.reverse();if(a.e[0]==b){d=1;for(e=a.e.length;d<e;d++)c.push(a.e[d])}else for(d=a.e.length-2;d>=0;d--)c.push(a.e[d]);a:{a=1;for(b=c.length-1;a<b;a++)for(d=1;d<b;d++)if(a!=d)if(c[a]==c[d]){a=n;break a}a=k}if(!a)return m;
return new cj(c)};function ej(a){this.zc=[];this.e=[];for(var b=0,c=a.zb();b<c;b++){var d=a.g[b];this.zc.push(new cj([d.source,d.target]))}b=0;for(c=Y(a);b<c;b++)this.e.push(a.e[b])}
ej.prototype.remove=function(a,b){for(var c=[],d=0,e=this.zc.length;d<e;d++){var f=this.zc[d];if(dj(f))D(f.e,a)&&c.push(f);else{var h=f.e.length-1;if(f.e[0]==a||f.e[h]==a)c.push(f)}}d=[];f=0;for(h=c.length;f<h;f++)dj(c[f])&&d.push(c[f]);f=0;for(h=d.length;f<h;f++){D(c,d[f])&&Na(c,d[f]);D(this.zc,d[f])&&Na(this.zc,d[f])}e=[];f=0;for(h=c.length;f<h;f++)for(var i=f+1;i<h;i++){var j=c[i].splice(c[f]);j!=m&&e.push(j)}f=0;for(h=c.length;f<h;f++)D(this.zc,c[f])&&Na(this.zc,c[f]);f=0;for(h=e.length;f<h;f++)!D(this.zc,
e[f])&&e[f].e.length<=b+1&&this.zc.push(e[f]);Na(this.e,a);return d};function fj(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];e instanceof Array?b.push(fj(e)):b.push(e)}return b}function gj(a,b,c){if(a.length)a.push(b[0].concat(c[0]));else a[0]=b[0].concat(c[0])}function hj(a,b){return a.Cnum-b.Cnum}
function ij(a,b,c,d){for(var e=0,f=b.length;e<f;e++){var h=b[e];if(a.length>=h.length){for(var i=k,j=0,l=h.length;j<l;j++)D(a,h[j])||(i=n);if(i)return k}j=0;for(l=a.length;j<l;j++)D(h,a[j])&&d[j]++}b=n;j=0;for(l=a.length;j<l;j++)if(d[a[j]]<c[a[j]]-1)b=k;if(b){j=0;for(l=a.length;j<l;j++)d[a[j]]++;return n}return k}function jj(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=b.g[a[d]],h=kj(b,f.source);f=kj(b,f.target);D(c,h)||c.push(h);D(c,f)||c.push(f)}return c}
function lj(a){var b=a.zb()-Y(a)+1;if(!b)return[];var c;c=Y(a);for(var d=[],e=0;e<c;e++){for(var f=[],h=0;h<c;h++)if(e==h)f.push(0);else mj(a,a.e[e],a.e[h])?f.push(1):f.push(99999999);d.push(f)}e=[];for(f=0;f<c;f++){h=[];for(var i=0;i<c;i++){var j=mj(a,a.e[f],a.e[i]);j?h.push([[Ha(a.g,j)]]):h.push([])}e.push(h)}f=[];for(h=0;h<c;h++){i=[];for(j=0;j<c;j++)i.push([]);f.push(i)}for(h=0;h<c;h++)for(i=0;i<c;i++)for(j=0;j<c;j++){var l=d[i][j],o=d[i][h]+d[h][j],p=e[i][h],q=e[h][j];if(o!=1E8)if(l>o){f[i][j]=
l==o+1?fj(e[i][j]):[];d[i][j]=o;e[i][j]=[p[0].concat(q[0])]}else if(l==o)p.length&&q.length&&gj(e[i][j],p,q);else if(l==o-1)gj(f[i][j],p,q);else d[i][j]=d[i][j]}c={D:d,Pe1:e,Pe2:f};d=c.D;e=c.Pe1;f=c.Pe2;h=d.length;c=[];for(i=0;i<h;i++)for(j=0;j<h;j++)d[i][j]==0||e[i][j].length==1&&f[i][j].length==0||c.push({Cnum:f[i][j].length?2*(d[i][j]+0.5):2*d[i][j],Pe1:e[i][j],Pe2:f[i][j]});c.sort(hj);a:{d=[];e=[];f=0;for(h=Y(a);f<h;f++)e.push(a.e[f].zb());i=[];for(f=0;f<Y(a);f++)i[f]=0;f=0;for(h=c.length;f<h;f++){j=
c[f];if(j.Cnum%2){l=0;for(o=j.Pe2.length;l<o;l++){p=p=j.Pe1[0].concat(j.Pe2[l]);q=d;var t=e,v=i,x=jj(p,a);if(p.length===x.length)ij(x,q,t,v)||q.push(x);if(d.length==b){b=d;break a}}}else{l=0;for(o=j.Pe1.length-1;l<o;l++){p=p=j.Pe1[l].concat(j.Pe1[l+1]);q=d;t=e;v=i;x=jj(p,a);if(p.length===x.length)ij(x,q,t,v)||q.push(x);if(d.length==b){b=d;break a}}}}b=d}c=0;for(d=b.length;c<d;c++){e=b;f=c;h=b[c];i=a;j=[h[0]];l=i.e[h[0]];for(o=0;h.length!=j.length;){o++;if(o>1E3)break;p=1;for(q=h.length;p<q;p++){t=
i.e[j[j.length-1]];v=i.e[h[p]];if(!D(j,h[p]))if(mj(i,t,v))j.push(h[p]);else mj(i,l,v)&&Sa(j,0,0,h[p])}}e[f]=j}return b};function nj(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c.push(b.e[a[d]]);e=[];d=0;for(var f=c.length-1;d<f;d++){var h=mj(b,c[d],c[d+1]);h!=m&&e.push(h)}h=mj(b,c[0],c[c.length-1]);h!=m&&e.push(h);return new bj(c,e)};function oj(a,b,c,d,e,f){if(arguments.length==6)this.setTransform(a,b,c,d,e,f);else if(arguments.length!=0)g(Error("Insufficient matrix parameters"));else{this.ha=this.sa=1;this.xa=this.Aa=this.gb=this.hb=0}}u=oj.prototype;u.la=function(){return new oj(this.ha,this.xa,this.Aa,this.sa,this.gb,this.hb)};u.setTransform=function(a,b,c,d,e,f){if(!ka(a)||!ka(b)||!ka(c)||!ka(d)||!ka(e)||!ka(f))g(Error("Invalid transform parameters"));this.ha=a;this.xa=b;this.Aa=c;this.sa=d;this.gb=e;this.hb=f;return this};
u.scale=function(a,b){this.ha*=a;this.xa*=a;this.Aa*=b;this.sa*=b;return this};u.translate=function(a,b){this.gb+=a*this.ha+b*this.Aa;this.hb+=a*this.xa+b*this.sa;return this};u.rotate=function(a,b,c){a=Nh(new oj,a,b,c);b=this.ha;c=this.Aa;this.ha=a.ha*b+a.xa*c;this.Aa=a.Aa*b+a.sa*c;this.gb+=a.gb*b+a.hb*c;b=this.xa;c=this.sa;this.xa=a.ha*b+a.xa*c;this.sa=a.Aa*b+a.sa*c;this.hb+=a.gb*b+a.hb*c;return this};
u.toString=function(){return"matrix("+[this.ha,this.xa,this.Aa,this.sa,this.gb,this.hb].join(",")+")"};u.transform=function(a,b,c,d,e){var f=b;d=d;for(b=b+2*e;f<b;){e=a[f++];var h=a[f++];c[d++]=e*this.ha+h*this.Aa+this.gb;c[d++]=e*this.xa+h*this.sa+this.hb}};u.lb=function(){var a=this.ha*this.sa-this.Aa*this.xa;return new oj(this.sa/a,-this.xa/a,-this.Aa/a,this.ha/a,(this.Aa*this.hb-this.sa*this.gb)/a,(this.xa*this.gb-this.ha*this.hb)/a)};
function Kh(a,b){return(new oj).setTransform(1,0,0,1,a,b)}function pj(a,b,c){return a.setTransform(b,0,0,c,0,0)}function Nh(a,b,c,d){var e=Math.cos(b);b=Math.sin(b);return a.setTransform(e,b,-b,e,c-c*e+d*b,d-c*b-d*e)};function Oh(a,b,c,d,e,f){oj.call(this);arguments.length==6&&this.setTransform(a,b,c,d,e,f)}A(Oh,oj);function X(a,b){var c=C(b,function(f){return[f.x,f.y]}),d=Ya(c);c=[];a.transform(d,0,c,0,d.length/2);d=[];for(var e=0;e<c.length;e+=2)d.push(new K(c[e],c[e+1]));return d}function Lh(a,b){return X(a,b)}Oh.prototype.lb=function(){var a=this.ha*this.sa-this.Aa*this.xa;return new Oh(this.sa/a,-this.xa/a,-this.Aa/a,this.ha/a,(this.Aa*this.hb-this.sa*this.gb)/a,(this.xa*this.gb-this.ha*this.hb)/a)};function Q(a){this.g=[];this.e=[];this.name=a?a:"";this.id=undefined;this.Ki=[];this.Lf=k;this.Bb=[];this.Jd=0}function Dh(a,b){var c=kj(a,b.source),d=kj(a,b.target);if(a.Bb[c]!=a.Bb[d]){var e;if(a.Bb[c]<a.Bb[d]){c=a.Bb[c];e=a.Bb[d]}else{e=a.Bb[c];c=a.Bb[d]}a.Jd--;d=0;for(var f=a.e.length;d<f;d++)if(a.Bb[d]==c)a.Bb[d]=e}a.g.push(b);b.source.g.add(b);b.target.g.add(b);Gh(a,b.source);Gh(a,b.target);b.v=a}
function qj(a){var b=1.25;if(a.g.length)b=Ja(a.g,function(c,d){return c+Cb(d.source.a,d.target.a)},0)/a.g.length;return b}function mj(a,b,c){a=b.g.L();for(var d=0,e=a.length;d<e;d++){var f=a[d];if(V(f,b)==c)return f}return m}function kj(a,b){return Ha(a.e,b)}function Fh(a,b){var c;if(b.constructor==Number)c=a.e[b];else if(b.constructor==R)c=b;var d=c.g.L();B(d,function(e){Na(this.g,e)},a);c.g.clear();Na(a.e,c);c.v=undefined}
function Eh(a,b){var c;c=b.constructor==Number?a.g[b]:b;c.source.g.remove(c);c.target.g.remove(c);if(c.source.g.L().length==0){Na(a.e,c.source);c.source.v=undefined}if(c.target.g.L().length==0){Na(a.e,c.target);c.target.v=undefined}Na(a.g,c);c.v=undefined;c.source=undefined;c.target=undefined}function Y(a){return a.e.length}u=Q.prototype;u.zb=function(){return this.g.length};function Gh(a,b){if(!D(a.e,b)){var c=a.e.length;a.Jd++;a.Bb[c]=a.Jd;a.e.push(b);b.v=a}}
function rj(a){if(a.Lf){var b;if(a.zb()-Y(a)+a.Jd){b=0;for(var c=a.e.length;b<c;b++){var d=a.e[b];d.index=b;d.mc=undefined;d.Xd=undefined;a.e[b].index=b}b=0;for(c=a.g.length;b<c;b++)a.g[b].index=b;if(c=Y(a)){b=Xa(n,c);c=Xa(n,c);d=[];var e=a.e[0];e.mc=0;d.push(e);for(b[0]=k;;){if(!d.length)break;e=d[0];Oa(d,0);for(var f=e.g.L(),h=0,i=f.length;h<i;h++){var j=f[h],l=j.index;if(!c[l]){c[l]=k;var o=V(j,e);j=o.index;if(b[j]){j=[];if(e.mc==o.mc){j.push(e);j.push(o)}else{o.Xd=k;var p=ei(o);l=0;for(var q=
p.length;l<q;l++){var t=p[l];t.mc==o.mc-1&&j.push(t)}}for(o=e.mc;;){j[0].Xd=k;j[1].Xd=k;o--;p=ei(j[0]);l=0;for(q=p.length;l<q;l++)if(p[l].mc==o){j[0]=p[l];break}p=ei(j[1]);l=0;for(q=p.length;l<q;l++)if(p[l].mc==o){j[1]=p[l];break}if(j[0]==j[1]){j[0].Xd=k;break}}}else{o.mc=e.mc+1;b[j]=k;d.push(o)}}}}}b=[];e=Y(a);c=Xa(n,e);d=Xa(n,e);e=Xa(-1,e);f=0;for(h=Y(a);f<h;f++){j=a.e[f];if(!c[j.index])if(j.Xd){i=new Q;q=[];q.push(j);c[0]=k;t=new R;t.xf=j.index;e[j.index]=0;for(Gh(i,t);;){if(!q.length)break;o=
q[0];Oa(q,0);p=o.g.L();j=0;for(l=p.length;j<l;j++){var v=p[j];t=v.index;if(!d[t]){d[t]=k;v=V(v,o);t=v.index;if(v.Xd){if(c[t]){t=mj(a,o,v);var x=new S(i.e[e[o.index]],i.e[e[v.index]]);x.xf=t.index}else{c[t]=k;q.push(v);t=new R;t.xf=v.index;e[v.index]=i.e.length;Gh(i,t);v=mj(a,o,v);x=new S(i.e[e[o.index]],t);x.xf=v.index}Dh(i,x)}}}}j=0;for(l=i.e.length;j<l;j++)i.e[j].index=j;j=0;for(l=i.g.length;j<l;j++)i.g[j].index=j;j=i.g.length-i.e.length+1;l=i;q=[];o=new ej(l);p=0;for(t=Y(l);p<t;p++){v=o.remove(l.e[p],
6);for(x=0;x<v.length;x++){var H=v[x].e;Oa(H,H.length-1);for(var J=0,ia=H.length;J<ia;J++)H[J]=kj(l,H[J]);q.push(H)}}Va(q);l=q;if(l.length>=j){l=l;q=j;x=i;o=[];p=[];t=0;for(v=Y(x);t<v;t++)p.push(x.e[t].zb());x=Xa(0,Y(x));t=0;for(v=l.length;t<v;t++){H=l[t];if(!ij(H,o,p,x)){o.push(H);if(o.length==q)break}}q=o;if(q.length<j)q=lj(i)}else q=lj(i);j=0;for(l=q.length;j<l;j++){o=q[j];p=0;for(t=o.length;p<t;p++)o[p]=i.e[o[p]].xf}j=0;for(i=q.length;j<i;j++)b.push(nj(q[j],a))}}b=b}else b=[];a.Ki=b;a.Lf=n}return a.Ki}
u.la=function(){var a=new Q(this.name);B(this.e,function(b){Gh(a,b)});B(this.g,function(b){Dh(a,b)});return a};function Xh(a){var b=a.la();if(b.Jd==1)return[b];var c=new he;B(b.e,function(d){var e=b.Bb[kj(b,d)];je(c.Ya,e)==n&&c.hc(e,new Q);Gh(c.m(e),d)});B(b.g,function(d){var e=b.Bb[kj(b,d.source)];Dh(c.m(e),d)});return c.L()}function sj(a,b){for(var c=[],d=a.g.length,e=0;e<d;e++)if(a.g[e].source==b||a.g[e].target==b)c.push(a.g[e]);return c}
u.toString=function(){return"kemia.model.Molecule - name: "+this.name+"\n\t"+C(this.e,function(a){return" "+kj(this,a)+": "+a.toString()},this).join("\n\t")+"\n\t"+C(this.g,function(a){return" "+kj(this,a.source)+", "+kj(this,a.target)+":  "+a.toString()},this).join("\n\t")+"\n\t"+C(rj(this),function(a){return a.toString()}).join("\n\t")};u.va=function(){var a=tj(this);return new K((a.left+a.right)/2,(a.top+a.bottom)/2)};function tj(a){return id.apply(m,C(a.e,function(b){return b.a}))}
u.rotate=function(a,b){b!==undefined||(b=this.va());var c=Nh(new Oh,N(a),b.x,b.y);B(this.e,function(d){d.a=X(c,[d.a])[0]})};u.scale=function(a){var b=pj(new Oh,a,a);B(this.e,function(c){c.a=X(b,[c.a])[0]})};u.translate=function(a){B(this.e,function(b){b.a=M(b.a,a)})};
function Sh(a,b,c,d,e,f){Fa(D(b.g,c));Fa(D(a.g,d));Fa(D(e.g.L(),c));Fa(D(f.g.L(),d));var h=qj(a)/qj(b);b.scale(h);h=Vi(L(f.a,e.a));var i=V(d,f),j=V(c,e);b.rotate(180+dg(cg(e.a.x,e.a.y,j.a.x,j.a.y),cg(i.a.x,i.a.y,f.a.x,f.a.y)),e.a);b.translate(h);var l=[c];B(e.g.L(),function(o){if(!D(l,o)){e==o.source?o.source=f:o.target=f;l.push(o);Dh(this,o)}},a);j=V(c,e);i=V(d,f);B(j.g.L(),function(o){if(!D(l,o)){j==o.source?o.source=i:o.target=i;Dh(this,o);l.push(o)}},a);c=Ia(b.g,function(o){return!D(l,o)});B(c,
function(o){Dh(this,o)},a);b.g.length=0;b.e.length=0;b.Ha&&Hh(b.Ha,b);delete b;a.Lf=k;return a}function li(a,b,c,d,e){var f=1.25,h=b.g.L();if(h.length)f=Ja(h,function(j,l){return j+Cb(l.source.a,l.target.a)},0)/h.length;h=fi(b);if(h!=undefined){var i="C";if(e)i=e;e=new R(i,b.a.x+f*Math.cos(N(h)),b.a.y+f*Math.sin(N(h)));b=new S(b,e,c,d);Gh(a,e);Dh(a,b);return b}}u.M=hh("kemia.model.Molecule");/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Th(){this.Zh="";this.nd=[];this.ia=[];this.Vb=[]}u=Th.prototype;u.M=hh("kemia.model.Reaction");
function uj(a,b){var c=vj(a),d=new Rh(0,0),e=tj(b);if(c.length>0){c=wj(c);if(e.left<=c.right&&c.left<=e.right&&e.top<=c.bottom&&c.top<=e.bottom)d=new Rh(c.right-e.left+3,0)}b.translate(d);if(!a.Ng(b)){d=xj(a);e=tj(b).right+3;if(a.ia.length>0)e-=a.ia[0].source.x;var f=new Rh(e,0);B(a.ia,function(h){h.translate(f)});B(a.Vb,function(h){h.translate(f)});B(d,function(h){h.translate(f)})}Fa(a.Ng(b));a.Vb.length=0;Ih(a,b)}function vj(a){return Ia(a.nd,a.Ng,a)}function xj(a){return Ia(a.nd,a.Lg,a)}
function Ih(a,b){a.nd.push(b);b.Ha=a}u.Ng=function(a){return this.ia.length>0?this.ia[0].rf(a.va())==Yi:k};u.Lg=function(a){return this.ia.length>0?this.ia[0].rf(a.va())==Xi:n};function Hh(a,b){Na(a.nd,b);b.Ha=undefined}function aj(a,b){if(a.ia.length)a.ia[0].Ha=undefined;a.ia.length=0;a.ia[0]=b;b.Ha=a}u.jh=function(a){this.ia.length>0&&this.ia[0].jh(a)};u.dh=function(a){this.ia.length>0&&this.ia[0].dh(a)};
function yj(a,b){var c;Va(b,function(d,e){return Wa(tj(d).left,tj(e).left)});B(b,function(d){if(c){var e,f=tj(c);e=tj(d);f=new Rh(f.right,f.top);e=f.add((new Rh(e.left,e.bottom)).Pe(f).scale(0.5));e=new th(e);this.Vb.push(e);e.Ha=this}c=d},a)}function wj(a){a=Ya(C(a,function(b){return b.e}));a=C(a,function(b){return b.a});return a.length>0?id.apply(m,a):m}
function zj(a){if(a.ia.length>0){var b=a.ia[0],c=wj(vj(a));a=wj(xj(a));if(c||a){c||(c=new hd(a.top,a.left-1,a.bottom,a.left-1));a||(a=new hd(c.top,c.right+1,c.bottom,c.right+1));c=new Rh(c.right,c.top);c=c.add((new Rh(a.left,a.bottom)).Pe(c).scale(0.5));c=Vi(c).Pe(Vi(b.va()));b.translate(c)}}}u.translate=function(a){B(this.nd,function(b){b.translate(a)});B(this.Vb,function(b){b.translate(a)});B(this.ia,function(b){b.translate(a)})};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Aj(a){if(a.Da==gi)return"SINGLE_BOND";if(a.Da==2)return"DOUBLE_BOND";if(a.Da==3)return"TRIPLE_BOND";if(a.Da==4)return"QUADRUPLE_BOND";g(Error("Invalid bond type ["+a.toString()+"]"))}function Bj(a){if(a.fa==11)return"SINGLE_BOND_UP";if(a.fa==13)return"SINGLE_BOND_DOWN";if(a.fa==12)return"SINGLE_BOND_UP_OR_DOWN";return"NOT_STEREO"}
function Cj(a,b,c,d){switch(a){case "SINGLE_BOND":switch(b){case "NOT_STEREO":return new S(c,d);case "SINGLE_BOND_UP":return new S(c,d,gi,11);case "SINGLE_BOND_UP_OR_DOWN":return new S(c,d,gi,12);case "SINGLE_BOND_DOWN":return new S(c,d,gi,13);default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}case "DOUBLE_BOND":return new S(c,d,2);case "TRIPLE_BOND":return new S(c,d,3);case "QUADRUPLE_BOND":return new S(c,d,4);case "AROMATIC":return new S(c,d,undefined,undefined,k);default:g(Error("invalid bond type/stereo ["+
a+"]/["+b+"]"))}}function Qi(a){a=a.constructor==String?zi(a):a;var b=new Q;b.name=a.name;b.id=a.id;B(a.atoms,function(c){Gh(b,new R(c.symbol,c.coord.x,c.coord.y,c.charge))});B(a.bondindex,function(c){Dh(b,Cj(c.type,c.stereo,b.e[c.source],b.e[c.target]))});return b}
function Pi(a){var b=C(a.e,function(d){return{symbol:d.T,coord:{x:d.a.x,y:d.a.y},charge:d.Va}}),c=C(a.g,function(d){var e=Aj(d),f=Bj(d);kj(a,d.source);kj(a,d.target);return{source:kj(a,d.source),target:kj(a,d.target),type:e,stereo:f}});return{name:a.name,id:a.id,atoms:b,bondindex:c}}function Dj(a){return{source:{x:a.source.x,y:a.source.y},target:{x:a.target.x,y:a.target.y}}}function Ej(a){return{x:a.a.x,y:a.a.y}}
function Ri(a,b){var c;c=a.constructor==String?zi(a):a;var d=new Th,e=[];if(c.reactants)e=C(c.reactants,Qi);var f=[];if(c.products)f=C(c.products,Qi);d.Zh=c.header;if(c.arrows)B(c.arrows,function(h){aj(d,new sh(new K(h.source.x,h.source.y),new K(h.target.x,h.target.y)))});else f.length>0&&aj(d,new sh);d.jh(c.reagents_text);d.dh(c.conditions_text);c.pluses&&B(c.pluses,function(h){h=new th(new K(h.x,h.y));d.Vb.push(h);h.Ha=d});B(e,function(h){uj(d,h)});B(f,function(h){if(d.ia.length==0){var i=vj(d);
if(i.length>0){i=wj(i);i=new sh(new K(i.right+3,(i.top+i.bottom)/2))}else i=new sh(new K(3,0));aj(d,i)}i=tj(h);var j=xj(d),l=0;if(j.length==0||b)l+=d.ia[0].target.x;else{j=wj(j);l+=j.right}l+=3;l-=i.left;if(l!=0){h.translate(new Rh(l,0));d.Vb.length=0}Fa(d.Lg(h));Ih(d,h)});c.arrows||zj(d);if(d.Vb.length==0){yj(d,vj(d));yj(d,xj(d))}return d}
function Oi(a){var b=a.Zh,c=C(vj(a),Pi),d=C(xj(a),Pi),e=C(a.ia,Dj),f=C(a.Vb,Ej),h;if(a.ia.length>0)h=a.ia[0].Yg;var i;if(a.ia.length>0)i=a.ia[0].jg;return{header:b,reactants:c,products:d,reagents_text:h,conditions_text:i,arrows:e,pluses:f}}hh("kemia.io.json");/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function Fj(){O.call(this)}A(Fj,O);Fj.prototype.M=hh("kemia.controller.plugins.MoleculeEdit");Fj.prototype.Qb=function(a){return a=="selectMoleculeTemplate"};Fj.prototype.Cc=Mg("selectMoleculeTemplate");var Gj=[{id:"benzene",key:"a"}];u=Fj.prototype;u.re=function(){return Gj};
u.tf=function(a){var b=Ma(Gj,function(e){return e.id==a.identifier});if(b){var c=Ma(Hj,function(e){return e.name==b.id}),d=this.b.selected;if(d.length)B(d,function(e){if(e instanceof R){T(this.b);Ij(this,e,c);U(this.b,this.b.r);P(this.b);return k}if(e instanceof S){T(this.b);Jj(this,e,c);U(this.b,this.b.r);P(this.b);return k}},this);else return n}};u.Qc=function(a,b){this.$c=b};
u.fb=function(a){var b=this.b.selected;if(b.length&&this.$c)B(b,function(c){if(c instanceof R){T(this.b);var d=Qa(c.v.e),e=Ij(this,c,this.$c);e=Ia(e.e,function(f){return!D(d,f)});Kj(this,a,e,c);U(this.b,this.b.r);P(this.b);return k}if(c instanceof S){T(this.b);Jj(this,c,this.$c);U(this.b,this.b.r);P(this.b);return k}},this);else if(this.$c){T(this.b);this.le(Lh(this.b.k.transform?this.b.k.transform.lb():this.b.k.ca.transform.lb(),[Mh(a)])[0],this.$c);U(this.b,this.b.r);P(this.b);return k}};
u.ue=function(a){if(this.$c){var b=qh(this.b,a);this.b.selected.length=0;this.b.X.style.cursor="default";a.currentTarget.l&&a.currentTarget.l.clear();a.currentTarget.l=undefined;if(b instanceof R){rh(this.b,b);this.b.X.style.cursor="pointer";a.currentTarget.l=a.currentTarget.l?this.wb(b,a.currentTarget.l):this.wb(b);return k}else if(b instanceof S){rh(this.b,b);this.b.X.style.cursor="pointer";a.currentTarget.l=a.currentTarget.l?this.fc(b,a.currentTarget.l):this.fc(b);return k}}return n};
u.wb=function(a,b){return this.b.k.ca.xb.ja(a,"yellow",b)};u.fc=function(a,b){return this.b.k.ca.Bd.m(a).ja(a,"yellow",b)};
function Kj(a,b,c,d){var e=d.a,f=new Yd(a.b.X);f.fj=d.v;f.ob=e;f.xc=X(a.b.k.transform?a.b.k.transform:a.b.k.ca.transform,[e])[0];f.eb=Mh(b);f.ge=cg(f.xc.x,f.xc.y,f.eb.x,f.eb.y);f.w=a.b;f.addEventListener("drag",function(){f.fj.bb.clear();f.qb=f.qb||f.sb;f.rb=f.rb||f.tb;var h=cg(f.xc.x,f.xc.y,f.eb.x+(f.sb-f.qb),f.eb.y+(f.tb-f.rb))-f.ge;h-=h%30;f.ge+=h;var i=Nh(new Oh,-N(h),f.ob.x,f.ob.y);B(c,function(j){j.a=X(i,[j.a])[0]});U(f.w,f.w.r)});f.addEventListener("end",function(){f.aa()});f.vc(b)}
u.le=function(a,b){if(b)var c=Qi(b);var d=L(a,c.va());c.translate(d);if(this.b.r.length>0){d=this.b.r;var e=d[0];if(e instanceof Th)Ih(e,c);else e instanceof Q&&d.push(c)}else Ih(new Th,c)};function Jj(a,b,c){a=Qi(c);Sh(b.v,a,a.g[0],b,a.g[0].target,b.source)}function Ij(a,b,c){a=li(b.v,b,gi,hi);var d=V(a,b);c=Qi(c);var e=c.e[0],f=li(c,e,gi,hi);return Sh(b.v,c,f,a,e,d)}u.M=hh("kemia.controller.plugins.MoleculeEdit");u.sd=function(){this.$c=undefined};u.queryCommandValue=function(a){if(a=="selectMoleculeTemplate")return this.$c};
u.wg=function(a){return Ia(C(a.e,function(b){var c=Lj(this.b.ye,{x:b.a.x,y:b.a.y},this);c=Ia(c,function(d){if(d instanceof R)if(!D(a.e,d))return k;return n});return c.length>0?[b,c[0]]:n},this),function(b){return b!=n},this)};
var Hj=[{name:"benzene",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,
target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclohexane",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane",atoms:[{symbol:"C",coord:{x:-2.3083,y:0.4635,z:0},charge:0},{symbol:"C",coord:{x:-2.3083,y:1.9635,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:2.427,
z:0},charge:0},{symbol:"C",coord:{x:0,y:1.2135,z:0},charge:0},{symbol:"C",coord:{x:-0.8817,y:0,z:0},charge:0}],bondindex:[{source:1,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopentane-house",atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},
{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.3,y:0,z:0},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"naphthalene",
atoms:[{symbol:"C",coord:{x:2.5981,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:2.5981,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:3,z:0},charge:0},{symbol:"C",coord:{x:0,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:0,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:1.2991,y:0,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:3,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:2.25,z:0},charge:0},{symbol:"C",coord:{x:5.1962,y:0.75,z:0},charge:0},{symbol:"C",coord:{x:3.8971,y:0,z:0},charge:0}],bondindex:[{source:0,
target:1,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:3,target:4,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:4,target:5,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:5,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:6,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:6,target:7,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:7,target:8,type:"SINGLE_BOND",stereo:"NOT_STEREO"},
{source:8,target:9,type:"DOUBLE_BOND",stereo:"NOT_STEREO"},{source:9,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclobutane",atoms:[{symbol:"C",coord:{x:0,y:0},charge:0},{symbol:"C",coord:{x:0,y:1.5},charge:0},{symbol:"C",coord:{x:-1.5,y:1.5000000000000002},charge:0},{symbol:"C",coord:{x:-1.5000000000000002,y:1.1102230246251565E-16},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:3,
type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:3,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]},{name:"cyclopropane",atoms:[{symbol:"C",coord:{x:0,y:0},charge:0},{symbol:"C",coord:{x:0,y:1.5},charge:0},{symbol:"C",coord:{x:-1.2990381056766582,y:0.7500000000000001},charge:0}],bondindex:[{source:0,target:1,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:1,target:2,type:"SINGLE_BOND",stereo:"NOT_STEREO"},{source:2,target:0,type:"SINGLE_BOND",stereo:"NOT_STEREO"}]}];function Mj(){}A(Mj,Ue);fa(Mj);Mj.prototype.i=function(a){var b={"class":"goog-inline-block "+this.Bc(a).join(" "),title:a.Od()||""};return a.Z().i("div",b,a.Ka)};Mj.prototype.ec=s("button");Mj.prototype.Oa=s(m);Mj.prototype.t=s("goog-flat-button");Ve("goog-flat-button",function(){return new hf(m,Mj.oa())});function Nj(){}A(Nj,Mj);fa(Nj);u=Nj.prototype;u.i=function(a){var b={"class":"goog-inline-block "+this.Bc(a).join(" "),title:a.Od()||""};return a.Z().i("div",b,[this.createCaption(a.Ka,a.Z()),this.lg(a.Z())])};u.wa=function(a){return a&&a.firstChild};u.createCaption=function(a,b){return b.i("div","goog-inline-block "+(this.t()+"-caption"),a)};u.lg=function(a){return a.i("div","goog-inline-block "+(this.t()+"-dropdown"),"")};u.t=s("goog-flat-menu-button");
Ve("goog-flat-menu-button",function(){return new Lf(m,m,Nj.oa())});function Oj(a,b){kf.call(this,a||Wf.oa(),b)}A(Oj,kf);Ve("goog-toolbar-separator",function(){return new Oj});function Pj(a){var b=Kg("clearEditor","File","File"),c=new Hf,d=new Vf(Xb("DIV",undefined,"New"));c.pa(d,k);b.Jc(c);b.Fb=k;a.push(b);a.push(new Oj);b=Qj("undo","Undo","","tr-icon tr-undo");b.Fb=k;a.push(b);b=Qj("redo","Redo","","tr-icon tr-redo");b.Fb=k;a.push(b);a.push(new Oj);b=Jg(oh,"Move","","tr-icon tr-move");b.Fb=k;a.push(b);b=Jg("rotate","Rotate","","tr-icon tr-rotate");b.Fb=k;a.push(b);b=Jg("erase","Erase","","tr-icon tr-erase");b.Fb=k;a.push(b);a.push(new Oj);return a}
function Rj(a){a.push(Ig("zoomIn","Zoom In","","tr-icon tr-zoom-in"));a.push(Ig("zoomOut","Zoom Out","","tr-icon tr-zoom-out"));a.push(new Oj);return a}
function Sj(a){var b=Kg("selectSymbol","Atomic Symbol","Symbol");b.Fb=k;b.We=function(i){i=i&&i.length>0?i:m;i!=b.Oa()&&b.Ea(i)};var c=new Hf;c.pa(new Vf(Xb("DIV",{style:"color:grey"},"H")),k);c.pa(new Vf(Xb("DIV",{style:"color:black"},"C")),k);c.pa(new Vf(Xb("DIV",{style:"color:blue"},"N")),k);c.pa(new Vf(Xb("DIV",{style:"color:red"},"O")),k);c.pa(new Vf(Xb("DIV",{style:"color:yellow"},"S")),k);c.pa(new Vf(Xb("DIV",{style:"color:orange"},"P")),k);c.pa(new Vf(Xb("DIV",{style:"color:green"},"F")),
k);c.pa(new Vf(Xb("DIV",{style:"color:green"},"Cl")),k);c.pa(new Vf(Xb("DIV",{style:"color:DarkRed"},"Br")),k);c.pa(new Vf(Xb("DIV",{style:"color:purple"},"I")),k);c.pa(new Gf,k);c.pa(new Vf(Xb("DIV",{style:"color:black"},"R1")),k);c.pa(new Vf(Xb("DIV",{style:"color:black"},"R2")),k);b.Jc(c);a.push(b);var d=Kg("selectBond","Bond Type","Bond");d.Fb=k;d.We=function(i){i!=d.Oa()&&d.Ea(i)};var e=new Hf;B(ki,function(i){e.pa(new Vf(i.caption,i),k)});d.Jc(e);a.push(d);var f=Kg("selectMoleculeTemplate",
"Template","Template");f.Fb=k;f.We=function(i){i!=f.Oa()&&f.Ea(i)};var h=new Hf;B(Hj,function(i){h.pa(new Vf(i.name,i),k)});f.Jc(h);a.push(f);return a}function Tj(a,b){for(var c=Ob(b),d=[],e=0,f;f=a[e];e++){if(y(f)){var h=void 0;if(f=Uj[f]){h=f.factory||Jg;var i=f.vj,j=f.hm,l=f.caption,o=f.ml,p=c||Ob();h=h(i,j,l,o,m,p);if(f.Fb)h.Fb=k}f=h}f&&d.push(f)}c=Ob(b);c=new Yf(Xf.oa(),nf,c);e=ud(b);c.Zc(e);c.sc(n);for(f=0;h=d[f];f++){cf(h,32,n);h.Zc(e);c.pa(h,k)}c.R(b);return c}
function Qj(a,b,c,d,e,f){var h=Ig(a,b,c,d,e,f);h.We=function(i){h.Ic(i)};return h}z("Format");z("Format");z("Undo");z("Redo");z("Font");z("Font size");z("Text color");z("Bold");z("Italic");z("Underline");z("Text background color");z("Add or remove link");z("Numbered list");z("Bullet list");z("Decrease indent");z("Increase indent");z("Align left");z("Align center");z("Align right");z("Justify");z("Remove formatting");z("Insert image");z("Strikethrough");z("Left-to-right");z("Right-to-left");z("Quote");
z("Edit HTML source");z("Link");z("Subscript");z("Superscript");z("Edit HTML");for(var Uj={},Vj=[],Wj=0,Xj;Xj=Vj[Wj];Wj++)Uj[Xj.vj]=Xj;delete Vj;function Yj(a,b,c){this.Q=a;this.j=new he(b!==undefined?b:{});c!==undefined&&this.j.zd(c)}Yj.prototype.M=hh("kemia.view.Renderer");function Zj(a,b){var c=kd(b).fd(),d=c.width,e=a.Q.fd();c.scale(c.width/c.height>e.width/e.height?e.width/c.width:e.height/c.height);c=a.Ke*c.width/d;return new Oh(c,0,0,-c,-Math.min(b.left,b.right)*c,Math.max(b.top,b.bottom)*c)}Yj.prototype.setTransform=ba("transform");function $j(a,b){Yj.call(this,a,ak,b)}A($j,Yj);
$j.prototype.ja=function(a,b,c){b||(b=this.j.m("highlight").color);c||(c=this.Q.lc());var d=cg(a.source.a.x,a.source.a.y,a.target.a.x,a.target.a.y),e=N(bg(d+90));d=N(bg(d-90));var f=this.transform.ha,h=this.j.m("highlight").radius*f;a=X(this.transform,[a.source.a,a.target.a]);f=M(new K(h*Math.cos(e),-h*Math.sin(e)),a[0]);var i=M(new K(h*Math.cos(e),-h*Math.sin(e)),a[1]);e=M(new K(h*Math.cos(d),-h*Math.sin(d)),a[0]);d=M(new K(h*Math.cos(d),-h*Math.sin(d)),a[1]);h=new bk;h.moveTo(a[0].x,a[0].y);h.lineTo(f.x,
f.y);h.lineTo(i.x,i.y);h.lineTo(a[1].x,a[1].y);h.close();b=new ck(b,0.15);this.Q.Ob(h,m,b,c);f=new bk;f.moveTo(a[0].x,a[0].y);f.lineTo(e.x,e.y);f.lineTo(d.x,d.y);f.lineTo(a[1].x,a[1].y);f.close();this.Q.Ob(f,m,b,c);return c};function dk(a){a=new Ti(a.source.a,a.target.a);a=L(a.target,a.source);return Math.atan2(a.y,a.x)}function ek(a){return a.T!="C"||a.zb()==1}
var ak={bond:{stroke:{width:1.5,color:"black"},fill:{color:"black"},"width-ratio":6,"symbol-space":0.3,"triple-dist":0.15,"quad-dist":0.13},highlight:{radius:0.3,color:"blue"}};function fk(a,b){$j.call(this,a,fk.cd,b)}A(fk,$j);fk.prototype.R=function(a,b,c){this.setTransform(b);var d=[a.source.a,a.target.a],e=Vi(L(d[1],d[0]));e.normalize();e.scale(this.j.m("bond")["symbol-space"]);if(ek(a.source))d[0]=M(d[0],e);if(ek(a.target))d[1]=L(d[1],e);d=X(b,[d[0],d[1]]);c.moveTo(d[0].x,d[0].y);c.lineTo(d[1].x,d[1].y)};function gk(a,b){$j.call(this,a,gk.cd,b)}A(gk,$j);
gk.prototype.R=function(a,b,c){this.setTransform(b);var d=hk(a),e=Vi(L(a.target.a,a.source.a));e.scale(1/this.j.m("bond")["width-ratio"]);var f=new Rh(-e.y,e.x),h=e.la().normalize().scale(this.j.m("bond")["symbol-space"]);if(d){var i=M(a.source.a,f);if(!Ui(new Ti(a.source.a,a.target.a),d.va(),i)){d=f;d.x=-d.x;d.y=-d.y}d=M(a.source.a,f);i=M(a.target.a,f);var j=a.source.a;f=a.target.a;if(ek(a.source)){d=M(d,h);j=M(j,h)}else d=M(d,e);if(ek(a.target)){i=L(i,h);f=L(f,h)}else i=L(i,e)}else{f.scale(0.5);
e=f;if(Math.abs(e.x)>0.08){f=e.x/0.08;e.x/=f;e.y/=f}if(Math.abs(e.y)>0.08){f=e.y/0.08;e.x/=f;e.y/=f}f=e;d=M(a.source.a,f);i=M(a.target.a,f);j=L(a.source.a,f);f=L(a.target.a,f);if(ek(a.source)){d=M(d,h);j=M(j,h)}if(ek(a.target)){i=L(i,h);f=L(f,h)}}a=X(b,[d,i,j,f]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.moveTo(a[2].x,a[2].y);c.lineTo(a[3].x,a[3].y)};function hk(a){return Ma(rj(a.v),function(b){return D(b.g,a)})};function ik(a,b){$j.call(this,a,ik.cd,b)}A(ik,$j);
ik.prototype.R=function(a,b,c){this.setTransform(b);var d=this.j.m("bond").stroke.width;d=new jk(d,this.j.m("bond").stroke.color);var e=dk(a),f=e+Math.PI/2;e=e-Math.PI/2;var h=this.j.m("bond")["triple-dist"];f=new Oh(1,0,0,1,Math.cos(f)*h,Math.sin(f)*h);e=new Oh(1,0,0,1,Math.cos(e)*h,Math.sin(e)*h);f=X(f,[a.source.a,a.target.a]);e=X(e,[a.source.a,a.target.a]);a=X(b,[a.source.a,a.target.a,f[0],f[1],e[0],e[1]]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.moveTo(a[2].x,a[2].y);c.lineTo(a[3].x,
a[3].y);c.moveTo(a[4].x,a[4].y);c.lineTo(a[5].x,a[5].y);this.Q.Ob(c,d,m)};function kk(a,b){$j.call(this,a,kk.cd,b)}A(kk,$j);
kk.prototype.R=function(a,b,c){this.setTransform(b);var d=this.j.m("bond").stroke.width;d=new jk(d,this.j.m("bond").stroke.color);var e=dk(a),f=e+Math.PI/2,h=e-Math.PI/2,i=this.j.m("bond")["quad-dist"],j=new Oh(1,0,0,1,Math.cos(f)*i/3,Math.sin(f)*i/3);e=new Oh(1,0,0,1,Math.cos(h)*i/3,Math.sin(h)*i/3);f=new Oh(1,0,0,1,Math.cos(f)*i,Math.sin(f)*i);h=new Oh(1,0,0,1,Math.cos(h)*i,Math.sin(h)*i);j=X(j,[a.source.a,a.target.a]);e=X(e,[a.source.a,a.target.a]);f=X(f,[a.source.a,a.target.a]);a=X(h,[a.source.a,
a.target.a]);b=X(b,[j[0],j[1],e[0],e[1],f[0],f[1],a[0],a[1]]);c.moveTo(b[0].x,b[0].y);c.lineTo(b[1].x,b[1].y);c.moveTo(b[2].x,b[2].y);c.lineTo(b[3].x,b[3].y);c.moveTo(b[4].x,b[4].y);c.lineTo(b[5].x,b[5].y);c.moveTo(b[6].x,b[6].y);c.lineTo(b[7].x,b[7].y);this.Q.Ob(c,d,m)};function lk(a,b){$j.call(this,a,lk.cd,b)}A(lk,$j);
lk.prototype.R=function(a,b,c){this.setTransform(b);var d=this.j.m("bond").stroke.width/10,e=dk(a),f=e+Math.PI/2;e=e-Math.PI/2;f=Lh(new Oh(1,0,0,1,Math.cos(f)*d,Math.sin(f)*d),[a.target.a])[0];d=Lh(new Oh(1,0,0,1,Math.cos(e)*d,Math.sin(e)*d),[a.target.a])[0];if(a.target.T!="C"){e=3*Cb(f,a.source.a);f.x=(f.x*(e-1)+a.source.a.x)/e;f.y=(f.y*(e-1)+a.source.a.y)/e;d.x=(d.x*(e-1)+a.source.a.x)/e;d.y=(d.y*(e-1)+a.source.a.y)/e}a=X(b,[a.source.a,f,d]);c.moveTo(a[0].x,a[0].y);c.lineTo(a[1].x,a[1].y);c.lineTo(a[2].x,
a[2].y)};function mk(a,b){$j.call(this,a,mk.cd,b)}A(mk,$j);
mk.prototype.R=function(a,b,c){this.setTransform(b);var d=this.j.m("bond").stroke.width/10,e=dk(a),f=e+Math.PI/2;e=e-Math.PI/2;f=new Oh(1,0,0,1,Math.cos(f)*d,Math.sin(f)*d);d=new Oh(1,0,0,1,Math.cos(e)*d,Math.sin(e)*d);f=X(f,[a.source.a,a.target.a]);d=X(d,[a.source.a,a.target.a]);b=X(b,[f[0],f[1],d[0],d[1],a.source.a]);d=0;if(a.target.T!="C")d=1;for(a=0;a<7-d;a++){c.moveTo(((7-a)*b[4].x+a*b[1].x)/7,((7-a)*b[4].y+a*b[1].y)/7);c.lineTo(((7-a)*b[4].x+a*b[3].x)/7,((7-a)*b[4].y+a*b[3].y)/7)}};function nk(){this.wi=ua()}var ok=new nk;nk.prototype.hc=ba("wi");nk.prototype.reset=function(){this.hc(ua())};nk.prototype.m=r("wi");function pk(a){this.Ck=a||"";this.Ok=ok}u=pk.prototype;u.Ei=k;u.Lk=k;u.Kk=k;u.Fi=n;u.Mk=n;function qk(a){if(a<10)return"0"+a;return String(a)}function rk(a,b){var c=(a.Ui-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;){e++;c*=10}for(;e-- >0;)d=" "+d;return d}function sk(a){pk.call(this,a)}A(sk,pk);function tk(a,b){$j.call(this,a,tk.cd,b)}A(tk,$j);
tk.prototype.R=function(a,b,c){this.setTransform(b);var d=Math.round(Cb(a.source.a,a.target.a)*12);if(d<8)d=8;this.M.log(ch,"# zigZags "+d,void 0);var e=this.j.m("bond").stroke.width/10,f=dk(a),h=f+Math.PI/2;f=f-Math.PI/2;var i=[];i.push(a.source.a);this.M.log(ch,"# coords "+i.length,void 0);for(var j=m,l=1/d,o=0,p=1;p<=d;p++){o+=l;j=p%2==0?new Oh(1,0,0,1,Math.cos(h)*e*o,Math.sin(h)*e*o):new Oh(1,0,0,1,Math.cos(f)*e*o,Math.sin(f)*e*o);j=X(j,[new K(((d-p)*a.source.a.x+a.target.a.x*p)/d,((d-p)*a.source.a.y+
a.target.a.y*p)/d)])[0];i.push(j)}a=X(b,i);c.moveTo(a[1].x,a[1].y);b=2;for(d=a.length-1;b<d;b++){c.lineTo(a[b].x,a[b].y);c.moveTo(a[b].x,a[b].y)}};function uk(a,b){this.Q=a;this.j=new he;b&&this.j.zd(b)}uk.prototype.M=hh("kemia.view.BondRendererFactory");var vk=Jb({Jj:gi,Dj:2,Nj:3,Gj:4}),wk=Jb({Ij:hi,Lj:11,Hj:13,Kj:12});u=uk.prototype;u.m=function(a){return this[vk[a.Da]].apply(this,[a.fa])};u.Jj=function(a){return this[wk[a]].apply(this)};u.Ij=function(){if(!this.Hi)this.Hi=new fk(this.Q,this.j);return this.Hi};u.Lj=function(){if(!this.Ii)this.Ii=new lk(this.Q,this.j);return this.Ii};
u.Hj=function(){if(!this.Gi)this.Gi=new mk(this.Q,this.j);return this.Gi};u.Kj=function(){if(!this.Ji)this.Ji=new tk(this.Q,this.j);return this.Ji};u.Dj=function(){if(!this.Nh)this.Nh=new gk(this.Q,this.j);return this.Nh};u.Nj=function(){if(!this.Yi)this.Yi=new ik(this.Q,this.j);return this.Yi};u.Gj=function(){if(!this.vi)this.vi=new kk(this.Q,this.j);return this.vi};function xk(a,b){Yj.call(this,a,yk,b)}A(xk,Yj);
xk.prototype.R=function(a,b,c){this.setTransform(b);var d=this.j.m("atom"),e=this.j.m(a.T)?this.j.m(a.T).color:d.color,f=b.ha;f=new zk(f/1.8>12?15:f/1.8,d.fontName);d=new jk(d.stroke.width,"black");e=new ck(e);b=X(b,[a.a])[0];var h={text:"",Ef:"center",wc:"",vd:""};if(a.T!="C"||a.zb()<1||a.Va||a.zb()==1&&this.j.m("showTerminalCarbons")){var i=di(a);if(i==0)h.text=a.T;else{var j,l=a.g.of();j=Ak(a,0);if(l>1){for(var o=1;o<l;++o)j+=Ak(a,o);j=j/l%360}j=j>350||j<=10?"E":j>10&&j<=80?"SE":j>80&&j<=100?"S":
j>100&&j<=170?"SW":j>170&&j<=190?"W":j>190&&j<=260?"NW":j>260&&j<=280?"N":"NE";l="center";if(j=="SW"||j=="W"||j=="NW"){l="right";if(i==1)h.text="H";h.text+=a.T}else{l="left";h.text=a.T+"H"}if(i>1)h.vd=String(i)}if(a.Va)if(a.Va>1)h.wc+="+"+a.Va;else if(a.Va<-1)h.wc+=a.Va;else if(a.Va==-1)h.wc="-";else if(a.Va==1)h.wc="+"}else h.text="";h.Ef=l;a=this.Q;l=h.text.length*0.55*f.size;i=f.size;if(h.text){Bk(a,h.text,b.x-l/2,b.y-i/2,l,i,h.Ef,m,f,d,e,c);if(h.Ef=="left"){if(h.vd||h.wc){j=this.j.m("subscriptSize");
h.vd&&Bk(a,h.vd,b.x+l*0.9,b.y,j,j,"center",m,f,d,e,c);h.wc&&Bk(a,h.wc,b.x+l,b.y-i*0.8,j,j,"center",m,f,d,e,c)}}else if(h.Ef=="right")if(h.vd||h.wc){j=this.j.m("subscriptSize");if(h.vd){Bk(a,"H",b.x-l*3,b.y-i/2,l,i,"center",m,f,d,e,c);Bk(a,h.vd,b.x-l*1.8,b.y,j,j,"center",m,f,d,e,c)}h.wc&&Bk(a,h.wc,b.x+l,b.y-i*0.8,j,j,"center",m,f,d,e,c)}}};
xk.prototype.ja=function(a,b,c){var d=this.j.m("atom");b||(b=this.j.m(a.T)?this.j.m(a.T).color:d.color);b=new ck(b,0.3);d=d.highlight.radius*this.transform.ha;a=X(this.transform,[a.a])[0];c||(c=this.Q.lc());this.Q.gf(a.x,a.y,d,d,m,b,c);return c};function Ak(a,b){if(a.g.L().length==0)return 0;var c=a.g.L()[b],d=c.target.a,e=c.source.a,f=d.y-e.y;d=d.x-e.x;if(a==c.source){d=-d;f=-f}c=Math.atan2(f,d)*180/Math.PI;if(c<0)c=360+c;return c}xk.prototype.M=hh("kemia.view.AtomRenderer");
var yk={atom:{color:"#FF9999",diameter:0.05,highlight:{radius:0.3},stroke:{width:0.15},fontName:"Arial"},showTerminalCarbons:k,margin:20,subscriptSize:5,N:{color:"blue"},O:{color:"red"},S:{color:"yellow"},P:{color:"orange"},Cl:{color:"green"},F:{color:"green"},Br:{color:"DarkRed"},I:{color:"purple"},C:{color:"black"},R1:{color:"black"},R2:{color:"black"},H:{color:"white"}};function Ck(a,b){$j.call(this,a,Ck.cd,b)}A(Ck,$j);Ck.prototype.R=function(a,b){this.setTransform(b);var c=this.j.m("bond").stroke.width;c=new jk(c,this.j.m("bond").stroke.color);var d=new bk,e=Lh(this.transform,[a.va()])[0],f=X(this.transform,[a.e[0].a])[0];f=Cb(e,f)*0.5;d.moveTo(e.x+f,e.y);d.arcTo(f,f,0,180);d.moveTo(e.x+f,e.y);d.arcTo(f,f,0,-180);this.Q.Ob(d,c,m)};function Dk(a,b){Yj.call(this,a,Ek,b);this.Ke=1;this.Bd=new uk(a,this.j);this.xb=new xk(a,this.j);this.sj=new Ck(a,this.j)}A(Dk,Yj);Dk.prototype.M=hh("kemia.view.MoleculeRenderer");Dk.prototype.be=ba("Ke");
Dk.prototype.R=function(a,b){a.Lf=k;a.bb=this.Q.lc();var c=C(a.e,function(h){return h.a});c=id.apply(m,c);if(!b){var d=this.j.m("margin");b=Zj(this,c.expand(d,d,d,d))}this.setTransform(b);X(this.transform,[new K((c.left+c.right)/2,(c.top+c.bottom)/2)]);c=new jk(this.j.m("bond").stroke.width,this.j.m("bond").stroke.color);d=new ck(this.j.m("bond").fill.color);if(a.g.length){var e=new bk;B(a.g,function(h){this.Bd.m(h).R(h,b,e)},this);this.Q.Ob(e,c,d,a.bb);var f=this.sj;B(rj(a),function(h){Ia(h.g,function(i){return i.ac}).length==
h.g.length&&f.R(h,b)})}B(a.e,function(h){this.xb.R(h,b,a.bb)},this)};Dk.prototype.ja=function(a,b,c){b||(b=this.j.m("highlight").color);c||(c=this.Q.lc());B(a.g,function(d){this.Bd.m(d).ja(d,b,c)},this);B(a.e,function(d){this.xb.ja(d,b,c)},this);return c};var Ek={bond:{stroke:{width:2,color:"black"},fill:{color:"black"}},highlight:{radius:0.3,color:"blue"}};function bk(){this.Za=[];this.da=[];this.Kb=[]}bk.prototype.kc=m;bk.prototype.$a=m;bk.prototype.td=k;var Fk=[];Fk[0]=2;Fk[1]=2;Fk[2]=6;Fk[3]=6;Fk[4]=0;u=bk.prototype;u.clear=function(){this.Za.length=0;this.da.length=0;this.Kb.length=0;delete this.kc;delete this.$a;delete this.td;return this};u.moveTo=function(a,b){if(this.Za[this.Za.length-1]==0)this.Kb.length-=2;else{this.Za.push(0);this.da.push(1)}this.Kb.push(a,b);this.$a=this.kc=[a,b];return this};
u.lineTo=function(){var a=this.Za[this.Za.length-1];if(a==m)g(Error("Path cannot start with lineTo"));if(a!=1){this.Za.push(1);this.da.push(0)}for(a=0;a<arguments.length;a+=2){var b=arguments[a],c=arguments[a+1];this.Kb.push(b,c)}this.da[this.da.length-1]+=a/2;this.$a=[b,c];return this};
u.Jh=function(){var a=this.Za[this.Za.length-1];if(a==m)g(Error("Path cannot start with curve"));if(a!=2){this.Za.push(2);this.da.push(0)}for(a=0;a<arguments.length;a+=6){var b=arguments[a+4],c=arguments[a+5];this.Kb.push(arguments[a],arguments[a+1],arguments[a+2],arguments[a+3],b,c)}this.da[this.da.length-1]+=a/6;this.$a=[b,c];return this};u.close=function(){var a=this.Za[this.Za.length-1];if(a==m)g(Error("Path cannot start with close"));if(a!=4){this.Za.push(4);this.da.push(1);this.$a=this.kc}return this};
u.arcTo=function(a,b,c,d){var e=this.$a[0]-a*Math.cos(N(c))+a*Math.cos(N(c+d)),f=this.$a[1]-b*Math.sin(N(c))+b*Math.sin(N(c+d));this.Za.push(3);this.da.push(1);this.Kb.push(a,b,c,d,e,f);this.td=n;this.$a=[e,f];return this};
u.rj=function(a,b,c,d){var e=this.$a[0]-a*Math.cos(N(c)),f=this.$a[1]-b*Math.sin(N(c)),h=N(d);d=Math.ceil(Math.abs(h)/Math.PI*2);h=h/d;c=N(c);for(var i=0;i<d;i++){var j=Math.cos(c),l=Math.sin(c),o=4/3*Math.sin(h/2)/(1+Math.cos(h/2)),p=e+(j-o*l)*a,q=f+(l+o*j)*b;c+=h;j=Math.cos(c);l=Math.sin(c);this.Jh(p,q,e+(j+o*l)*a,f+(l-o*j)*b,e+j*a,f+l*b)}return this};function Gk(a,b){for(var c=a.Kb,d=0,e=0,f=a.Za.length;e<f;e++){var h=a.Za[e],i=Fk[h]*a.da[e];b(h,c.slice(d,d+i));d+=i}}
u.la=function(){var a=new this.constructor;a.Za=this.Za.concat();a.da=this.da.concat();a.Kb=this.Kb.concat();a.kc=this.kc&&this.kc.concat();a.$a=this.$a&&this.$a.concat();a.td=this.td;return a};var Hk={};Hk[0]=bk.prototype.moveTo;Hk[1]=bk.prototype.lineTo;Hk[4]=bk.prototype.close;Hk[2]=bk.prototype.Jh;Hk[3]=bk.prototype.rj;function Ik(a){if(a.td)return a.la();var b=new bk;Gk(a,function(c,d){Hk[c].apply(b,d)});return b}
bk.prototype.transform=function(a){if(!this.td)g(Error("Non-simple path"));a.transform(this.Kb,0,this.Kb,0,this.Kb.length/2);this.kc&&a.transform(this.kc,0,this.kc,0,1);this.$a&&this.kc!=this.$a&&a.transform(this.$a,0,this.$a,0,1);return this};function Jk(a,b,c,d,e){Gd.call(this,e);this.width=a;this.height=b;this.cc=c||m;this.ke=d||m}A(Jk,Gd);u=Jk.prototype;u.ua=m;u.Nc=0;u.bd=0;function Kk(a){return a.cc?new Db(a.cc,a.ke):a.vb()}u.fd=function(){return this.vb()};u.vb=function(){if(this.$)return wd(this.f());if(ka(this.width)&&ka(this.height))return new Db(this.width,this.height);return m};function Lk(a){var b=a.vb();return b?b.width/Kk(a).width:0}
function Bk(a,b,c,d,e,f,h,i,j,l,o,p){var q=j.size/2;d=i=="bottom"?d+f-q:i=="center"?d+f/2:d+q;return a.ne(b,c,d,c+e,d,h,j,l,o,p)};function Mk(a,b){this.q=a;this.Wa=b;this.ng=n}A(Mk,ad);u=Mk.prototype;u.Wa=m;u.q=m;u.ph=m;u.f=r("q");function Qh(a,b,c,d,e,f){a.ph=Nh(new oj,N(d),e,f).translate(b,c);a.Wa.gh(a,b,c,d,e,f)}u.addEventListener=function(a,b,c,d){Sc(this.q,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Uc(this.q,a,b,c,d)};u.p=function(){Mk.h.p.call(this);Yc(this.q)};function Nk(a,b,c,d){Mk.call(this,a,b);this.Ci(c);this.zi(d)}A(Nk,Mk);u=Nk.prototype;u.fill=m;u.oh=m;u.zi=function(a){this.fill=a;this.Wa.eh(this,a)};u.Ej=r("fill");u.Ci=function(a){this.oh=a;this.Wa.fh(this,a)};u.Mj=r("oh");function Ok(a,b,c,d){Nk.call(this,a,b,c,d)}A(Ok,Nk);function Pk(a,b){Mk.call(this,a,b)}A(Pk,Mk);function Qk(a,b){Mk.call(this,a,b)}A(Qk,Mk);function Rk(a,b,c,d){Nk.call(this,a,b,c,d)}A(Rk,Nk);function Sk(a,b,c,d){Nk.call(this,a,b,c,d)}A(Sk,Nk);function Tk(a,b,c,d){Nk.call(this,a,b,c,d)}A(Tk,Nk);function Uk(a){Mk.call(this,m,a);this.na=[]}A(Uk,Pk);Uk.prototype.clear=function(){if(this.na.length){this.na.length=0;Vk(this.Wa)}};Uk.prototype.Gb=aa();Uk.prototype.appendChild=function(a){this.na.push(a)};Uk.prototype.dc=function(){for(var a=0,b=this.na.length;a<b;a++)Wk(this.Wa,this.na[a])};
function Xk(a,b,c,d,e,f,h,i){Nk.call(this,a,b,h,i);this.xj=c;this.yj=d;this.xi=e;this.yi=f;this.pd=new bk;this.pd.clear();this.pd.moveTo(this.xj+this.xi*Math.cos(N(0)),this.yj+this.yi*Math.sin(N(0)));this.pd.arcTo(this.xi,this.yi,0,360);this.pd.close();this.yk=new Yk(m,b,this.pd,h,i)}A(Xk,Ok);Xk.prototype.dc=function(a){this.yk.dc(a)};function Zk(a,b,c,d,e,f,h,i){Nk.call(this,a,b,h,i);this.de=c;this.fe=d;this.xd=e;this.gd=f}A(Zk,Sk);Zk.prototype.Pc=n;
Zk.prototype.Gb=function(a,b){this.xd=a;this.gd=b;this.Pc&&Vk(this.Wa)};Zk.prototype.dc=function(a){this.Pc=k;a.beginPath();a.moveTo(this.de,this.fe);a.lineTo(this.de,this.fe+this.gd);a.lineTo(this.de+this.xd,this.fe+this.gd);a.lineTo(this.de+this.xd,this.fe);a.closePath()};function Yk(a,b,c,d,e){Nk.call(this,a,b,d,e);this.ih(c)}A(Yk,Rk);Yk.prototype.Pc=n;Yk.prototype.ih=function(a){this.pd=a.td?a:Ik(a);this.Pc&&Vk(this.Wa)};
Yk.prototype.dc=function(a){this.Pc=k;a.beginPath();Gk(this.pd,function(b,c){switch(b){case 0:a.moveTo(c[0],c[1]);break;case 1:for(var d=0;d<c.length;d+=2)a.lineTo(c[d],c[d+1]);break;case 2:for(d=0;d<c.length;d+=6)a.bezierCurveTo(c[d],c[d+1],c[d+2],c[d+3],c[d+4],c[d+5]);break;case 3:g(Error("Canvas paths cannot contain arcs"));case 4:a.closePath()}})};
function $k(a,b,c,d,e,f,h,i,j,l){Nk.call(this,m,a,j,l);this.Qi=b;this.bj=c;this.Uk=d;this.cj=e;this.Vk=f;this.lj=h||"left";this.Cj=i;this.q=Xb("DIV",{style:"display:table;position:absolute;padding:0;margin:0;border:0"});this.yf=Xb("DIV",{style:"display:table-cell;padding: 0;margin: 0;border: 0"});c=this.bj;i=this.cj;d=this.Uk;e=this.Vk;j=this.lj;f=this.Cj;b=this.q.style;h=Lk(this.Wa);l=this.Wa;var o=l.vb();l=o?o.height/Kk(l).height:0;if(c==i){b.lineHeight="90%";this.yf.style.verticalAlign=j=="center"?
"middle":j=="left"?d<e?"top":"bottom":d<e?"bottom":"top";b.textAlign="center";i=f.size*h;b.top=Math.round(Math.min(d,e)*l)+"px";b.left=Math.round((c-i/2)*h)+"px";b.width=Math.round(i)+"px";b.height=Math.abs(d-e)*l+"px";b.fontSize=f.size*0.6*l+"pt"}else{b.lineHeight="100%";this.yf.style.verticalAlign="top";b.textAlign=j;b.top=Math.round(((d+e)/2-f.size*2/3)*l)+"px";b.left=Math.round(c*h)+"px";b.width=Math.round(Math.abs(i-c)*h)+"px";b.height="auto";b.fontSize=f.size*l+"pt"}b.fontWeight=f.bold?"bold":
"normal";b.fontStyle=f.Og?"italic":"normal";b.fontFamily=f.vg;c=this.fill;b.color=c.yb||c.Ph();this.yf.innerHTML=this.bj==this.cj?C(this.Qi.split(""),wa).join("<br>"):wa(this.Qi);a.f().appendChild(this.q);this.q.appendChild(this.yf)}A($k,Tk);$k.prototype.zi=function(a){this.fill=a;if(this.q)this.q.style.color=a.yb||a.Ph()};$k.prototype.Ci=aa();$k.prototype.dc=aa();function al(a,b,c,d,e,f,h){Mk.call(this,a,b);this.de=c;this.fe=d;this.xd=e;this.gd=f;this.Nk=h}A(al,Qk);al.prototype.Pc=n;
al.prototype.Gb=function(a,b){this.xd=a;this.gd=b;this.Pc&&Vk(this.Wa)};al.prototype.dc=function(a){if(this.ai){this.xd&&this.gd&&a.drawImage(this.ai,this.de,this.fe,this.xd,this.gd);this.Pc=k}else{a=new Image;a.onload=sa(this.Vj,this,a);a.src=this.Nk}};al.prototype.Vj=function(a){this.ai=a;Vk(this.Wa)};function zk(a,b){this.size=a;this.vg=b}zk.prototype.bold=n;zk.prototype.Og=n;function bl(){};function ck(a,b){this.yb=a;this.ze=b||1}A(ck,bl);function jk(a,b){this.th=a;this.yb=b};function cl(a,b,c,d,e){Jk.call(this,a,b,c,d,e)}A(cl,Jk);u=cl.prototype;u.eh=function(){Vk(this)};u.fh=function(){Vk(this)};u.gh=function(){Vk(this)};function dl(a,b){var c=a.getContext();c.save();var d=b.ph?b.ph.la():new oj,e=d.gb,f=d.hb;if(e||f)c.translate(e,f);(d=d.xa)&&c.rotate(Math.asin(d))}u.i=function(){var a=this.Ab.i("div",{style:"position:relative;overflow:hidden"});this.q=a;this.ie=this.Ab.i("canvas");a.appendChild(this.ie);this.Qg=this.ua=new Uk(this);this.Dk=0;el(this)};
u.getContext=function(){this.f()||this.i();if(!this.Ed){this.Ed=this.ie.getContext("2d");this.Ed.save()}return this.Ed};u.Gb=function(a,b){this.width=a;this.height=b;el(this);Vk(this)};u.vb=function(){var a=this.width,b=this.height,c=y(a)&&a.indexOf("%")!=-1,d=y(b)&&b.indexOf("%")!=-1;if(!this.$&&(c||d))return m;var e,f;if(c){e=this.f().parentNode;f=wd(e);a=parseFloat(a)*f.width/100}if(d){e=e||this.f().parentNode;f=f||wd(e);b=parseFloat(b)*f.height/100}return new Db(a,b)};
function el(a){vd(a.f(),a.width,a.height);var b=a.vb();if(b){vd(a.ie,b.width,b.height);a.ie.width=b.width;a.ie.height=b.height;a.Ed=m}}u.reset=function(){var a=this.getContext();a.restore();var b=this.vb();b.width&&b.height&&a.clearRect(0,0,b.width,b.height);a.save()};u.clear=function(){this.reset();this.ua.clear();for(var a=this.f();a.childNodes.length>1;)a.removeChild(a.lastChild)};
function Vk(a){if(a.cm)a.am=k;else if(a.$){a.reset();if(a.cc){var b=a.vb();a.getContext().scale(b.width/a.cc,b.height/a.ke)}if(a.Nc||a.bd)a.getContext().translate(-a.Nc,-a.bd);dl(a,a.ua);a.ua.dc(a.Ed);a.getContext().restore()}}
function Wk(a,b){if(!(b instanceof $k)){var c=a.getContext();dl(a,b);if(!b.Ej||!b.Mj)b.dc(c);else{var d=b.fill;if(d)if(d instanceof ck){if(d.ze!=0){c.globalAlpha=d.ze;c.fillStyle=d.yb;b.dc(c);c.fill();c.globalAlpha=1}}else{var e=c.createLinearGradient(d.wl(),d.yl(),d.xl(),d.zl());e.addColorStop(0,d.Ph());e.addColorStop(1,d.vl());c.fillStyle=e;b.dc(c);c.fill()}if(d=b.oh){b.dc(c);c.strokeStyle=d.yb;d=d.th;if(y(d)&&d.indexOf("px")!=-1)d=parseFloat(d)/Lk(a);c.lineWidth=d;c.stroke()}}a.getContext().restore()}}
u.Sa=function(a,b){b=b||this.ua;b.appendChild(a);this.$&&!this.Dk&&!(b!=this.ua&&b!=this.Qg)&&Wk(this,a)};u.gf=function(a,b,c,d,e,f,h){a=new Xk(m,this,a,b,c,d,e,f);this.Sa(a,h);return a};u.sg=function(a,b,c,d,e,f,h){a=new Zk(m,this,a,b,c,d,e,f);this.Sa(a,h);return a};u.drawImage=function(a,b,c,d,e,f){a=new al(m,this,a,b,c,d,e);this.Sa(a,f);return a};u.ne=function(a,b,c,d,e,f,h,i,j,l){a=new $k(this,a,b,c,d,e,f,h,i,j);this.Sa(a,l);return a};
u.Ob=function(a,b,c,d){a=new Yk(m,this,a,b,c);this.Sa(a,d);return a};u.lc=function(a){var b=new Uk(this);a=a||this.ua;if(a==this.ua||a==this.Qg)this.Qg=b;this.Sa(b,a);return b};u.p=function(){this.Ed=m;cl.h.p.call(this)};u.qa=function(){var a=this.vb();cl.h.qa.call(this);if(!a){el(this);this.dispatchEvent("resize")}Vk(this)};function fl(a,b){Mk.call(this,a,b)}A(fl,Pk);fl.prototype.clear=function(){ac(this.f())};fl.prototype.Gb=function(a,b){gl(this.Wa,this.f(),{width:a,height:b})};function hl(a,b,c,d){Nk.call(this,a,b,c,d)}A(hl,Ok);function il(a,b,c,d){Nk.call(this,a,b,c,d)}A(il,Sk);il.prototype.Gb=function(a,b){gl(this.Wa,this.f(),{width:a,height:b})};function jl(a,b,c,d){Nk.call(this,a,b,c,d)}A(jl,Rk);jl.prototype.ih=function(a){gl(this.Wa,this.f(),{d:kl(a)})};function ll(a,b,c,d){Nk.call(this,a,b,c,d)}A(ll,Tk);
function ml(a,b){Mk.call(this,a,b)}A(ml,Qk);ml.prototype.Gb=function(a,b){gl(this.Wa,this.f(),{width:a,height:b})};function nl(a,b,c,d,e){Jk.call(this,a,b,c,d,e);this.Kh={};this.rh=G&&!I(526);this.Cb=new fd(this)}var ol;A(nl,Jk);function pl(a,b,c){b=a.Ab.ba.createElementNS("http://www.w3.org/2000/svg",b);c&&gl(a,b,c);return b}function gl(a,b,c){for(var d in c)b.setAttribute(d,c[d])}u=nl.prototype;u.Sa=function(a,b){(b||this.ua).f().appendChild(a.f())};u.eh=function(a,b){var c=a.f();if(b instanceof ck){c.setAttribute("fill",b.yb);c.setAttribute("fill-opacity",b.ze)}else c.setAttribute("fill","none")};
u.fh=function(a,b){var c=a.f();if(b){c.setAttribute("stroke",b.yb);var d=b.th;y(d)&&d.indexOf("px")!=-1?c.setAttribute("stroke-width",parseFloat(d)/Lk(this)):c.setAttribute("stroke-width",d)}else c.setAttribute("stroke","none")};u.gh=function(a,b,c,d,e,f){a.f().setAttribute("transform","translate("+b+","+c+") rotate("+d+" "+e+" "+f+")")};
u.i=function(){var a=pl(this,"svg",{width:this.width,height:this.height,overflow:"hidden"}),b=pl(this,"g");this.og=pl(this,"defs");this.ua=new fl(b,this);a.appendChild(this.og);a.appendChild(b);this.q=a;if(this.cc||this.Nc||this.bd){this.f().setAttribute("preserveAspectRatio","none");this.rh?this.Wf():this.f().setAttribute("viewBox",this.Nc+" "+this.bd+" "+(this.cc?this.cc+" "+this.ke:""))}};
u.Wf=function(){if(this.$&&(this.cc||this.Nc||!this.bd)){var a=this.vb();if(a.width==0)this.f().style.visibility="hidden";else{this.f().style.visibility="";var b=-this.Nc,c=-this.bd,d=a.width/this.cc;a=a.height/this.ke;this.ua.f().setAttribute("transform","scale("+d+" "+a+") translate("+b+" "+c+")")}}};u.Gb=aa();
u.vb=function(){if(!F)return this.$?wd(this.f()):nl.h.vb.call(this);var a=this.width,b=this.height,c=y(a)&&a.indexOf("%")!=-1,d=y(b)&&b.indexOf("%")!=-1;if(!this.$&&(c||d))return m;var e,f;if(c){e=this.f().parentNode;f=wd(e);a=parseFloat(a)*f.width/100}if(d){e=e||this.f().parentNode;f=f||wd(e);b=parseFloat(b)*f.height/100}return new Db(a,b)};u.clear=function(){this.ua.clear();ac(this.og);this.Kh={}};
u.gf=function(a,b,c,d,e,f,h){a=pl(this,"ellipse",{cx:a,cy:b,rx:c,ry:d});e=new hl(a,this,e,f);this.Sa(e,h);return e};u.sg=function(a,b,c,d,e,f,h){a=pl(this,"rect",{x:a,y:b,width:c,height:d});e=new il(a,this,e,f);this.Sa(e,h);return e};u.drawImage=function(a,b,c,d,e,f){a=pl(this,"image",{x:a,y:b,width:c,height:d,"image-rendering":"optimizeQuality",preserveAspectRatio:"none"});a.setAttributeNS("http://www.w3.org/1999/xlink","href",e);e=new ml(a,this);this.Sa(e,f);return e};
u.ne=function(a,b,c,d,e,f,h,i,j,l){var o=Math.round(cg(b,c,d,e));d=d-b;e=e-c;e=Math.round(Math.sqrt(d*d+e*e));var p=h.size;d={"font-family":h.vg,"font-size":p};p=Math.round(c-p/2+Math.round(p*0.85));var q=b;if(f=="center"){q+=Math.round(e/2);d["text-anchor"]="middle"}else if(f=="right"){q+=e;d["text-anchor"]="end"}d.x=q;d.y=p;if(h.bold)d["font-weight"]="bold";if(h.Og)d["font-style"]="italic";if(o!=0)d.transform="rotate("+o+" "+b+" "+c+")";b=pl(this,"text",d);b.appendChild(this.Ab.ba.createTextNode(a));
if(i==m&&F&&db){a="black";if(j instanceof ck)a=j.yb;i=new jk(1,a)}j=new ll(b,this,i,j);this.Sa(j,l);return j};u.Ob=function(a,b,c,d){a=pl(this,"path",{d:kl(a)});b=new jl(a,this,b,c);this.Sa(b,d);return b};
function kl(a){var b=[];Gk(a,function(c,d){switch(c){case 0:b.push("M");Array.prototype.push.apply(b,d);break;case 1:b.push("L");Array.prototype.push.apply(b,d);break;case 2:b.push("C");Array.prototype.push.apply(b,d);break;case 3:var e=d[3];b.push("A",d[0],d[1],0,Math.abs(e)>180?1:0,e>0?1:0,d[4],d[5]);break;case 4:b.push("Z")}});return b.join(" ")}u.lc=function(a){var b=pl(this,"g");(a||this.ua).f().appendChild(b);return new fl(b,this)};
u.qa=function(){var a=this.vb();nl.h.qa.call(this);a||this.dispatchEvent("resize");if(this.rh){a=this.width;var b=this.height;typeof a=="string"&&a.indexOf("%")!=-1&&typeof b=="string"&&b.indexOf("%")!=-1&&this.Cb.u(ql(),dd,this.Wf);this.Wf()}};u.ub=function(){nl.h.ub.call(this);this.rh&&this.Cb.jb(ql(),dd,this.Wf)};u.p=function(){delete this.Kh;delete this.og;delete this.ua;nl.h.p.call(this)};function ql(){if(!ol){ol=new bd(400);ol.start()}return ol};function rl(){return this.q=this.Wa.Ab.f(this.Eb)||this.q}function sl(a,b){this.Eb=a.id;Mk.call(this,a,b)}A(sl,Pk);sl.prototype.f=rl;sl.prototype.clear=function(){ac(this.f())};sl.prototype.Gb=function(a,b){var c=this.f(),d=c.style;d.width=Z(a)+"px";d.height=Z(b)+"px";c.coordsize=Z(a)+" "+Z(b);if(this.Wa.ua!=this)c.coordorigin="0 0"};function tl(a,b,c,d,e,f,h,i){this.Eb=a.id;Nk.call(this,a,b,h,i);this.pl=c;this.ql=d;this.em=e;this.fm=f}A(tl,Ok);tl.prototype.f=rl;
function ul(a,b,c,d){this.Eb=a.id;Nk.call(this,a,b,c,d)}A(ul,Sk);ul.prototype.f=rl;ul.prototype.Gb=function(a,b){var c=this.f().style;c.width=Z(a)+"px";c.height=Z(b)+"px"};function vl(a,b,c,d){this.Eb=a.id;Nk.call(this,a,b,c,d)}A(vl,Rk);vl.prototype.f=rl;vl.prototype.ih=function(a){wl(this.f(),"path",xl(a))};function yl(a,b,c,d){this.Eb=a.id;Nk.call(this,a,b,c,d)}A(yl,Tk);yl.prototype.f=rl;function zl(a,b){this.Eb=a.id;Mk.call(this,a,b)}A(zl,Qk);zl.prototype.f=rl;
zl.prototype.Gb=function(a,b){var c=this.f().style;c.width=Al(a)+"px";c.height=Al(b)+"px"};function Bl(a,b,c,d,e){Jk.call(this,a,b,c,d,e);this.Cb=new fd(this)}A(Bl,Jk);var Cl=document.documentMode&&document.documentMode>=8;function Dl(a){var b;if(b=y(a)){b=a.length-1;b=b>=0&&a.indexOf("%",b)==b}return b?a:parseFloat(a.toString())+"px"}function Al(a){return Math.round((parseFloat(a.toString())-0.5)*100)}function Z(a){return Math.round(parseFloat(a.toString())*100)}function wl(a,b,c){if(Cl)a[b]=c;else a.setAttribute(b,c)}
function El(a,b){var c=a.Ab.createElement("g_vml_:"+b);c.id="goog_"+Ea++;return c}function Fl(a){if(Cl&&a.$)a.f().innerHTML=a.f().innerHTML}Bl.prototype.Sa=function(a,b){(b||this.ua).f().appendChild(a.f());Fl(this)};
Bl.prototype.eh=function(a,b){var c=a.f();c.fillcolor="";for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];e.tagName=="fill"&&c.removeChild(e)}if(b instanceof ck)if(b.yb=="transparent")c.filled=n;else if(b.ze!=1){c.filled=k;d=El(this,"fill");d.opacity=Math.round(b.ze*100)+"%";d.color=b.yb;c.appendChild(d)}else{c.filled=k;c.fillcolor=b.yb}else c.filled=n;Fl(this)};
Bl.prototype.fh=function(a,b){var c=a.f();if(b){c.stroked=k;var d=b.th;if(y(d)&&d.indexOf("px")==-1)d=parseFloat(d);else d*=Lk(this);var e=c.getElementsByTagName("stroke")[0];if(d<1){e=e||El(this,"stroke");e.opacity=d;e.im="1px";e.color=b.yb;c.appendChild(e)}else{e&&c.removeChild(e);c.strokecolor=b.yb;c.strokeweight=d+"px"}}else c.stroked=n;Fl(this)};
Bl.prototype.gh=function(a,b,c,d,e,f){a=a.f();a.style.left=Al(b)+"px";a.style.top=Al(c)+"px";if(d||a.rotation){a.rotation=d;a.coordsize=Z(e*2)+" "+Z(f*2)}};function Gl(a,b,c,d,e){var f=a.style;f.position="absolute";f.left=Al(b)+"px";f.top=Al(c)+"px";f.width=Z(d)+"px";f.height=Z(e)+"px";if(a.tagName=="shape")a.coordsize=Z(d)+" "+Z(e)}function Hl(a,b){var c=El(a,b),d=Kk(a);Gl(c,0,0,d.width,d.height);return c}try{eval("document.namespaces")}catch(Il){}u=Bl.prototype;
u.i=function(){var a=this.Ab.ba;if(!a.namespaces.g_vml_){Cl?a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"):a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml");a.createStyleSheet().cssText="g_vml_\\:*{behavior:url(#default#VML)}"}a=this.width;var b=this.height,c=this.Ab.i("div",{style:"overflow:hidden;position:relative;width:"+Dl(a)+";height:"+Dl(b)});this.q=c;var d=El(this,"group"),e=d.style;e.position="absolute";e.left=e.top=0;e.width=this.width;e.height=this.height;
d.coordsize=this.cc?Z(this.cc)+" "+Z(this.ke):Z(a)+" "+Z(b);d.coordorigin=this.Nc!==undefined?Z(this.Nc)+" "+Z(this.bd):"0 0";c.appendChild(d);this.ua=new sl(d,this);Sc(c,"resize",sa(this.Cg,this))};u.Cg=function(){var a=wd(this.f()),b=this.ua.f().style;if(a.width){b.width=a.width+"px";b.height=a.height+"px"}else{for(a=this.f();a&&a.currentStyle&&a.currentStyle.display!="none";)a=a.parentNode;a&&a.currentStyle&&this.Cb.u(a,"propertychange",this.Cg)}this.dispatchEvent("resize")};u.Gb=aa();
u.vb=function(){var a=this.f();return new Db(a.style.pixelWidth||a.offsetWidth||1,a.style.pixelHeight||a.offsetHeight||1)};u.clear=function(){this.ua.clear()};u.gf=function(a,b,c,d,e,f,h){var i=El(this,"oval");Gl(i,a-c,b-d,c*2,d*2);a=new tl(i,this,a,b,c,d,e,f);this.Sa(a,h);return a};u.sg=function(a,b,c,d,e,f,h){var i=El(this,"rect");Gl(i,a,b,c,d);a=new ul(i,this,e,f);this.Sa(a,h);return a};
u.drawImage=function(a,b,c,d,e,f){var h=El(this,"image");Gl(h,a,b,c,d);wl(h,"src",e);a=new zl(h,this);this.Sa(a,f);return a};
u.ne=function(a,b,c,d,e,f,h,i,j,l){var o=Hl(this,"shape"),p=El(this,"path");wl(p,"v","M"+Al(b)+","+Al(c)+"L"+Al(d)+","+Al(e)+"E");wl(p,"textpathok","true");b=El(this,"textpath");b.setAttribute("on","true");c=b.style;c.fontSize=h.size*Lk(this);c.fontFamily=h.vg;if(f!=m)c["v-text-align"]=f;if(h.bold)c.fontWeight="bold";if(h.Og)c.fontStyle="italic";wl(b,"string",a);o.appendChild(p);o.appendChild(b);a=new yl(o,this,i,j);this.Sa(a,l);return a};
u.Ob=function(a,b,c,d){var e=Hl(this,"shape");wl(e,"path",xl(a));a=new vl(e,this,b,c);this.Sa(a,d);return a};
function xl(a){var b=[];Gk(a,function(c,d){switch(c){case 0:b.push("m");Array.prototype.push.apply(b,C(d,Z));break;case 1:b.push("l");Array.prototype.push.apply(b,C(d,Z));break;case 2:b.push("c");Array.prototype.push.apply(b,C(d,Z));break;case 4:b.push("x");break;case 3:var e=d[2]+d[3];b.push("ae",Z(d[4]-d[0]*Math.cos(N(e))),Z(d[5]-d[1]*Math.sin(N(e))),Z(d[0]),Z(d[1]),Math.round(d[2]*-65536),Math.round(d[3]*-65536))}});return b.join(" ")}
u.lc=function(a){var b=Hl(this,"group");(a||this.ua).f().appendChild(b);return new sl(b,this)};u.qa=function(){Bl.h.qa.call(this);this.Cg();Fl(this)};u.p=function(){this.ua=m;Bl.h.p.call(this)};function Jl(a,b){Yj.call(this,a,Kl,b)}A(Jl,Yj);
Jl.prototype.R=function(a,b){this.setTransform(b);a.bb=this.Q.lc();var c=this.j.m("arrow").height,d=Cb(a.target,a.source),e=cg(a.source.x,a.source.y,a.target.x,a.target.y),f=bg(e+90),h=bg(e-90),i=new K((a.source.x+a.target.x)/2,(a.source.y+a.target.y)/2),j=new K(i.x,i.y+c),l=new K(i.x,i.y-c),o=new K(i.x-d/2,i.y),p=new K(i.x+d/2,i.y),q=new K(p.x-c,p.y+c/2),t=new K(p.x-c,p.y-c/2);c=new bk;d=new jk(this.j.m("arrow").stroke.width,this.j.m("arrow").stroke.color);var v=new jk(this.j.m("arrow").font.stroke.width,
this.j.m("arrow").font.stroke.color),x=new ck(this.j.m("arrow").font.stroke.color),H=b.ha,J=H/1.8>12?15:H/1.8;H=new zk(J,this.j.m("arrow").font.name);e=Nh(new Oh,N(e),i.x,i.y);i=e.ha;var ia=e.xa;e.ha=b.ha*i+b.Aa*ia;e.xa=b.xa*i+b.sa*ia;i=e.Aa;ia=e.sa;e.Aa=b.ha*i+b.Aa*ia;e.sa=b.xa*i+b.sa*ia;i=e.gb;ia=e.hb;e.gb=b.ha*i+b.Aa*ia+b.gb;e.hb=b.xa*i+b.sa*ia+b.hb;j=X(e,[o,p,q,t,j,l]);c.moveTo(j[0].x,j[0].y);c.lineTo(j[1].x,j[1].y);c.lineTo(j[2].x,j[2].y);c.moveTo(j[1].x,j[1].y);c.lineTo(j[3].x,j[3].y);l=N(f);
f=N(h);h=M(new K(J*Math.cos(l),-J*Math.sin(l)),j[0]);l=M(new K(J*Math.cos(l),-J*Math.sin(l)),j[1]);o=M(new K(J*Math.cos(f),-J*Math.sin(f)),j[0]);J=M(new K(J*Math.cos(f),-J*Math.sin(f)),j[1]);this.Q.ne(a.Yg,h.x,h.y,l.x,l.y,"center",H,v,x,a.bb);this.Q.ne(a.jg,o.x,o.y,J.x,J.y,"center",H,v,x,a.bb);this.Q.Ob(c,d,m,a.bb)};
Jl.prototype.ja=function(a,b,c){b||(b=this.j.m("arrow").highlight.color);c||(c=this.Q.lc());var d=cg(a.source.x,a.source.y,a.target.x,a.target.y),e=N(bg(d+90));d=N(bg(d-90));var f=this.transform.ha,h=this.j.m("arrow").highlight.radius*f;a=X(this.transform,[a.source,a.target]);f=M(new K(h*Math.cos(e),-h*Math.sin(e)),a[0]);var i=M(new K(h*Math.cos(e),-h*Math.sin(e)),a[1]);e=M(new K(h*Math.cos(d),-h*Math.sin(d)),a[0]);d=M(new K(h*Math.cos(d),-h*Math.sin(d)),a[1]);h=new bk;h.moveTo(a[0].x,a[0].y);h.lineTo(f.x,
f.y);h.lineTo(i.x,i.y);h.lineTo(a[1].x,a[1].y);h.close();b=new ck(b,0.15);this.Q.Ob(h,m,b,c);f=new bk;f.moveTo(a[0].x,a[0].y);f.lineTo(e.x,e.y);f.lineTo(d.x,d.y);f.lineTo(a[1].x,a[1].y);f.close();this.Q.Ob(f,m,b,c);return c};Jl.prototype.M=hh("kemia.view.ArrowRenderer");var Kl={arrow:{height:0.5,stroke:{width:2,color:"black"},fill:{color:"black"},font:{name:"Arial",stroke:{width:0.1,color:"grey"}},highlight:{radius:0.75,color:"grey"}}};function Ll(a,b){Yj.call(this,a,Ml,b)}A(Ll,Yj);Ll.prototype.R=function(a,b){this.setTransform(b);a.bb=this.Q.lc();var c=a.a,d=this.j.m("plus").size,e=new K(c.x,c.y-d),f=new K(c.x,c.y+d),h=new K(c.x-d,c.y),i=new K(c.x+d,c.y);c=new bk;d=new jk(this.j.m("plus").stroke.width,this.j.m("plus").stroke.color);e=X(b,[e,f,h,i]);c.moveTo(e[0].x,e[0].y);c.lineTo(e[1].x,e[1].y);c.moveTo(e[2].x,e[2].y);c.lineTo(e[3].x,e[3].y);this.Q.Ob(c,d,m,a.bb)};
Ll.prototype.ja=function(a,b,c){b||(b=this.j.m("plus").highlight.color);c||(c=this.Q.lc());b=new ck(b,0.3);var d=this.j.m("plus").highlight.radius*this.transform.ha;a=X(this.transform,[a.a])[0];this.Q.gf(a.x,a.y,d,d,m,b,c);return c};var Ml={plus:{highlight:{color:"blue",radius:0.4},size:0.25,stroke:{width:2,color:"black"}}};function Nl(a,b){Yj.call(this,a,Ol,b);this.Ke=1;this.ca=new Dk(a,this.j);this.af=new Jl(a,this.j);this.Qf=new Ll(a,this.j)}A(Nl,Yj);Nl.prototype.R=function(a){var b=a.nd;if(!this.transform)if(b.length>0){var c=Pl(this,b),d=this.j.m("margin");c.expand(d,d,d,d);this.setTransform(Zj(this,c))}else this.setTransform(new Oh(25,0,0,-25,100,100));B(b,function(e){this.ca.R(e,this.transform)},this);B(a.Vb,function(e){this.Qf.R(e,this.transform)},this);B(a.ia,function(e){this.af.R(e,this.transform)},this)};
function Pl(a,b){var c=Ya(C(b,function(d){return d.e}));c=C(c,function(d){return d.a});if(c.length>0)return id.apply(m,c)}Nl.prototype.M=hh("kemia.view.ReactionRenderer");Nl.prototype.be=function(a){this.Ke=a;this.ca.be(a)};var Ol={margin:4};var Ql,Rl,Sl,Tl,Ul,Vl,Wl;Wl=Vl=Ul=Tl=Sl=Rl=Ql=n;var Xl=fb();if(Xl)if(Xl.indexOf("Firefox")!=-1)Ql=k;else if(Xl.indexOf("Camino")!=-1)Rl=k;else if(Xl.indexOf("iPhone")!=-1||Xl.indexOf("iPod")!=-1)Sl=k;else if(Xl.indexOf("iPad")!=-1)Tl=k;else if(Xl.indexOf("Android")!=-1)Ul=k;else if(Xl.indexOf("Chrome")!=-1)Vl=k;else if(Xl.indexOf("Safari")!=-1)Wl=k;var Yl=Rl,Zl=Sl,$l=Tl,am=Ul,bm=Vl,cm=Wl;var dm;a:{var em="",fm,gm;if(Ql)fm=/Firefox\/([0-9.]+)/;else if(E||jb){dm=ob;break a}else if(bm)fm=/Chrome\/([0-9.]+)/;else if(cm)fm=/Safari\/([0-9.]+)/;else if(Zl||$l){fm=/Version\/(\S+).*Mobile\/(\S+)/;gm=k}else if(am)fm=/Android\s+([0-9.]+)(?:.*Version\/([0-9.]+))?/;else if(Yl)fm=/Camino\/([0-9.]+)/;if(fm){var hm=fm.exec(fb());em=hm?gm?hm[1]+"."+hm[2]:hm[2]||hm[1]:""}dm=em};E&&I("7.0");F&&I("1.8");E||jb||F&&I("1.9");E||G&&I("525");G&&I("531");G&&I("528");F&&I("1.9")||E||jb||G&&I("531");F||G&&I("526");bm&&Ca(dm,"4")>=0||cm&&Ca(dm,"533");function im(a,b,c,d){this.Ye=a;this.Ze=b;this.Xf=c;this.Zf=d}im.prototype.la=function(){return new im(this.Ye,this.Ze,this.Xf,this.Zf)};function jm(a,b,c){if(b instanceof K){c=b.y;b=b.x}else c=c;var d=a.Ye,e=a.Ze,f=a.Xf-a.Ye,h=a.Zf-a.Ze;return((b-d)*(a.Xf-d)+(c-e)*(a.Zf-e))/(f*f+h*h)}function km(a,b){return new K(a.Ye+b*(a.Xf-a.Ye),a.Ze+b*(a.Zf-a.Ze))};function lm(a,b,c){this.cells={};this.Dd=b?b:2;this.Qk=c?c:0.3;this.ee=this.ce=1E5;this.$f=this.Yf=-1E5;b=0;for(c=a.length;b<c;b++){var d=a[b].va();if(d.x<this.ce)this.ce=d.x;if(d.x>this.Yf)this.Yf=d.x;if(d.y<this.ee)this.ee=d.y;if(d.y>this.$f)this.$f=d.y}this.ce-=1;this.ee-=1;this.Yf+=1;this.$f+=1;this.width=this.Yf-this.ce;this.height=this.$f-this.ee;this.uh=Math.ceil(this.width/this.Dd);this.Wk=Math.ceil(this.height/this.Dd);B(a,function(e){var f=e.va();f=Math.floor((f.y-this.ee)/this.Dd)*this.uh+
Math.floor((f.x-this.ce)/this.Dd);this.cells[f]||(this.cells[f]=[]);this.cells[f].push(e)},this)}function mm(a,b){var c=[],d=Math.floor((b.x-a.ce)/a.Dd),e=Math.floor((b.y-a.ee)/a.Dd),f=d-1;for(d=d+2;f<d;f++)if(!(f<0||f>=a.uh))for(var h=e-1,i=e+2;h<i;h++)h<0||h>=a.Wk||c.push(h*a.uh+f);return c}
function Lj(a,b){for(var c=[],d=mm(a,b),e=0,f=d.length;e<f;e++){var h=a.cells[d[e]];if(h)for(var i=0,j=h.length;i<j;i++){var l=h[i],o=l.qe(b);o<a.Qk&&c.push({od:l.od,Mh:o})}}c.sort(function(p,q){return p.Mh-q.Mh});return C(c,function(p){return p.od})}
function nm(a){return Ya(C(a,function(b){return Pa(om(b.nd),C(b.Vb,function(c){return{od:c,va:function(){return c.a},qe:function(d){return Cb(c.a,d)}}}),C(b.ia,function(c){return{od:c,va:function(){return c.va()},qe:function(d){var e=new im(c.source.x,c.source.y,c.target.x,c.target.y);return Cb(km(e,Math.min(Math.max(jm(e,d.x,d.y),0),1)),d)}}}))}))}
function om(a){var b=C(a,function(c){return{od:c,va:function(){return c.va()},qe:function(d){return Cb(c.va(),d)/4}}});B(a,function(c){b=Pa(b,C(c.e,function(d){return{od:d,va:function(){return d.a},qe:function(e){return Cb(d.a,e)}}}));b=Pa(b,C(c.g,function(d){return{od:d,va:function(){return Vi(M(d.source.a,d.target.a)).scale(0.5)},qe:function(e){var f=new im(d.source.a.x,d.source.a.y,d.target.a.x,d.target.a.y);return Cb(km(f,Math.min(Math.max(jm(f,e.x,e.y),0),1)),e)}}}))});return b};function pm(){this.ui=sa(this.jj,this);this.yg=new sk;this.yg.Ei=n;this.ci=this.yg.Fi=n;this.lk=""}pm.prototype.Ik=function(a){if(a!=this.ci){var b;gh();b=fh;if(a){var c=this.ui;if(!b.Ud)b.Ud=[];b.Ud.push(c)}else{(b=b.Ud)&&Na(b,this.ui);this.Yl=""}this.ci=a}};
pm.prototype.jj=function(a){var b;b=this.yg;var c=[];c.push(b.Ck," ");if(b.Ei){var d=new Date(a.Ui);c.push("[",qk(d.getFullYear()-2E3)+qk(d.getMonth()+1)+qk(d.getDate())+" "+qk(d.getHours())+":"+qk(d.getMinutes())+":"+qk(d.getSeconds())+"."+qk(Math.floor(d.getMilliseconds()/10)),"] ")}b.Lk&&c.push("[",rk(a,b.Ok.m()),"s] ");b.Kk&&c.push("[",a.mk,"] ");b.Mk&&c.push("[",a.md.name,"] ");c.push(a.ni,"\n");b.Fi&&a.ug&&c.push(a.tg,"\n");b=c.join("");if(window.console&&window.console.firebug)switch(a.md){case Yg:window.console.info(b);
break;case Zg:window.console.error(b);break;case $g:window.console.warn(b);break;default:window.console.debug(b)}else if(window.console)window.console.log(b);else if(window.opera)window.opera.postError(b);else this.lk+=b};/*
 Copyright 2010 Paul Novak (paul@wingu.com)

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy of
 the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
 @author paul@wingu.com (Paul Novak)
*/
function qm(a,b){this.X=a;this.id=a.id;this.ul=Ob(a);this.r=[];this.Hc={};this.Vd={};for(var c in kh)this.Vd[c]=[];this.j=new he(rm);b&&this.j.zd(b);c=a.clientWidth;var d=a.clientHeight;c=E?new Bl(c,d,void 0,void 0,void 0):G&&(!I("420")||kb)?new cl(c,d,void 0,void 0,void 0):new nl(c,d,void 0,void 0,void 0);c.i();this.Q=c;this.Q.R(this.X);this.k=new Nl(this.Q,this.j);this.di=this.fi=n;this.Id=new fd(this);this.Di=new ni(document);this.Tk=[];sm(this,"keydown",this.hd);sm(this,"keypress",this.Ol);sm(this,
"keyup",this.Ql);sm(this,"mousedown",this.Zj);sm(this,"mousemove",this.$j);sm(this,"mouseup",this.Vh);sm(this,"paste",this.bk);Sc(this.Di,"shortcut",this.Wj,undefined,this);if(this.wj&&this.gm()){c=this.wj;d=this.f();d=Ob(d);var e=m;if(E){e=d.ba.createStyleSheet();Cd(e,c)}else{var f=Rb(d.ba,"head",void 0,void 0)[0];if(!f){e=Rb(d.ba,"body",void 0,void 0)[0];f=d.i("head");e.parentNode.insertBefore(f,e)}e=d.i("style");Cd(e,c);d.appendChild(f,e)}}this.dispatchEvent("load");for(var h in this.Hc)this.Hc[h].jf(this);
this.If=tm;this.di=this.fi=n;this.selected=[];this.ye=[]}var um;A(qm,ad);function rh(a,b){a.selected.push(b)}u=qm.prototype;u.clear=function(){this.Q.clear();this.r=[new Th];this.ye=new lm([],1,0.5);var a=new ck(this.j.m("background").color);this.Q.sg(0,0,this.Q.fd().width,this.Q.fd().height,m,a)};u.be=function(a){this.k.transform=undefined;this.k.be(a)};
function U(a,b){a.clear();a.r=[];B(b,function(d){var e;if(d instanceof Th)e=d;if(d instanceof Q){e=new Th;uj(e,d)}this.r.push(e)},a);var c=Ya(C(b,function(d){if(d instanceof Q)return om([d]);if(d instanceof Th)return nm([d])}));if(c.length>0)a.ye=new lm(c,1,0.5);a.R()}u.Kc=function(a){T(this);U(this,a)};u.R=function(){B(this.r,function(a){a instanceof Th&&this.k.R(a);a instanceof Q&&this.k.ca.R(a)},this)};
function T(a){a.gj=Ai(C(a.r,function(b){if(b instanceof Th)return Oi(b);else if(b instanceof Q)return Pi(b)}));a.dispatchEvent(Si)}u.Wd=function(a){for(var b=this.Vd[a],c=Ta(arguments,1),d=0;d<b.length;++d){var e=b[d];if((e.ka(this)||jh[a])&&e[kh[a]].apply(e,c))return k}return n};function P(a){a.fi=k;a.di=k}
function qh(a,b,c){b=Bh(a,b,c);a=Ia(b,function(d){return d instanceof R},a);if(a.length>0)return a[0];a=Ia(b,function(d){return d instanceof S});if(a.length>0)return a[0];a=Ia(b,function(d){return d instanceof Q});if(a.length>0)return a[0];a=Ia(b,function(d){return d instanceof sh});if(a.length>0)return a[0];b=Ia(b,function(d){return d instanceof th});if(b.length>0)return b[0]}function Ph(a,b){return Lh(a.k.transform?a.k.transform.lb():a.k.ca.transform.lb(),[b])[0]}
function Mh(a){var b=a.currentTarget,c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;c-=b.offsetLeft;for(a-=b.offsetTop;b=b.offsetParent;){c-=b.offsetLeft;a-=b.offsetTop}return new K(c,a)}function Bh(a,b,c){c!==undefined||(c=Mh(b));b=Lh(a.k.transform?a.k.transform.lb():a.k.ca.transform.lb(),[c])[0];return Lj(a.ye,{x:b.x,y:b.y})}
u.wg=function(a,b){b!==undefined||(b=[]);return Ia(C(a,function(c){var d=Lj(this.ye,{x:c.a.x,y:c.a.y},this);d=Ia(d,function(e){if(e instanceof R)return!D(b,e)});return d.length>0?[c,d[0]]:n},this),function(c){return c!=n},this)};u.$j=function(a){try{this.Wd(12,a)}catch(b){this.M.info(b)}};u.Vh=function(a){this.Wd(9,a)};u.Zj=function(a){try{this.Wd(8,a)}catch(b){this.M.info(b);this.M.info("reverting state");this.Kc(C(eval("("+this.gj+")"),Ri))}};u.Vh=function(a){this.Wd(9,a)};
u.Wj=function(a){this.Wd(5,a)};u.bk=function(a){this.Wd(25,a)};function vm(a,b,c){for(var d=a.Vd[7],e=0;e<d.length;++e){var f=d[e];if(f.ka(a)&&f.Qb(b)&&(c||f.yh()))return f.queryCommandValue(b)}return c?m:n}function lh(a){B(a.Vd[7],function(b){b.sd&&b.sd()})}u.queryCommandValue=function(a){var b=this.Bf();if(y(a))return vm(this,a,b);else{for(var c={},d=0;d<a.length;d++)c[a[d]]=vm(this,a[d],b);return c}};
u.execCommand=function(a){for(var b=arguments,c,d=this.Vd[6],e=0;e<d.length;++e){var f=d[e];if(f.ka(this)&&f.Qb(a)){c=f.execCommand.apply(f,b);break}}return c};u.Ek=function(a){var b=a.Cc();this.Hc[b]&&this.M.log(Zg,"Cannot register the same class of plugin twice ["+b+"]",void 0);this.Hc[b]=a;for(var c in kh)a[kh[c]]&&this.Vd[c].push(a);ih(a,this);this.Bf()&&a.jf(this)};u.Bf=function(){return this.If==tm};var tm=2;qm.prototype.M=hh("kemia.controller.ReactionEditor");var mh="cvc",Si="beforechange";
qm.prototype.p=function(){if(this.If==1||this.Bf())this.M.log($g,"Disposing an editor that is in use.",void 0);this.X&&this.execCommand(Lg.Xk);for(var a in this.Hc){var b=this.Hc[a];b.yh()||b.pg(this)}this.If=0;this.Id&&this.Id.Ee();this.bm=m;if(this.Id){this.Id.aa();this.Id=m}for(;a=this.Tk.pop();)a.aa();if(um==this.id)um=m;for(var c in this.Hc){a=this.Hc[c];a.tj&&a.aa()}delete this.Hc;qm.h.p.call(this)};qm.prototype.Bf=function(){return this.If==tm};function sm(a,b,c,d,e){a.Id.u(a.X,b,c,d,e)}
qm.prototype.Zg=function(a,b){this.Di.Zg(a,b)};var rm={background:{color:"#F0FFF0"},margin:{left:1,right:1,top:1,bottom:1}};function wm(a,b){this.Cb=new fd(this);this.hf=a;this.Ib=b;this.Xg=[];Od(this.Ib,function(c){c.Fb&&this.Xg.push(xm(this,Jd(c)))},this);this.Ib.sc(n);this.Cb.u(this.hf,mh,this.Rk).u(this.Ib,"action",this.Pj)}A(wm,ad);function xm(a,b){return b}u=wm.prototype;u.ab=r("Cb");u.Xa=function(){return this.Ib.Xa()};u.za=function(a){this.Ib.za(a)};u.ka=function(){return this.Ib.ka()};u.Ic=function(a){this.Ib.Ic(a)};u.blur=function(){this.Ib.Rc(m)};
u.p=function(){wm.h.p.call(this);if(this.Cb){this.Cb.aa();delete this.Cb}if(this.Ib){this.Ib.aa();delete this.Ib}delete this.hf;delete this.Xg};u.Rk=function(a){if(this.Ib.ka()&&this.dispatchEvent("change")){var b;try{b=this.hf.queryCommandValue(a.ol||this.Xg)}catch(c){b={}}a=b;for(var d in a)if(b=Md(this.Ib,d)){var e=a[d];b.We?b.We(e):bf(b,!!e)}}};u.Pj=function(a){var b;b=Jd(a.target);var c=a.target.Oa(),d;if(a.target.Af)d=a.target.Af();this.hf.execCommand(b,c,d,a)};u.M=hh("kemia.controller.ToolbarController");var ym=3;ym=3;
function zm(a,b,c,d){switch(a){case 1:switch(b){case 0:return new S(c,d);case 1:return new S(c,d,gi,11);case 4:return new S(c,d,gi,12);case 6:return new S(c,d,gi,13);default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}case 2:return new S(c,d,2);case ym:return new S(c,d,3);case 4:a=new S(c,d);a.ac=k;return a;case 5:g(Error("type not implemented ["+a+"]"));case 6:g(Error("type not implemented ["+a+"]"));case 7:g(Error("type not implemented ["+a+"]"));case 8:g(Error("type not implemented ["+a+
"]"));default:g(Error("invalid bond type/stereo ["+a+"]/["+b+"]"))}};var Am=RegExp(/\[[^[]+\]|Br|B|Cl|C|N|F|O|P]|S|c|n|o|s|-|=[0-9]|=[0-9]|=|#[0-9]|#[0-9][0-9]|#|\$|%[0-9][0-9]|[0-9]|\(|\)|./g),Bm=RegExp(/^\[([0-9]*)([A-Z][a-z]?|c|n|o|se|s|as)(@|@@)?(H)?([0-9])?([+-][\d]?)?\]$/),Cm=["C","c","N","n","O","o","S","s","P","F","Br","Cl","I","B"],Dm=["c","n","o","s","as","se"];
function Em(a,b,c){var d=a;if(a=="NONE")d=b.ac&&c.ac?":":"-";switch(d){case "-":return new S(b,c,gi);case "=":return new S(b,c,2);case "#":return new S(b,c,3);case ":":a=new S(b,c);a.ac=k;return a;default:g(Error("invalid bond type ["+a+"]"))}}
function Fm(a,b){for(var c=0,d=b.length;c<d;c++){var e=a.e[b[c]];if(e!=undefined){var f=b[++c];++c;var h=[],i=0,j=m;B(a.e,function(o){var p=mj(a,e,o);if(p!=m&&p!=undefined){if(p.source!=e){p.source=e;p.target=o}i++;a:{o=rj(a);for(var q=0,t=o.length;q<t;q++)for(var v=0,x=o[q].g.length;v<x;v++)if(p==o[q].g[v]){o=k;break a}o=n}o||h.push(p)}});var l=h.length;if((i==3||i==4)&&l>0){j=0;if(i==3&&l>1||i==4&&l>2)j=1;j=h[j];j.fa=f=="@"?11:13}if(i==4&&l>1){j=1;if(l==4)j=3;else if(l==4)j=2;j=h[j];j.fa=f=="@"?
13:11}}}}
var Gm={H:{number:1,name:"Hydrogen"},He:{number:2,name:"Helium"},Li:{number:3,name:"Lithium"},Be:{number:4,name:"Beryllium"},B:{number:5,name:"Boron"},C:{number:6,name:"Carbon"},c:{number:6,name:"Carbon"},N:{number:7,name:"Nitrogen"},n:{number:7,name:"Nitrogen"},O:{number:8,name:"Oxygen"},o:{number:8,name:"Oxygen"},F:{number:9,name:"Fluorine"},Ne:{number:10,name:"Neon"},Na:{number:11,name:"Sodium"},Mg:{number:12,name:"Magnesium"},Al:{number:13,name:"Aluminium"},Si:{number:14,name:"Silicon"},P:{number:15,
name:"Phosphorus"},S:{number:16,name:"Sulfur"},s:{number:16,name:"Sulfur"},Cl:{number:17,name:"Chlorine"},Ar:{number:18,name:"Argon"},K:{number:19,name:"Potassium"},Ca:{number:20,name:"Calcium"},Sc:{number:21,name:"Scandium"},Ti:{number:22,name:"Titanium"},V:{number:23,name:"Vanadium"},Cr:{number:24,name:"Chromium"},Mn:{number:25,name:"Manganese"},Fe:{number:26,name:"Iron"},Co:{number:27,name:"Cobalt"},Ni:{number:28,name:"Nickel"},Cu:{number:29,name:"Copper"},Zn:{number:30,name:"Zinc"},Ga:{number:31,
name:"Gallium"},Ge:{number:32,name:"Germanium"},As:{number:33,name:"Arsenic"},as:{number:33,name:"Arsenic"},Se:{number:34,name:"Selenium"},se:{number:34,name:"Selenium"},Br:{number:35,name:"Bromine"},Kr:{number:36,name:"Krypton"},Rb:{number:37,name:"Rubidium"},Sr:{number:38,name:"Strontium"},Y:{number:39,name:"Yttrium"},Zr:{number:40,name:"Zirconium"},Nb:{number:41,name:"Niobium"},Mo:{number:42,name:"Molybdenum"},Tc:{number:43,name:"Technetium"},Ru:{number:44,name:"Ruthenium"},Rh:{number:45,name:"Rhodium"},
Pd:{number:46,name:"Palladium"},Ag:{number:47,name:"Silver"},Cd:{number:48,name:"Cadmium"},In:{number:49,name:"Indium"},Sn:{number:50,name:"Tin"},Sb:{number:51,name:"Antimony"},Te:{number:52,name:"Tellurium"},I:{number:53,name:"Iodine"},Xe:{number:54,name:"Xenon"},Cs:{number:55,name:"Caesium"},Ba:{number:56,name:"Barium"},La:{number:57,name:"Lanthanum"},Ce:{number:58,name:"Cerium"},Pr:{number:59,name:"Praseodymium"},Nd:{number:60,name:"Neodymium"},Pm:{number:61,name:"Promethium"},Sm:{number:62,name:"Samarium"},
Eu:{number:63,name:"Europium"},Gd:{number:64,name:"Gadolinium"},Tb:{number:65,name:"Terbium"},Dy:{number:66,name:"Dysprosium"},Ho:{number:67,name:"Holmium"},Er:{number:68,name:"Erbium"},Tm:{number:69,name:"Thulium"},Yb:{number:70,name:"Ytterbium"},Lu:{number:71,name:"Lutetium"},Hf:{number:72,name:"Hafnium"},Ta:{number:73,name:"Tantalum"},W:{number:74,name:"Tungsten"},Re:{number:75,name:"Rhenium"},Os:{number:76,name:"Osmium"},Ir:{number:77,name:"Iridium"},Pt:{number:78,name:"Platinum"},Au:{number:79,
name:"Gold"},Hg:{number:80,name:"Mercury"},Tl:{number:81,name:"Thallium"},Pb:{number:82,name:"Lead"},Bi:{number:83,name:"Bismuth"},Po:{number:84,name:"Polonium"},At:{number:85,name:"Astatine"},Rn:{number:86,name:"Radon"},Fr:{number:87,name:"Francium"},Ra:{number:88,name:"Radium"},Ac:{number:89,name:"Actinium"},Th:{number:90,name:"Thorium"},Pa:{number:91,name:"Protactinium"},U:{number:92,name:"Uranium"},Np:{number:93,name:"Neptunium"},Pu:{number:94,name:"Plutonium"},Am:{number:95,name:"Americium"},
Cm:{number:96,name:"Curium"},Bk:{number:97,name:"Berkelium"},Cf:{number:98,name:"Californium"},Es:{number:99,name:"Einsteinium"},Fm:{number:100,name:"Fermium"},Md:{number:101,name:"Mendelevium"},No:{number:102,name:"Nobelium"},Lr:{number:103,name:"Lawrencium"},Rf:{number:104,name:"Rutherfordium"},Db:{number:105,name:"Dubnium"},Sg:{number:106,name:"Seaborgium"},Bh:{number:107,name:"Bohrium"},Hs:{number:108,name:"Hassium"},Mt:{number:109,name:"Meitnerium"},Ds:{number:110,name:"Darmstadtium"},Rg:{number:111,
name:"Roentgenium"},Cn:{number:112,name:"Copernicium"}};function $(a,b){if(arguments.length>0){this.x=a;this.y=b}}u=$.prototype;u.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};u.add=function(a){return new $(this.x+a.x,this.y+a.y)};u.Pe=function(a){return new $(this.x-a.x,this.y-a.y)};u.toString=function(){return this.x+","+this.y};u.scale=function(a){this.x*=a;this.y*=a};u.normalize=function(){var a=1/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=a;this.y*=a};u.sub=function(a){this.x-=a.x;this.y-=a.y};
u.pi=function(a){this.x=-a.x;this.y=-a.y};u.pi=function(){this.x=-this.x;this.y=-this.y};u.$e=function(a){a=(this.x*a.x+this.y*a.y)/(this.length()*a.length());if(a<-1)a=-1;if(a>1)a=1;return Math.acos(a)};function Hm(a){var b,c;b=Y(a);for(var d=Array(b),e=0;e<b;++e){d[e]=Array(b);for(var f=0;f<b;f++)d[e][f]=0}e=a.zb();for(f=0;f<e;f++){c=a.g[f];b=kj(a,c.source);c=kj(a,c.target);d[b][c]=1;d[c][b]=1}e=d.length;b=Array(e);for(f=0;f<e;++f)b[f]=Array(e);for(f=0;f<e;f++)for(c=0;c<e;c++)b[f][c]=d[f][c]==0?999999:1;for(f=0;f<e;f++)b[f][f]=0;for(d=0;d<e;d++)for(f=0;f<e;f++)for(c=0;c<e;c++)if(b[f][d]+b[d][c]<b[f][c])b[f][c]=b[f][d]+b[d][c];d=0;e=-1;f=a.zb();c=b.length;for(var h=0;h<c;h++)if(Im(a.e[h],a,f)==1)for(var i=
0;i<c;i++)if(b[h][i]>d){d=b[h][i];e=h}return Jm(a,a.e[e])}function Jm(a,b){for(var c=0,d=0,e=0,f=0,h=[],i=Y(a),j=a.zb(),l=0;l<i;l++){a.e[l].ib(1,n);h[l]=new Q;Gh(h[l],b)}l=[];l.push(b);b.ea[1]=k;Km(a,l,h,j);for(l=0;l<i;l++)if(Y(h[l])>=d){f=h[l];for(var o=0,p=Y(f),q=0;q<p;q++)o+=Im(f.e[q],a,j);f=o;if(f>e){e=f;c=l;d=Y(h[l])}}return h[c]}function Im(a,b,c){for(var d=0,e=0;e<c;e++)if(b.g[e].source==a||b.g[e].target==a)d++;return d}
function Km(a,b,c,d){for(var e=[],f=b.length,h=0;h<f;h++){var i=b[h];if(!i.ea[2])for(var j=kj(a,i),l=sj(a,i),o=0;o<l.length;o++){var p=l[o],q=V(p,i);if(!q.ea[1]&&!q.ea[0]){for(var t=kj(a,q),v=c,x=t,H=c[j],J=new Q,ia=0,W=Y(H);ia<W;ia++)Gh(J,H.e[ia]);v[x]=J;Gh(c[t],q);Dh(c[t],p);Im(q,a,d)>1&&e.push(q)}}}if(e.length>0){for(b=0;b<e.length;b++)e[b].ib(1,k);Km(a,e,c,d)}}
function Lm(a,b,c){var d=b;for(b=0;b<Y(a)-1;b++){var e=a.e[b],f=a.e[b+1],h=new K(e.a.x,e.a.y);d.normalize();d.scale(c);h.x+=d.x;h.y+=d.y;f.a=h;f.ib(0,k);d=k;if(Mm(a)==2)d=n;d=Nm(f,e,Om(a),d)}}function Mm(a){if(a==m)return 0;var b=n,c=n;B(a.e,function(d){if(d.a==m||d.a.x==0&&d.a.y==0)b=k;else c=k});return!b&&c?2:b&&c?1:0}function Om(a){for(var b=0,c=0,d=0,e=0,f=Y(a);e<f;e++){var h=a.e[e];if(h.ea[0]==k){b+=h.a.x;c+=h.a.y;d++}}return new K(b/d,c/d)}
function Pm(a){for(var b=0,c=0,d=0,e=0,f=a.length;e<f;e++){var h=a[e];if(h.ea[0]==k){b+=h.a.x;c+=h.a.y;d++}}return new K(b/d,c/d)}function Qm(a,b){var c=0;if(a>=0&&b>=0)c=Math.atan(b/a);else if(a<0&&b>=0)c=Math.PI+Math.atan(b/a);else if(a<0&&b<0)c=Math.PI+Math.atan(b/a);else if(a>=0&&b<0)c=2*Math.PI+Math.atan(b/a);return c}
function Nm(a,b,c,d){b=Qm(b.a.x-a.a.x,b.a.y-a.a.y);var e=Math.PI*(120/180);d||(e=Math.PI*(60/180));b+=e;d=new $(Math.cos(b),Math.sin(b));var f=Cb(new K(a.a.x+d.x,a.a.y+d.y),c);b+=e;b=new $(Math.cos(b),Math.sin(b));return Cb(new K(a.a.x+b.x,a.a.y+b.y),c)>f?b:d}function Rm(a,b){for(var c=0;c<b;c++)if(!a.e[c].ea[0])return n;return k}
function Sm(a,b,c,d,e){var f=0,h=0,i=0;i=0;var j=new $(c.x,c.y);f=new $(a.a.x,a.a.y);var l=new $(c.x,c.y);l.sub(f);c=[];var o=Y(b);h=Y(d);if(o==1){for(f=0;f<h;f++)c.push(d.e[f]);i=Math.PI*2/(h+o);d=b.e[0];h=Qm(d.a.x-a.a.x,d.a.y-a.a.y);Tm(c,new K(a.a.x,a.a.y),h,i,e)}else if(o==0){for(f=0;f<h;f++)c.push(d.e[f]);i=Math.PI*2/h;Tm(c,new K(a.a.x,a.a.y),0,i,e)}else{i=[];j.sub(f);f=j;f.normalize();f.scale(e);f.pi();j=new K(a.a.x,a.a.y);j.x+=f.x;j.y+=f.y;for(f=0;f<o;f++)i.push(b.e[f]);do{b=n;f=0;for(o=i.length;f<
o-1;f++){var p=i[f],q=i[f+1];if(Cb(j,q.a)<Cb(j,p.a)){i[f]=q;i[f+1]=p;b=k}}}while(b);f=new $(i[0].a.x,i[0].a.y);b=new $(i[1].a.x,i[1].a.y);f.sub(new $(a.a.x,a.a.y));b.sub(new $(a.a.x,a.a.y));f=f.$e(l);f+=b.$e(l);b=Qm(i[0].a.x-a.a.x,i[0].a.y-a.a.y);j=Qm(j.x-a.a.x,j.y-a.a.y);l=m;l=b>j?b-j<Math.PI?i[1]:i[0]:j-b<Math.PI?i[0]:i[1];i=2*Math.PI-f;i=i/(h+1);for(j=0;j<h;j++)c.push(d.e[j]);h=Qm(l.a.x-a.a.x,l.a.y-a.a.y);Tm(c,new K(a.a.x,a.a.y),h,i,e)}}
function Tm(a,b,c,d,e){var f=[];c=c;for(var h=0,i=a.length;h<i;h++){c+=d;if(c>=2*Math.PI)c-=2*Math.PI;var j=a[h];if(j.T=="H")e*=0.6;f.push(new K(Math.cos(c)*e+b.x,Math.sin(c)*e+b.y))}h=0;for(i=a.length;h<i;h++){j=a[h];j.a=f[h];j.ea[0]=k}}function Um(a,b,c,d){var e=0;B(b.g.L(),function(f){e++;f=V(f,b);f.ea[0]?Gh(d,f):Gh(c,f)});return e}function Vm(a){B(a,function(b){b.ib(0,n)})}function Wm(a){B(a,function(b){b.ib(0,k)})};function Xm(a,b,c){a=Math.sqrt(Math.pow(c/(2*Math.sin(Math.PI/a.e.length)),2)-Math.pow(c/2,2));b=Qm(b.x,b.y);b+=Math.PI/2;return new $(Math.cos(b)*a,Math.sin(b)*a)}
function Ym(a,b,c,d,e){var f=b.e.length;if(f>2){f=e/(2*Math.sin(Math.PI/a.e.length));d.normalize();d.scale(f);c=new K(c.x+d.x,c.y+d.y);var h=Zm(b);e=h[0];h=h[1];var i=new $(e.a.x,e.a.y),j=new $(h.a.x,h.a.y);i.sub(d);j.sub(d);i=i.$e(j);i=(2*Math.PI-i)/(a.e.length-b.e.length+1);var l;a:{if(L(e.a,h.a).x==0){if(e.a.y>h.a.y){l=e;break a}}else if(e.a.x>h.a.x){l=e;break a}l=h}j=N(cg(l.a.x,l.a.y,d.x,d.y));a=$m(l,b.g[0],a.g);b=1;h=L(e.a,h.a);if(h.x==0){if(d.x>e.a.x)b=-1}else if(d.y-e.a.y<(d.x-e.a.x)*h.y/h.x)b=
-1;i*=b;Tm(a,c,j,i,f)}else if(f==2){f=e/(2*Math.sin(Math.PI/a.e.length));e=Math.sqrt(Math.pow(f,2)-Math.pow(e/2,2));d.normalize();d.scale(e);d=new K(c.x+d.x,c.y+d.y);h=b.e[0];i=b.e[1];c=new $(h.a.x,h.a.y);e=new $(i.a.x,i.a.y);j=new $(d.x,d.y);c.sub(j);e.sub(j);c=c.$e(e);c=(2*Math.PI-c)/(a.e.length-1);j=d.x;l=d.y;var o=h.a.x-i.a.x,p=h.a.y-i.a.y;e=1;if(o==0){i=h.a.y>i.a.y?h:i;e=j<h.a.x?1:-1}else{i=h.a.x>i.a.x?h:i;e=l-h.a.y>(j-h.a.x)*p/o?1:-1}h=Qm(i.a.x-d.x,i.a.y-d.y);i=i;b=b.g[0];j=[];l=0;for(o=a.g.length-
2;l<o;l++){a:{for(p=0;p<a.g.length;p++)if(a.g[p]!=b&&(a.g[p].source==i||a.g[p].target==i)){b=a.g[p];break a}b=m}i=V(b,i);j.push(i)}c*=e;Tm(j,d,h,c,f)}else if(f==1){f=e/(2*Math.sin(Math.PI/a.e.length));d.normalize();d.scale(f);d=new K(c.x+d.x,c.y+d.y);c=2*Math.PI/a.e.length;h=b.e[0];e=Qm(h.a.x-d.x,h.a.y-d.y);a=$m(h,b.g[0],a.g);Tm(a,d,e,c,f)}}
function an(a,b,c){var d=new Q,e=0;B(b,function(f){B(f.e,function(h){var i=new Q,j=new Q,l=Ia(b,function(o){return D(o.e,h)});l=Ya(C(l,function(o){return o.e}));l=bn(l);e+=Um(a,h,i,j);Vm(i.e);B(i.e,function(o){Gh(d,o)});i.e.length>0&&Sm(h,j,l,i,c)})});return d}function $m(a,b,c){var d=Ma(c,function(e){return V(e,a)});b=Ia(c,function(e){return e!==d});if(b.length>0){c=V(d,a);return Pa(c,$m(c,d,b))}else return[]}
function Zm(a){var b=[];B(a.e,function(c){B(c.g.L(),function(d){D(a.g,d)&&b.push(V(d,c))})});return b}function cn(a,b){var c=[];B(b.e,function(d){D(a.e,d)&&c.push(d)});return c}function dn(a,b){var c=[];B(b.g,function(d){D(a.g,d)&&c.push(d)});return c}function bn(a){var b=Ja(a,function(c,d){return M(c,d.a)},new K(0,0));return new K(b.x/a.length,b.y/a.length)}
function en(a,b,c,d){for(var e=fn(b,a),f=0,h=e.length;f<h;f++){var i=e[f];if(!i.ea[0]){var j={e:cn(b,i),g:dn(b,i)},l=j.e.length;if(l==2&&c=="FUSED"||l==1&&c=="SPIRO"||l>2&&c=="BRIDGED"){l="";for(var o=0;o<j.e.length;o++)l+="\n         "+j.e[o].a+" "+j.e[o].ea[0];l=Pm(j.e);o=Pm(b.e);var p=new $(l.x,l.y);p=new $(p.x,p.y);p.sub(new $(o.x,o.y));Ym(i,j,l,p,d);i.ib(0,k);en(a,i,c,d)}}}}function gn(a){B(a,function(b){b.gi||B(b.e,function(c){c.ib(0,n)})})}
function hn(a){return Ma(a,function(b){return Ka([b.source,b.target],function(c){return c.ea[2]&&!c.ea[0]&&V(b,c).ea[0]})})}
function jn(a,b,c,d){gn(c);c=Ia(b.e,function(p){return p.ea[0]});var e=hn(b.g);if(e){var f=Ma([e.source,e.target],function(p){return p.ea[2]&&!p.ea[0]});e=V(e,f);d=Ma(d,function(p){return Ma(p,function(q){return D(q.e,f)})});var h=f.a.la(),i=e.a.la();kn(a,d);Vm(c);a=an(b,d,ln);Wm(c);c=Pa(a.e,Ya(C(d,function(p){return p.e})));Ua(c);a=f.a;b=e.a;a=Qm(h.x-i.x,h.y-i.y)-Qm(a.x-b.x,a.y-b.y);var j=new $(i.x,i.y);j.sub(new $(b.x,b.y));B(c,function(p){p.a.x+=j.x;p.a.y+=j.y});var l=Math.cos(a),o=Math.sin(a);
B(c,function(p){p=p.a;var q=p.x-i.x,t=p.y-i.y;p.x=q*l-t*o+i.x;p.y=q*o+t*l+i.y});B(d,function(p){p.gi=k})}};function mn(a){for(var b=[],c=Array(a.length),d=0,e=a.length;d<e;d++)c[d]=n;d=0;for(e=a.length;d<e;d++)if(!c[d]){var f=[];f.push(a[d]);c[d]=k;for(var h=a[d].e.length,i=d+1;i<a.length;i++)if(!c[i]){var j=a[i].e.length,l=0;a:for(;l<f.length;l++){h=f[l].e.length;for(var o=0;o<h;o++)for(var p=0;p<j;p++)if(f[l].e[o]==a[i].e[p]){f.push(a[i]);c[i]=k;i=d;break a}}}b.push(f)}return b}
function fn(a,b){for(var c=[],d=a.e.length,e=0,f=b.length;e<f;e++)if(a!=b[e]){var h=b[e].e.length,i=0;a:for(;i<d;i++)for(var j=0;j<h;j++)if(a.e[i]==b[e].e[j]){c.push(b[e]);break a}}return c}mn=function(a){var b=[],c=a;B(a,function(d){if(!D(Ya(b),d)){var e=Ma(b,function(h){return D(h,d)});if(e==m){e=[d];c=Ia(c,function(h){return h!==d})}var f=fn(d,c);e=Pa(e,f);c=Ia(c,function(h){D(f,h)});b.push(e)}});return b};
fn=function(a,b){var c=[];B(b,function(d){Ka(d.e,function(e){return d===a?n:D(a.e,e)})&&c.push(d)});return c};function nn(a){var b=[],c=on(a,b);if(c>0){c=0;do{var d=Math.round(Math.random()*b.length);if(d>=b.length)d=b.length-1;var e=b[d];if(e!=undefined){var f=e[0];e=e[1];d=new $(e.a.x-f.a.x,e.a.y-f.a.y);d.normalize();if(isNaN(d.x))d.x=0.01;if(isNaN(d.y))d.y=0.01;d.scale(-1*ln/3);if(Math.random()>0.5){e.a.x+=d.x;e.a.y+=d.y}else{f.a.x-=d.x;f.a.y-=d.y}f=on(a,b);c++}else alert("problem kemia.layout.OverlapResolver.displace p is "+d+" and len "+b.length+" and "+e)}while(f>0&&!(c>25));c=f}return c}
function on(a,b){for(var c=0,d=ln/5,e=Y(a),f=0;f<e;f++)for(var h=a.e[f],i=h.a,j=f+1;j<e;j++){var l=a.e[j];if(Cb(i,l.a)<d){c+=d;b.push([h,l])}}return c};var ln=1.5;function kn(a,b){var c=pn(b);if(!c.ea[0]){var d={e:qn(c.g[0],a),g:[c.g[0]]},e=Ja(d.e,function(f,h){return M(f,h.a)},new K(0,0));Ym(c,d,new $(e.x/d.e.length,e.y/d.e.length),Xm(c,a,ln),ln);c.ib(0,k)}d=0;do{if(c.ea[0]){en(b,c,"FUSED",ln);en(b,c,"BRIDGED",ln);en(b,c,"SPIRO",ln)}d++;if(d==b.length)d=0;c=b[d]}while(!rn(b))}function qn(a,b){b.normalize();b.scale(ln);a.source.a=new K(0,0);a.source.ib(0,k);a.target.a=new K(b.x,b.y);a.target.ib(0,k);return[a.source,a.target]}
function rn(a){for(var b=0;b<a.length;b++)if(!a[b].ea[0])return n;return k}function sn(a,b,c,d){c=new Q;b=sj(b,a);for(var e=0,f=b.length;e<f;e++){var h=V(b[e],a);if(d&&h.ea[0])Gh(c,h);else!d&&!h.ea[0]&&Gh(c,h)}return c}
function tn(a,b,c){var d=0,e;do{d++;var f=n;a:{for(var h=0;h<b;h++){e=a.g[h];if(e.source.ea[0]&&!e.target.ea[0]){e=e.source;break a}if(!e.source.ea[0]&&e.target.ea[0]){e=e.target;break a}}e=m}var i=m,j=m;if(e!=m){i=sn(e,a,b,n);j=sn(e,a,b,k);h=Jm(a,e);if(Y(h)>1){if(Y(j)>1){Sm(e,j,Om(j),i,c);i=new $(h.e[1].a.x,h.e[1].a.y);j=new $(e.a.x,e.a.y);i.sub(j)}else i=Nm(e,j.e[0],Om(a),k);e=1;for(j=Y(h);e<j;e++)h.e[e].ea[0]=n;Lm(h,i,c)}else f=k}else f=k}while(!f&&d<=Y(a))}
function pn(a){for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=0;var d=0,e=0;for(c=0;c<a.length;c++)for(var f=a[c],h=0;h<f.e.length;h++)for(var i=f[h],j=c+1;j<a.length;j++){var l=a[j];if(f!=l)for(var o=0;o<l.e.length;o++)if(i==l[o]){b[c]++;b[j]++;break}}for(c=0;c<b.length;c++)if(b[c]>d){d=b[c];e=c}return a[e]};w("goog.dom.getElement",function(a){return y(a)?document.getElementById(a):a},void 0);w("goog.dom.setTextContent",dc,void 0);w("goog.ui.Prompt",Ee,void 0);w("goog.ui.Prompt.prototype.setDefaultValue",Ee.prototype.Jk,void 0);w("goog.ui.Prompt.prototype.setVisible",Ee.prototype.za,void 0);w("goog.now",ua,void 0);w("goog.debug.Console",pm,void 0);w("goog.debug.Console.prototype.setCapturing",pm.prototype.Ik,void 0);w("goog.ui.Select",Rf,void 0);w("goog.ui.Select.prototype.addItem",Rf.prototype.Lc,void 0);
w("goog.ui.Select.prototype.setSelectedIndex",Rf.prototype.Le,void 0);w("goog.ui.Select.prototype.render",Rf.prototype.R,void 0);w("goog.ui.Select.prototype.getValue",Rf.prototype.Oa,void 0);w("goog.ui.MenuItem",Ef,void 0);w("goog.ui.Component.EventType.ACTION","action",void 0);w("goog.events.EventType.LOAD","load",void 0);w("goog.events.listen",Sc,void 0);w("kemia.io.json.readMolecule",Qi,void 0);w("kemia.io.json.writeMolecule",function(a){return Bi(new Ci,Pi(a))},void 0);
w("kemia.io.json.readReaction",Ri,void 0);w("kemia.io.json.writeReaction",function(a){return Bi(new Ci,Oi(a))},void 0);
w("kemia.io.mdl.readMolfile",function(a){a=a.split(a.indexOf("\r\n")>0?"\r\n":"\n");var b=new Q(a[0]),c=a[1].slice(46,52).trim();b.id=c;var d=parseInt(a[3].substr(0,3),10),e=parseInt(a[3].substr(3,3),10);for(c=1;c<=d;c++){var f=a[c+3],h=f.substr(30,4).replace(/(^\s*)|(\s*$)/g,""),i=parseFloat(f.substr(0,10)),j=parseFloat(f.substr(10,10));f=parseInt(f.substr(36,3),10);var l=0;if(f!=0)if(f==1)l=3;else if(f==2)l=2;else if(f==3)l=1;else if(f!=4)if(f==5)l=-1;else if(f==6)l=-2;else if(f==7)l=-3;f=new R(h,
i,j,l);Gh(b,f)}for(c=1;c<=e;c++){f=a[c+3+d];f=zm(parseInt(f.substr(6,3),10),parseInt(f.substr(9,3),10),b.e[parseInt(f.substr(0,3),10)-1],b.e[parseInt(f.substr(3,3),10)-1]);Dh(b,f)}c=4+d+e;d=a.length;for(e=n;;){f=a[c++];if(c==d||f.indexOf("M  END")>=0)break;if(f.indexOf("M  CHG")>=0){if(!e){l=0;for(e=Y(b);l<e;l++)b.e[l].Va=0;e=k}h=parseInt(f.substr(6,3),10);for(i=0;i<h;i++){j=parseInt(f.substr(10+8*i,3),10);l=parseInt(f.substr(14+8*i,3),10);b.e[j-1].Va=l}}}return b},void 0);
w("kemia.io.smiles.SmilesParser.parse",function(a){for(var b=a.match(Am),c=new Q(a),d=0,e,f="NONE",h=[],i=[],j=[],l="",o=[],p=0;p<b.length;p++){var q=b[p];if(q!=".")if(q=="(")h.push(e);else if(q==")")if(h.length)e=h.pop();else l=" Unbalanced parents";else if(q=="-")f="-";else if(q=="=")f="=";else if(q=="#")f="#";else if(q=="$")f="$";else if(q==":")f=":";else if(q[0]=="%"){var t=parseInt(q[1]+q[2],10),v=i[t];if(v){Dh(c,Em(f,e,v));f="NONE";i[t]=m}else i[t]=e}else if(q!="/")if(q!="\\")if(isNaN(t=parseInt(q,
10)))if(q.length>1&&(q.lastIndexOf("=",0)==0||q.lastIndexOf("#",0)==0||q.lastIndexOf("$",0)==0)&&!isNaN(t=parseInt(q.substr(1),10)))if(v=i[t]){Dh(c,Em(j[t],e,v));f="NONE";i[t]=m;j[t]=m}else{i[t]=e;j[t]=q.substr(0,1)}else{t=q;v={Df:m,symbol:m,fa:"NONE",ck:m,Va:m,ac:n,Fh:n};var x=Bm.exec(t);if(x){v.Df=x[1];if(Gm[x[2]])v.T=x[2];if(x[3]=="@"||x[3]=="@@"){v.fa=x[3];if(x[4]=="H")v.Fh=k}else v.fa="NONE";if(x[4]=="H")v.ck=x[5]?x[5]:1;v.Va=x[6]=="+"?1:x[6]=="-"?-1:parseInt(x[6],10)}else if(D(Cm,t))v.T=t;if(D(Dm,
v.T)){v.ac=k;v.T=v.T.length==1?v.T.toUpperCase():v.T[0].toUpperCase()+v.T[1]}t=v;if(t.T){d+=1;q=new R(t.T,0,0,t.Va,t.ac,t.Df);if(e){Dh(c,Em(f,e,q));f="NONE"}Gh(c,q);if(t.fa!="NONE"){o.push(kj(c,q));o.push(t.fa);o.push(t.Fh)}e=q}else l=" unknown atom "+q}else if(v=i[t]){Dh(c,Em(f,e,v));f="NONE";i[t]=m}else i[t]=e;if(l)g(Error(a+l))}Fm(c,o);if(h.length)g(Error("unbalanced parens"));for(a=0;a<i.length;++a)if(i[a])g(Error("unclosed rings"));if(f!="NONE")g(Error("unpaired bond "+f));return c},void 0);
w("kemia.layout.CoordinateGenerator.generate",function(a){for(var b=0,c=new $(0,1),d=Y(a),e=0;e<d;e++){var f=a.e[e];f.ib(0,n);f.ib(1,n);f.ib(2,n);f.ib(bi.bl,n)}if(d==1){a.e[0].coords=new K(0,0);return a}if(a.Jd>1)g(Error("Molecule not connected."));e=a.zb();b=e-Y(a)+1;f=rj(a);var h=new mn(f);if(b>0){B(f,function(i){B(i.e,function(j){j.ib(2,k)})});Va(h,function(i,j){return Wa(i.length,j.length)});b=h[h.length-1];kn(c,b);an(a,b,ln);B(b,function(i){i.gi=k})}else{b=Hm(a);b.e[0].a=new K(0,0);b.e[0].ea[0]=
k;Lm(b,c,ln)}b=0;do{b++;tn(a,e,ln);jn(c,a,f,h)}while(!Rm(a,d)&&b<=Y(a));nn(a,f);return a},void 0);w("kemia.controller.ReactionEditor",qm,void 0);w("kemia.controller.ReactionEditor.prototype.setModels",qm.prototype.Kc,void 0);w("kemia.controller.ReactionEditor.prototype.render",qm.prototype.R,void 0);w("kemia.controller.ReactionEditor.prototype.registerPlugin",qm.prototype.Ek,void 0);w("kemia.controller.ToolbarController",wm,void 0);
w("kemia.controller.DefaultToolbar.makeDefaultMoleculeToolbar",function(a){var b=Pj([]);b=Rj(b);b=Sj(b);return Tj(b,a)},void 0);w("kemia.controller.plugins.ArrowPlusEdit",Zi,void 0);w("kemia.controller.DefaultToolbar.makeDefaultToolbar",{}.Zl,void 0);
w("kemia.controller.DefaultToolbar.makeDefaultReactionToolbar",function(a){var b=Pj([]);b=b;var c=Jg("editPlus","Plus","","tr-icon tr-plus");c.Fb=k;b.push(c);c=Jg("editArrow","Arrow","","tr-icon tr-arrow");c.Fb=k;b.push(c);b.push(new Oj);b=Rj(b);b=Sj(b);return Tj(b,a)},void 0);w("kemia.controller.plugins.AtomEdit",wi,void 0);w("kemia.controller.plugins.BondEdit",ii,void 0);w("kemia.controller.plugins.Cleanup",{}.Yk,void 0);w("kemia.controller.plugins.ClearEditor",Yh,void 0);
w("kemia.controller.plugins.Erase",Uh,void 0);w("kemia.controller.plugins.MoleculeEdit",Fj,void 0);w("kemia.controller.plugins.Move",nh,void 0);w("kemia.controller.plugins.UndoRedo",Hi,void 0);w("kemia.controller.plugins.Zoom",Zh,void 0);})();
